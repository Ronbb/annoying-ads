var vo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function jp(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e}var yo={exports:{}},ce={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Hp=Object.getOwnPropertySymbols,jx=Object.prototype.hasOwnProperty,Hx=Object.prototype.propertyIsEnumerable;function Vx(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Wx(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(a){return e[a]});if(i.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(a){r[a]=a}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Vp=Wx()?Object.assign:function(t,e){for(var n,i=Vx(t),r,a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var s in n)jx.call(n,s)&&(i[s]=n[s]);if(Hp){r=Hp(n);for(var o=0;o<r.length;o++)Hx.call(n,r[o])&&(i[r[o]]=n[r[o]])}}return i};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql=Vp,Jn=60103,Wp=60106;ce.Fragment=60107;ce.StrictMode=60108;ce.Profiler=60114;var zp=60109,Gp=60110,$p=60112;ce.Suspense=60113;var qp=60115,Kp=60116;if(typeof Symbol=="function"&&Symbol.for){var $t=Symbol.for;Jn=$t("react.element"),Wp=$t("react.portal"),ce.Fragment=$t("react.fragment"),ce.StrictMode=$t("react.strict_mode"),ce.Profiler=$t("react.profiler"),zp=$t("react.provider"),Gp=$t("react.context"),$p=$t("react.forward_ref"),ce.Suspense=$t("react.suspense"),qp=$t("react.memo"),Kp=$t("react.lazy")}var Xp=typeof Symbol=="function"&&Symbol.iterator;function zx(t){return t===null||typeof t!="object"?null:(t=Xp&&t[Xp]||t["@@iterator"],typeof t=="function"?t:null)}function pa(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yp={};function Zn(t,e,n){this.props=t,this.context=e,this.refs=Yp,this.updater=n||Qp}Zn.prototype.isReactComponent={};Zn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(pa(85));this.updater.enqueueSetState(this,t,e,"setState")};Zn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jp(){}Jp.prototype=Zn.prototype;function Kl(t,e,n){this.props=t,this.context=e,this.refs=Yp,this.updater=n||Qp}var Xl=Kl.prototype=new Jp;Xl.constructor=Kl;ql(Xl,Zn.prototype);Xl.isPureReactComponent=!0;var Ql={current:null},Zp=Object.prototype.hasOwnProperty,em={key:!0,ref:!0,__self:!0,__source:!0};function tm(t,e,n){var i,r={},a=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)Zp.call(e,i)&&!em.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];r.children=u}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Jn,type:t,key:a,ref:s,props:r,_owner:Ql.current}}function Gx(t,e){return{$$typeof:Jn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yl(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jn}function $x(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rm=/\/+/g;function Jl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$x(""+t.key):e.toString(36)}function _o(t,e,n,i,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Jn:case Wp:s=!0}}if(s)return s=t,r=r(s),t=i===""?"."+Jl(s,0):i,Array.isArray(r)?(n="",t!=null&&(n=t.replace(rm,"$&/")+"/"),_o(r,e,n,"",function(l){return l})):r!=null&&(Yl(r)&&(r=Gx(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(rm,"$&/")+"/")+t)),e.push(r)),1;if(s=0,i=i===""?".":i+":",Array.isArray(t))for(var o=0;o<t.length;o++){a=t[o];var u=i+Jl(a,o);s+=_o(a,e,n,u,r)}else if(u=zx(t),typeof u=="function")for(t=u.call(t),o=0;!(a=t.next()).done;)a=a.value,u=i+Jl(a,o++),s+=_o(a,e,n,u,r);else if(a==="object")throw e=""+t,Error(pa(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return s}function To(t,e,n){if(t==null)return t;var i=[],r=0;return _o(t,i,"","",function(a){return e.call(n,a,r++)}),i}function qx(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var nm={current:null};function _r(){var t=nm.current;if(t===null)throw Error(pa(321));return t}var Kx={ReactCurrentDispatcher:nm,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Ql,IsSomeRendererActing:{current:!1},assign:ql};ce.Children={map:To,forEach:function(t,e,n){To(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return To(t,function(){e++}),e},toArray:function(t){return To(t,function(e){return e})||[]},only:function(t){if(!Yl(t))throw Error(pa(143));return t}};ce.Component=Zn;ce.PureComponent=Kl;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;ce.cloneElement=function(t,e,n){if(t==null)throw Error(pa(267,t));var i=ql({},t.props),r=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=Ql.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)Zp.call(e,u)&&!em.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];i.children=o}return{$$typeof:Jn,type:t.type,key:r,ref:a,props:i,_owner:s}};ce.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:Gp,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:zp,_context:t},t.Consumer=t};ce.createElement=tm;ce.createFactory=function(t){var e=tm.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:$p,render:t}};ce.isValidElement=Yl;ce.lazy=function(t){return{$$typeof:Kp,_payload:{_status:-1,_result:t},_init:qx}};ce.memo=function(t,e){return{$$typeof:qp,type:t,compare:e===void 0?null:e}};ce.useCallback=function(t,e){return _r().useCallback(t,e)};ce.useContext=function(t,e){return _r().useContext(t,e)};ce.useDebugValue=function(){};ce.useEffect=function(t,e){return _r().useEffect(t,e)};ce.useImperativeHandle=function(t,e,n){return _r().useImperativeHandle(t,e,n)};ce.useLayoutEffect=function(t,e){return _r().useLayoutEffect(t,e)};ce.useMemo=function(t,e){return _r().useMemo(t,e)};ce.useReducer=function(t,e,n){return _r().useReducer(t,e,n)};ce.useRef=function(t){return _r().useRef(t)};ce.useState=function(t){return _r().useState(t)};ce.version="17.0.2";yo.exports=ce;var LA=yo.exports,im={exports:{}},Mt={},am={exports:{}},sm={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,i,r;if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var u=null,l=null,c=function(){if(u!==null)try{var q=t.unstable_now();u(!0,q),u=null}catch(J){throw setTimeout(c,0),J}};e=function(q){u!==null?setTimeout(e,0,q):(u=q,setTimeout(c,0))},n=function(q,J){l=setTimeout(q,J)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},r=t.unstable_forceFrameRate=function(){}}else{var m=window.setTimeout,f=window.clearTimeout;if(typeof console!="undefined"){var _=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof _!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var b=!1,S=null,v=-1,x=5,C=0;t.unstable_shouldYield=function(){return t.unstable_now()>=C},r=function(){},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<q?Math.floor(1e3/q):5};var k=new MessageChannel,I=k.port2;k.port1.onmessage=function(){if(S!==null){var q=t.unstable_now();C=q+x;try{S(!0,q)?I.postMessage(null):(b=!1,S=null)}catch(J){throw I.postMessage(null),J}}else b=!1},e=function(q){S=q,b||(b=!0,I.postMessage(null))},n=function(q,J){v=m(function(){q(t.unstable_now())},J)},i=function(){f(v),v=-1}}function M(q,J){var te=q.length;q.push(J);e:for(;;){var ve=te-1>>>1,Ue=q[ve];if(Ue!==void 0&&0<U(Ue,J))q[ve]=J,q[te]=Ue,te=ve;else break e}}function N(q){return q=q[0],q===void 0?null:q}function B(q){var J=q[0];if(J!==void 0){var te=q.pop();if(te!==J){q[0]=te;e:for(var ve=0,Ue=q.length;ve<Ue;){var mr=2*(ve+1)-1,gr=q[mr],Br=mr+1,jr=q[Br];if(gr!==void 0&&0>U(gr,te))jr!==void 0&&0>U(jr,gr)?(q[ve]=jr,q[Br]=te,ve=Br):(q[ve]=gr,q[mr]=te,ve=mr);else if(jr!==void 0&&0>U(jr,te))q[ve]=jr,q[Br]=te,ve=Br;else break e}}return J}return null}function U(q,J){var te=q.sortIndex-J.sortIndex;return te!==0?te:q.id-J.id}var F=[],H=[],se=1,le=null,ie=3,xe=!1,oe=!1,de=!1;function pe(q){for(var J=N(H);J!==null;){if(J.callback===null)B(H);else if(J.startTime<=q)B(H),J.sortIndex=J.expirationTime,M(F,J);else break;J=N(H)}}function He(q){if(de=!1,pe(q),!oe)if(N(F)!==null)oe=!0,e(et);else{var J=N(H);J!==null&&n(He,J.startTime-q)}}function et(q,J){oe=!1,de&&(de=!1,i()),xe=!0;var te=ie;try{for(pe(J),le=N(F);le!==null&&(!(le.expirationTime>J)||q&&!t.unstable_shouldYield());){var ve=le.callback;if(typeof ve=="function"){le.callback=null,ie=le.priorityLevel;var Ue=ve(le.expirationTime<=J);J=t.unstable_now(),typeof Ue=="function"?le.callback=Ue:le===N(F)&&B(F),pe(J)}else B(F);le=N(F)}if(le!==null)var mr=!0;else{var gr=N(H);gr!==null&&n(He,gr.startTime-J),mr=!1}return mr}finally{le=null,ie=te,xe=!1}}var zt=r;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){oe||xe||(oe=!0,e(et))},t.unstable_getCurrentPriorityLevel=function(){return ie},t.unstable_getFirstCallbackNode=function(){return N(F)},t.unstable_next=function(q){switch(ie){case 1:case 2:case 3:var J=3;break;default:J=ie}var te=ie;ie=J;try{return q()}finally{ie=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=zt,t.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=ie;ie=q;try{return J()}finally{ie=te}},t.unstable_scheduleCallback=function(q,J,te){var ve=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ve+te:ve):te=ve,q){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=te+Ue,q={id:se++,callback:J,priorityLevel:q,startTime:te,expirationTime:Ue,sortIndex:-1},te>ve?(q.sortIndex=te,M(H,q),N(F)===null&&q===N(H)&&(de?i():de=!0,n(He,te-ve))):(q.sortIndex=Ue,M(F,q),oe||xe||(oe=!0,e(et))),q},t.unstable_wrapCallback=function(q){var J=ie;return function(){var te=ie;ie=J;try{return q.apply(this,arguments)}finally{ie=te}}}})(sm);am.exports=sm;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=yo.exports,ke=Vp,Ve=am.exports;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!So)throw Error(G(227));var om=new Set,ma={};function Sn(t,e){ei(t,e),ei(t+"Capture",e)}function ei(t,e){for(ma[t]=e,t=0;t<e.length;t++)om.add(e[t])}var Tr=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Xx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,um=Object.prototype.hasOwnProperty,lm={},dm={};function Qx(t){return um.call(dm,t)?!0:um.call(lm,t)?!1:Xx.test(t)?dm[t]=!0:(lm[t]=!0,!1)}function Yx(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Jx(t,e,n,i){if(e===null||typeof e=="undefined"||Yx(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,i,r,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zl=/[\-:]([a-z])/g;function ed(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zl,ed);Xe[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zl,ed);Xe[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zl,ed);Xe[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function td(t,e,n,i){var r=Xe.hasOwnProperty(e)?Xe[e]:null,a=r!==null?r.type===0:i?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");a||(Jx(e,n,r,i)&&(n=null),i||r===null?Qx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var xn=So.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ga=60103,bn=60106,Vr=60107,rd=60108,va=60114,nd=60109,id=60110,xo=60112,ya=60113,bo=60120,Eo=60115,ad=60116,sd=60121,od=60128,cm=60129,ud=60130,ld=60131;if(typeof Symbol=="function"&&Symbol.for){var We=Symbol.for;ga=We("react.element"),bn=We("react.portal"),Vr=We("react.fragment"),rd=We("react.strict_mode"),va=We("react.profiler"),nd=We("react.provider"),id=We("react.context"),xo=We("react.forward_ref"),ya=We("react.suspense"),bo=We("react.suspense_list"),Eo=We("react.memo"),ad=We("react.lazy"),sd=We("react.block"),We("react.scope"),od=We("react.opaque.id"),cm=We("react.debug_trace_mode"),ud=We("react.offscreen"),ld=We("react.legacy_hidden")}var fm=typeof Symbol=="function"&&Symbol.iterator;function _a(t){return t===null||typeof t!="object"?null:(t=fm&&t[fm]||t["@@iterator"],typeof t=="function"?t:null)}var dd;function Ta(t){if(dd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dd=e&&e[1]||""}return`
`+dd+t}var cd=!1;function Co(t,e){if(!t||cd)return"";cd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=i.stack.split(`
`),s=r.length-1,o=a.length-1;1<=s&&0<=o&&r[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(r[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||r[s]!==a[o])return`
`+r[s].replace(" at new "," at ");while(1<=s&&0<=o);break}}}finally{cd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ta(t):""}function Zx(t){switch(t.tag){case 5:return Ta(t.type);case 16:return Ta("Lazy");case 13:return Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 2:case 15:return t=Co(t.type,!1),t;case 11:return t=Co(t.type.render,!1),t;case 22:return t=Co(t.type._render,!1),t;case 1:return t=Co(t.type,!0),t;default:return""}}function ti(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vr:return"Fragment";case bn:return"Portal";case va:return"Profiler";case rd:return"StrictMode";case ya:return"Suspense";case bo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case id:return(t.displayName||"Context")+".Consumer";case nd:return(t._context.displayName||"Context")+".Provider";case xo:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case Eo:return ti(t.type);case sd:return ti(t._render);case ad:e=t._payload,t=t._init;try{return ti(t(e))}catch{}}return null}function Wr(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function hm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eb(t){var e=hm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wo(t){t._valueTracker||(t._valueTracker=eb(t))}function pm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=hm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ko(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function fd(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function mm(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gm(t,e){e=e.checked,e!=null&&td(t,"checked",e,!1)}function hd(t,e){gm(t,e);var n=Wr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pd(t,e.type,n):e.hasOwnProperty("defaultValue")&&pd(t,e.type,Wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pd(t,e,n){(e!=="number"||ko(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function tb(t){var e="";return So.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function md(t,e){return t=ke({children:void 0},e),(e=tb(e.children))&&(t.children=e),t}function ri(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Wr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ym(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wr(n)}}function _m(t,e){var n=Wr(e.value),i=Wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Tm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var vd={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Sm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Po,xm=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!==vd.svg||"innerHTML"in t)t.innerHTML=e;else{for(Po=Po||document.createElement("div"),Po.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Po.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(xa).forEach(function(t){rb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xa[e]=xa[t]})});function bm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xa.hasOwnProperty(t)&&xa[t]?(""+e).trim():e+"px"}function Em(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=bm(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var nb=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _d(t,e){if(e){if(nb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Td(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Sd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xd=null,ni=null,ii=null;function Cm(t){if(t=Ha(t)){if(typeof xd!="function")throw Error(G(280));var e=t.stateNode;e&&(e=$o(e),xd(t.stateNode,t.type,e))}}function wm(t){ni?ii?ii.push(t):ii=[t]:ni=t}function km(){if(ni){var t=ni,e=ii;if(ii=ni=null,Cm(t),e)for(t=0;t<e.length;t++)Cm(e[t])}}function bd(t,e){return t(e)}function Pm(t,e,n,i,r){return t(e,n,i,r)}function Ed(){}var Im=bd,En=!1,Cd=!1;function wd(){(ni!==null||ii!==null)&&(Ed(),km())}function ib(t,e,n){if(Cd)return t(e,n);Cd=!0;try{return Im(t,e,n)}finally{Cd=!1,wd()}}function ba(t,e){var n=t.stateNode;if(n===null)return null;var i=$o(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var kd=!1;if(Tr)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){kd=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{kd=!1}function ab(t,e,n,i,r,a,s,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Ca=!1,Io=null,Ao=!1,Pd=null,sb={onError:function(t){Ca=!0,Io=t}};function ob(t,e,n,i,r,a,s,o,u){Ca=!1,Io=null,ab.apply(sb,arguments)}function ub(t,e,n,i,r,a,s,o,u){if(ob.apply(this,arguments),Ca){if(Ca){var l=Io;Ca=!1,Io=null}else throw Error(G(198));Ao||(Ao=!0,Pd=l)}}function Cn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!=0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Am(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dm(t){if(Cn(t)!==t)throw Error(G(188))}function lb(t){var e=t.alternate;if(!e){if(e=Cn(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return Dm(r),t;if(a===i)return Dm(r),e;a=a.sibling}throw Error(G(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,o=r.child;o;){if(o===n){s=!0,n=r,i=a;break}if(o===i){s=!0,i=r,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,i=r;break}if(o===i){s=!0,i=a,n=r;break}o=o.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==i)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function Lm(t){if(t=lb(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Om(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var Rm,Id,Mm,Nm,Ad=!1,rr=[],zr=null,Gr=null,$r=null,wa=new Map,ka=new Map,Pa=[],Fm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(t,e,n,i,r){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:r,targetContainers:[i]}}function Um(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(e.pointerId)}}function Ia(t,e,n,i,r,a){return t===null||t.nativeEvent!==a?(t=Dd(e,n,i,r,a),e!==null&&(e=Ha(e),e!==null&&Id(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function db(t,e,n,i,r){switch(e){case"focusin":return zr=Ia(zr,t,e,n,i,r),!0;case"dragenter":return Gr=Ia(Gr,t,e,n,i,r),!0;case"mouseover":return $r=Ia($r,t,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return wa.set(a,Ia(wa.get(a)||null,t,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,ka.set(a,Ia(ka.get(a)||null,t,e,n,i,r)),!0}return!1}function cb(t){var e=wn(t.target);if(e!==null){var n=Cn(e);if(n!==null){if(e=n.tag,e===13){if(e=Am(n),e!==null){t.blockedOn=e,Nm(t.lanePriority,function(){Ve.unstable_runWithPriority(t.priority,function(){Mm(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Do(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=Ha(n),e!==null&&Id(e),t.blockedOn=n,!1;e.shift()}return!0}function Bm(t,e,n){Do(t)&&n.delete(e)}function fb(){for(Ad=!1;0<rr.length;){var t=rr[0];if(t.blockedOn!==null){t=Ha(t.blockedOn),t!==null&&Rm(t);break}for(var e=t.targetContainers;0<e.length;){var n=Fd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&rr.shift()}zr!==null&&Do(zr)&&(zr=null),Gr!==null&&Do(Gr)&&(Gr=null),$r!==null&&Do($r)&&($r=null),wa.forEach(Bm),ka.forEach(Bm)}function Aa(t,e){t.blockedOn===e&&(t.blockedOn=null,Ad||(Ad=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,fb)))}function jm(t){function e(r){return Aa(r,t)}if(0<rr.length){Aa(rr[0],t);for(var n=1;n<rr.length;n++){var i=rr[n];i.blockedOn===t&&(i.blockedOn=null)}}for(zr!==null&&Aa(zr,t),Gr!==null&&Aa(Gr,t),$r!==null&&Aa($r,t),wa.forEach(e),ka.forEach(e),n=0;n<Pa.length;n++)i=Pa[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Pa.length&&(n=Pa[0],n.blockedOn===null);)cb(n),n.blockedOn===null&&Pa.shift()}function Lo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ai={animationend:Lo("Animation","AnimationEnd"),animationiteration:Lo("Animation","AnimationIteration"),animationstart:Lo("Animation","AnimationStart"),transitionend:Lo("Transition","TransitionEnd")},Ld={},Hm={};Tr&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function Oo(t){if(Ld[t])return Ld[t];if(!ai[t])return t;var e=ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hm)return Ld[t]=e[n];return t}var Vm=Oo("animationend"),Wm=Oo("animationiteration"),zm=Oo("animationstart"),Gm=Oo("transitionend"),$m=new Map,Od=new Map,hb=["abort","abort",Vm,"animationEnd",Wm,"animationIteration",zm,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Gm,"transitionEnd","waiting","waiting"];function Rd(t,e){for(var n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Od.set(i,e),$m.set(i,r),Sn(r,[i])}}var pb=Ve.unstable_now;pb();var _e=8;function si(t){if((1&t)!=0)return _e=15,1;if((2&t)!=0)return _e=14,2;if((4&t)!=0)return _e=13,4;var e=24&t;return e!==0?(_e=12,e):(t&32)!=0?(_e=11,32):(e=192&t,e!==0?(_e=10,e):(t&256)!=0?(_e=9,256):(e=3584&t,e!==0?(_e=8,e):(t&4096)!=0?(_e=7,4096):(e=4186112&t,e!==0?(_e=6,e):(e=62914560&t,e!==0?(_e=5,e):t&67108864?(_e=4,67108864):(t&134217728)!=0?(_e=3,134217728):(e=805306368&t,e!==0?(_e=2,e):(1073741824&t)!=0?(_e=1,1073741824):(_e=8,t))))))}function mb(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function gb(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(G(358,t))}}function Da(t,e){var n=t.pendingLanes;if(n===0)return _e=0;var i=0,r=0,a=t.expiredLanes,s=t.suspendedLanes,o=t.pingedLanes;if(a!==0)i=a,r=_e=15;else if(a=n&134217727,a!==0){var u=a&~s;u!==0?(i=si(u),r=_e):(o&=a,o!==0&&(i=si(o),r=_e))}else a=n&~s,a!==0?(i=si(a),r=_e):o!==0&&(i=si(o),r=_e);if(i===0)return 0;if(i=31-qr(i),i=n&((0>i?0:1<<i)<<1)-1,e!==0&&e!==i&&(e&s)==0){if(si(e),r<=_e)return e;_e=r}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-qr(e),r=1<<n,i|=t[n],e&=~r;return i}function qm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ro(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=oi(24&~e),t===0?Ro(10,e):t;case 10:return t=oi(192&~e),t===0?Ro(8,e):t;case 8:return t=oi(3584&~e),t===0&&(t=oi(4186112&~e),t===0&&(t=512)),t;case 2:return e=oi(805306368&~e),e===0&&(e=268435456),e}throw Error(G(358,t))}function oi(t){return t&-t}function Md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mo(t,e,n){t.pendingLanes|=e;var i=e-1;t.suspendedLanes&=i,t.pingedLanes&=i,t=t.eventTimes,e=31-qr(e),t[e]=n}var qr=Math.clz32?Math.clz32:_b,vb=Math.log,yb=Math.LN2;function _b(t){return t===0?32:31-(vb(t)/yb|0)|0}var Tb=Ve.unstable_UserBlockingPriority,Sb=Ve.unstable_runWithPriority,No=!0;function xb(t,e,n,i){En||Ed();var r=Nd,a=En;En=!0;try{Pm(r,t,e,n,i)}finally{(En=a)||wd()}}function bb(t,e,n,i){Sb(Tb,Nd.bind(null,t,e,n,i))}function Nd(t,e,n,i){if(No){var r;if((r=(e&4)==0)&&0<rr.length&&-1<Fm.indexOf(t))t=Dd(null,t,e,n,i),rr.push(t);else{var a=Fd(t,e,n,i);if(a===null)r&&Um(t,i);else{if(r){if(-1<Fm.indexOf(t)){t=Dd(a,t,e,n,i),rr.push(t);return}if(db(a,t,e,n,i))return;Um(t,i)}bg(t,e,i,null,n)}}}}function Fd(t,e,n,i){var r=Sd(i);if(r=wn(r),r!==null){var a=Cn(r);if(a===null)r=null;else{var s=a.tag;if(s===13){if(r=Am(a),r!==null)return r;r=null}else if(s===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return bg(t,e,i,r,n),null}var Kr=null,Ud=null,Fo=null;function Km(){if(Fo)return Fo;var t,e=Ud,n=e.length,i,r="value"in Kr?Kr.value:Kr.textContent,a=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(i=1;i<=s&&e[n-i]===r[a-i];i++);return Fo=r.slice(t,1<i?1-i:void 0)}function Uo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bo(){return!0}function Xm(){return!1}function It(t){function e(n,i,r,a,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Bo:Xm,this.isPropagationStopped=Xm,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),e}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=It(ui),La=ke({},ui,{view:0,detail:0}),Eb=It(La),jd,Hd,Oa,jo=ke({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(jd=t.screenX-Oa.screenX,Hd=t.screenY-Oa.screenY):Hd=jd=0,Oa=t),jd)},movementY:function(t){return"movementY"in t?t.movementY:Hd}}),Qm=It(jo),Cb=ke({},jo,{dataTransfer:0}),wb=It(Cb),kb=ke({},La,{relatedTarget:0}),Vd=It(kb),Pb=ke({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Ib=It(Pb),Ab=ke({},ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Db=It(Ab),Lb=ke({},ui,{data:0}),Ym=It(Lb),Ob={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mb[t])?!!e[t]:!1}function Wd(){return Nb}var Fb=ke({},La,{key:function(t){if(t.key){var e=Ob[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wd,charCode:function(t){return t.type==="keypress"?Uo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ub=It(Fb),Bb=ke({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jm=It(Bb),jb=ke({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wd}),Hb=It(jb),Vb=ke({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wb=It(Vb),zb=ke({},jo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gb=It(zb),$b=[9,13,27,32],zd=Tr&&"CompositionEvent"in window,Ra=null;Tr&&"documentMode"in document&&(Ra=document.documentMode);var qb=Tr&&"TextEvent"in window&&!Ra,Zm=Tr&&(!zd||Ra&&8<Ra&&11>=Ra),eg=String.fromCharCode(32),tg=!1;function rg(t,e){switch(t){case"keyup":return $b.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ng(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function Kb(t,e){switch(t){case"compositionend":return ng(e);case"keypress":return e.which!==32?null:(tg=!0,eg);case"textInput":return t=e.data,t===eg&&tg?null:t;default:return null}}function Xb(t,e){if(li)return t==="compositionend"||!zd&&rg(t,e)?(t=Km(),Fo=Ud=Kr=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zm&&e.locale!=="ko"?null:e.data;default:return null}}var Qb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ig(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qb[t.type]:e==="textarea"}function ag(t,e,n,i){wm(i),e=Vo(e,"onChange"),0<e.length&&(n=new Bd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ma=null,Na=null;function Yb(t){yg(t,0)}function Ho(t){var e=pi(t);if(pm(e))return t}function Jb(t,e){if(t==="change")return e}var sg=!1;if(Tr){var Gd;if(Tr){var $d="oninput"in document;if(!$d){var og=document.createElement("div");og.setAttribute("oninput","return;"),$d=typeof og.oninput=="function"}Gd=$d}else Gd=!1;sg=Gd&&(!document.documentMode||9<document.documentMode)}function ug(){Ma&&(Ma.detachEvent("onpropertychange",lg),Na=Ma=null)}function lg(t){if(t.propertyName==="value"&&Ho(Na)){var e=[];if(ag(e,Na,t,Sd(t)),t=Yb,En)t(e);else{En=!0;try{bd(t,e)}finally{En=!1,wd()}}}}function Zb(t,e,n){t==="focusin"?(ug(),Ma=e,Na=n,Ma.attachEvent("onpropertychange",lg)):t==="focusout"&&ug()}function eE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ho(Na)}function tE(t,e){if(t==="click")return Ho(e)}function rE(t,e){if(t==="input"||t==="change")return Ho(e)}function nE(t,e){return t===e&&(t!==0||1/t==1/e)||t!==t&&e!==e}var Nt=typeof Object.is=="function"?Object.is:nE,iE=Object.prototype.hasOwnProperty;function Fa(t,e){if(Nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!iE.call(e,n[i])||!Nt(t[n[i]],e[n[i]]))return!1;return!0}function dg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cg(t,e){var n=dg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dg(n)}}function fg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hg(){for(var t=window,e=ko();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ko(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var aE=Tr&&"documentMode"in document&&11>=document.documentMode,di=null,Kd=null,Ua=null,Xd=!1;function pg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xd||di==null||di!==ko(i)||(i=di,"selectionStart"in i&&qd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ua&&Fa(Ua,i)||(Ua=i,i=Vo(Kd,"onSelect"),0<i.length&&(e=new Bd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=di)))}Rd("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Rd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Rd(hb,2);for(var mg="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Qd=0;Qd<mg.length;Qd++)Od.set(mg[Qd],0);ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function vg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,ub(i,e,void 0,t),t.currentTarget=null}function yg(t,e){e=(e&4)!=0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var s=i.length-1;0<=s;s--){var o=i[s],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==a&&r.isPropagationStopped())break e;vg(r,o,l),a=u}else for(s=0;s<i.length;s++){if(o=i[s],u=o.instance,l=o.currentTarget,o=o.listener,u!==a&&r.isPropagationStopped())break e;vg(r,o,l),a=u}}}if(Ao)throw t=Pd,Ao=!1,Pd=null,t}function Ee(t,e){var n=Ig(e),i=t+"__bubble";n.has(i)||(xg(e,t,2,!1),n.add(i))}var _g="_reactListening"+Math.random().toString(36).slice(2);function Tg(t){t[_g]||(t[_g]=!0,om.forEach(function(e){gg.has(e)||Sg(e,!1,t,null),Sg(e,!0,t,null)}))}function Sg(t,e,n,i){var r=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=n;if(t==="selectionchange"&&n.nodeType!==9&&(a=n.ownerDocument),i!==null&&!e&&gg.has(t)){if(t!=="scroll")return;r|=2,a=i}var s=Ig(a),o=t+"__"+(e?"capture":"bubble");s.has(o)||(e&&(r|=4),xg(a,t,r,e),s.add(o))}function xg(t,e,n,i){var r=Od.get(e);switch(r===void 0?2:r){case 0:r=xb;break;case 1:r=bb;break;default:r=Nd}n=r.bind(null,e,n,t),r=void 0,!kd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function bg(t,e,n,i,r){var a=i;if((e&1)==0&&(e&2)==0&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;o!==null;){if(s=wn(o),s===null)return;if(u=s.tag,u===5||u===6){i=a=s;continue e}o=o.parentNode}}i=i.return}ib(function(){var l=a,c=Sd(n),m=[];e:{var f=$m.get(t);if(f!==void 0){var _=Bd,b=t;switch(t){case"keypress":if(Uo(n)===0)break e;case"keydown":case"keyup":_=Ub;break;case"focusin":b="focus",_=Vd;break;case"focusout":b="blur",_=Vd;break;case"beforeblur":case"afterblur":_=Vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Qm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=wb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Hb;break;case Vm:case Wm:case zm:_=Ib;break;case Gm:_=Wb;break;case"scroll":_=Eb;break;case"wheel":_=Gb;break;case"copy":case"cut":case"paste":_=Db;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Jm}var S=(e&4)!=0,v=!S&&t==="scroll",x=S?f!==null?f+"Capture":null:f;S=[];for(var C=l,k;C!==null;){k=C;var I=k.stateNode;if(k.tag===5&&I!==null&&(k=I,x!==null&&(I=ba(C,x),I!=null&&S.push(ja(C,I,k)))),v)break;C=C.return}0<S.length&&(f=new _(f,b,null,n,c),m.push({event:f,listeners:S}))}}if((e&7)==0){e:{if(f=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",f&&(e&16)==0&&(b=n.relatedTarget||n.fromElement)&&(wn(b)||b[hi]))break e;if((_||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,_?(b=n.relatedTarget||n.toElement,_=l,b=b?wn(b):null,b!==null&&(v=Cn(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(_=null,b=l),_!==b)){if(S=Qm,I="onMouseLeave",x="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(S=Jm,I="onPointerLeave",x="onPointerEnter",C="pointer"),v=_==null?f:pi(_),k=b==null?f:pi(b),f=new S(I,C+"leave",_,n,c),f.target=v,f.relatedTarget=k,I=null,wn(c)===l&&(S=new S(x,C+"enter",b,n,c),S.target=k,S.relatedTarget=v,I=S),v=I,_&&b)t:{for(S=_,x=b,C=0,k=S;k;k=ci(k))C++;for(k=0,I=x;I;I=ci(I))k++;for(;0<C-k;)S=ci(S),C--;for(;0<k-C;)x=ci(x),k--;for(;C--;){if(S===x||x!==null&&S===x.alternate)break t;S=ci(S),x=ci(x)}S=null}else S=null;_!==null&&Eg(m,f,_,S,!1),b!==null&&v!==null&&Eg(m,v,b,S,!0)}}e:{if(f=l?pi(l):window,_=f.nodeName&&f.nodeName.toLowerCase(),_==="select"||_==="input"&&f.type==="file")var M=Jb;else if(ig(f))if(sg)M=rE;else{M=eE;var N=Zb}else(_=f.nodeName)&&_.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=tE);if(M&&(M=M(t,l))){ag(m,M,n,c);break e}N&&N(t,f,l),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&pd(f,"number",f.value)}switch(N=l?pi(l):window,t){case"focusin":(ig(N)||N.contentEditable==="true")&&(di=N,Kd=l,Ua=null);break;case"focusout":Ua=Kd=di=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,pg(m,n,c);break;case"selectionchange":if(aE)break;case"keydown":case"keyup":pg(m,n,c)}var B;if(zd)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else li?rg(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(Zm&&n.locale!=="ko"&&(li||U!=="onCompositionStart"?U==="onCompositionEnd"&&li&&(B=Km()):(Kr=c,Ud="value"in Kr?Kr.value:Kr.textContent,li=!0)),N=Vo(l,U),0<N.length&&(U=new Ym(U,t,null,n,c),m.push({event:U,listeners:N}),B?U.data=B:(B=ng(n),B!==null&&(U.data=B)))),(B=qb?Kb(t,n):Xb(t,n))&&(l=Vo(l,"onBeforeInput"),0<l.length&&(c=new Ym("onBeforeInput","beforeinput",null,n,c),m.push({event:c,listeners:l}),c.data=B))}yg(m,e)})}function ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vo(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=ba(t,n),a!=null&&i.unshift(ja(t,a,r)),a=ba(t,e),a!=null&&i.push(ja(t,a,r))),t=t.return}return i}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,i,r){for(var a=e._reactName,s=[];n!==null&&n!==i;){var o=n,u=o.alternate,l=o.stateNode;if(u!==null&&u===i)break;o.tag===5&&l!==null&&(o=l,r?(u=ba(n,a),u!=null&&s.unshift(ja(n,u,o))):r||(u=ba(n,a),u!=null&&s.push(ja(n,u,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}function Wo(){}var Yd=null,Jd=null;function Cg(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Zd(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wg=typeof setTimeout=="function"?setTimeout:void 0,sE=typeof clearTimeout=="function"?clearTimeout:void 0;function ec(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tc=0;function oE(t){return{$$typeof:od,toString:t,valueOf:t}}var zo=Math.random().toString(36).slice(2),Xr="__reactFiber$"+zo,Go="__reactProps$"+zo,hi="__reactContainer$"+zo,Pg="__reactEvents$"+zo;function wn(t){var e=t[Xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hi]||n[Xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kg(t);t!==null;){if(n=t[Xr])return n;t=kg(t)}return e}t=n,n=t.parentNode}return null}function Ha(t){return t=t[Xr]||t[hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function $o(t){return t[Go]||null}function Ig(t){var e=t[Pg];return e===void 0&&(e=t[Pg]=new Set),e}var rc=[],mi=-1;function Qr(t){return{current:t}}function Ce(t){0>mi||(t.current=rc[mi],rc[mi]=null,mi--)}function Ae(t,e){mi++,rc[mi]=t.current,t.current=e}var Yr={},tt=Qr(Yr),_t=Qr(!1),kn=Yr;function gi(t,e){var n=t.type.contextTypes;if(!n)return Yr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Tt(t){return t=t.childContextTypes,t!=null}function qo(){Ce(_t),Ce(tt)}function Ag(t,e,n){if(tt.current!==Yr)throw Error(G(168));Ae(tt,e),Ae(_t,n)}function Dg(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(G(108,ti(e)||"Unknown",r));return ke({},n,i)}function Ko(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yr,kn=tt.current,Ae(tt,t),Ae(_t,_t.current),!0}function Lg(t,e,n){var i=t.stateNode;if(!i)throw Error(G(169));n?(t=Dg(t,e,kn),i.__reactInternalMemoizedMergedChildContext=t,Ce(_t),Ce(tt),Ae(tt,t)):Ce(_t),Ae(_t,n)}var nc=null,Pn=null,uE=Ve.unstable_runWithPriority,ic=Ve.unstable_scheduleCallback,ac=Ve.unstable_cancelCallback,lE=Ve.unstable_shouldYield,Og=Ve.unstable_requestPaint,sc=Ve.unstable_now,dE=Ve.unstable_getCurrentPriorityLevel,Xo=Ve.unstable_ImmediatePriority,Rg=Ve.unstable_UserBlockingPriority,Mg=Ve.unstable_NormalPriority,Ng=Ve.unstable_LowPriority,Fg=Ve.unstable_IdlePriority,oc={},cE=Og!==void 0?Og:function(){},Sr=null,Qo=null,uc=!1,Ug=sc(),rt=1e4>Ug?sc:function(){return sc()-Ug};function vi(){switch(dE()){case Xo:return 99;case Rg:return 98;case Mg:return 97;case Ng:return 96;case Fg:return 95;default:throw Error(G(332))}}function Bg(t){switch(t){case 99:return Xo;case 98:return Rg;case 97:return Mg;case 96:return Ng;case 95:return Fg;default:throw Error(G(332))}}function In(t,e){return t=Bg(t),uE(t,e)}function Va(t,e,n){return t=Bg(t),ic(t,e,n)}function nr(){if(Qo!==null){var t=Qo;Qo=null,ac(t)}jg()}function jg(){if(!uc&&Sr!==null){uc=!0;var t=0;try{var e=Sr;In(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),Sr=null}catch(n){throw Sr!==null&&(Sr=Sr.slice(t+1)),ic(Xo,nr),n}finally{uc=!1}}}var fE=xn.ReactCurrentBatchConfig;function qt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Yo=Qr(null),Jo=null,yi=null,Zo=null;function lc(){Zo=yi=Jo=null}function dc(t){var e=Yo.current;Ce(Yo),t.type._context._currentValue=e}function Hg(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function _i(t,e){Jo=t,Zo=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!=0&&(Kt=!0),t.firstContext=null)}function Ft(t,e){if(Zo!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(Zo=t,e=1073741823),e={context:t,observedBits:e,next:null},yi===null){if(Jo===null)throw Error(G(308));yi=e,Jo.dependencies={lanes:0,firstContext:e,responders:null}}else yi=yi.next=e;return t._currentValue}var Jr=!1;function cc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Vg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function en(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function Wg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wa(t,e,n,i){var r=t.updateQueue;Jr=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var u=o,l=u.next;u.next=null,s===null?a=l:s.next=l,s=u;var c=t.alternate;if(c!==null){c=c.updateQueue;var m=c.lastBaseUpdate;m!==s&&(m===null?c.firstBaseUpdate=l:m.next=l,c.lastBaseUpdate=u)}}if(a!==null){m=r.baseState,s=0,c=l=u=null;do{o=a.lane;var f=a.eventTime;if((i&o)===o){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,b=a;switch(o=e,f=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){m=_.call(f,m,o);break e}m=_;break e;case 3:_.flags=_.flags&-4097|64;case 0:if(_=b.payload,o=typeof _=="function"?_.call(f,m,o):_,o==null)break e;m=ke({},m,o);break e;case 2:Jr=!0}}a.callback!==null&&(t.flags|=32,o=r.effects,o===null?r.effects=[a]:o.push(a))}else f={eventTime:f,lane:o,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=f,u=m):c=c.next=f,s|=o;if(a=a.next,a===null){if(o=r.shared.pending,o===null)break;a=o.next,o.next=null,r.lastBaseUpdate=o,r.shared.pending=null}}while(1);c===null&&(u=m),r.baseState=u,r.firstBaseUpdate=l,r.lastBaseUpdate=c,ts|=s,t.lanes=s,t.memoizedState=m}}function zg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(G(191,r));r.call(i)}}}var Gg=new So.Component().refs;function eu(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var tu={isMounted:function(t){return(t=t._reactInternals)?Cn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=At(),r=nn(t),a=Zr(i,r);a.payload=e,n!=null&&(a.callback=n),en(t,a),an(t,r,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=At(),r=nn(t),a=Zr(i,r);a.tag=1,a.payload=e,n!=null&&(a.callback=n),en(t,a),an(t,r,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),i=nn(t),r=Zr(n,i);r.tag=2,e!=null&&(r.callback=e),en(t,r),an(t,i,n)}};function $g(t,e,n,i,r,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,s):e.prototype&&e.prototype.isPureReactComponent?!Fa(n,i)||!Fa(r,a):!0}function qg(t,e,n){var i=!1,r=Yr,a=e.contextType;return typeof a=="object"&&a!==null?a=Ft(a):(r=Tt(e)?kn:tt.current,i=e.contextTypes,a=(i=i!=null)?gi(t,r):Yr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tu,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function Kg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&tu.enqueueReplaceState(e,e.state,null)}function fc(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=Gg,cc(t);var a=e.contextType;typeof a=="object"&&a!==null?r.context=Ft(a):(a=Tt(e)?kn:tt.current,r.context=gi(t,a)),Wa(t,n,r,i),r.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(eu(t,e,a,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&tu.enqueueReplaceState(r,r.state,null),Wa(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4)}var ru=Array.isArray;function za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var i=n.stateNode}if(!i)throw Error(G(147,t));var r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var s=i.refs;s===Gg&&(s=i.refs={}),a===null?delete s[r]:s[r]=a},e._stringRef=r,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function nu(t,e){if(t.type!=="textarea")throw Error(G(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Xg(t){function e(v,x){if(t){var C=v.lastEffect;C!==null?(C.nextEffect=x,v.lastEffect=x):v.firstEffect=v.lastEffect=x,x.nextEffect=null,x.flags=8}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function i(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function r(v,x){return v=un(v,x),v.index=0,v.sibling=null,v}function a(v,x,C){return v.index=C,t?(C=v.alternate,C!==null?(C=C.index,C<x?(v.flags=2,x):C):(v.flags=2,x)):x}function s(v){return t&&v.alternate===null&&(v.flags=2),v}function o(v,x,C,k){return x===null||x.tag!==6?(x=Kc(C,v.mode,k),x.return=v,x):(x=r(x,C),x.return=v,x)}function u(v,x,C,k){return x!==null&&x.elementType===C.type?(k=r(x,C.props),k.ref=za(v,x,C),k.return=v,k):(k=Su(C.type,C.key,C.props,null,v.mode,k),k.ref=za(v,x,C),k.return=v,k)}function l(v,x,C,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=Xc(C,v.mode,k),x.return=v,x):(x=r(x,C.children||[]),x.return=v,x)}function c(v,x,C,k,I){return x===null||x.tag!==7?(x=ki(C,v.mode,k,I),x.return=v,x):(x=r(x,C),x.return=v,x)}function m(v,x,C){if(typeof x=="string"||typeof x=="number")return x=Kc(""+x,v.mode,C),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ga:return C=Su(x.type,x.key,x.props,null,v.mode,C),C.ref=za(v,null,x),C.return=v,C;case bn:return x=Xc(x,v.mode,C),x.return=v,x}if(ru(x)||_a(x))return x=ki(x,v.mode,C,null),x.return=v,x;nu(v,x)}return null}function f(v,x,C,k){var I=x!==null?x.key:null;if(typeof C=="string"||typeof C=="number")return I!==null?null:o(v,x,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ga:return C.key===I?C.type===Vr?c(v,x,C.props.children,k,I):u(v,x,C,k):null;case bn:return C.key===I?l(v,x,C,k):null}if(ru(C)||_a(C))return I!==null?null:c(v,x,C,k,null);nu(v,C)}return null}function _(v,x,C,k,I){if(typeof k=="string"||typeof k=="number")return v=v.get(C)||null,o(x,v,""+k,I);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ga:return v=v.get(k.key===null?C:k.key)||null,k.type===Vr?c(x,v,k.props.children,I,k.key):u(x,v,k,I);case bn:return v=v.get(k.key===null?C:k.key)||null,l(x,v,k,I)}if(ru(k)||_a(k))return v=v.get(C)||null,c(x,v,k,I,null);nu(x,k)}return null}function b(v,x,C,k){for(var I=null,M=null,N=x,B=x=0,U=null;N!==null&&B<C.length;B++){N.index>B?(U=N,N=null):U=N.sibling;var F=f(v,N,C[B],k);if(F===null){N===null&&(N=U);break}t&&N&&F.alternate===null&&e(v,N),x=a(F,x,B),M===null?I=F:M.sibling=F,M=F,N=U}if(B===C.length)return n(v,N),I;if(N===null){for(;B<C.length;B++)N=m(v,C[B],k),N!==null&&(x=a(N,x,B),M===null?I=N:M.sibling=N,M=N);return I}for(N=i(v,N);B<C.length;B++)U=_(N,v,B,C[B],k),U!==null&&(t&&U.alternate!==null&&N.delete(U.key===null?B:U.key),x=a(U,x,B),M===null?I=U:M.sibling=U,M=U);return t&&N.forEach(function(H){return e(v,H)}),I}function S(v,x,C,k){var I=_a(C);if(typeof I!="function")throw Error(G(150));if(C=I.call(C),C==null)throw Error(G(151));for(var M=I=null,N=x,B=x=0,U=null,F=C.next();N!==null&&!F.done;B++,F=C.next()){N.index>B?(U=N,N=null):U=N.sibling;var H=f(v,N,F.value,k);if(H===null){N===null&&(N=U);break}t&&N&&H.alternate===null&&e(v,N),x=a(H,x,B),M===null?I=H:M.sibling=H,M=H,N=U}if(F.done)return n(v,N),I;if(N===null){for(;!F.done;B++,F=C.next())F=m(v,F.value,k),F!==null&&(x=a(F,x,B),M===null?I=F:M.sibling=F,M=F);return I}for(N=i(v,N);!F.done;B++,F=C.next())F=_(N,v,B,F.value,k),F!==null&&(t&&F.alternate!==null&&N.delete(F.key===null?B:F.key),x=a(F,x,B),M===null?I=F:M.sibling=F,M=F);return t&&N.forEach(function(se){return e(v,se)}),I}return function(v,x,C,k){var I=typeof C=="object"&&C!==null&&C.type===Vr&&C.key===null;I&&(C=C.props.children);var M=typeof C=="object"&&C!==null;if(M)switch(C.$$typeof){case ga:e:{for(M=C.key,I=x;I!==null;){if(I.key===M){switch(I.tag){case 7:if(C.type===Vr){n(v,I.sibling),x=r(I,C.props.children),x.return=v,v=x;break e}break;default:if(I.elementType===C.type){n(v,I.sibling),x=r(I,C.props),x.ref=za(v,I,C),x.return=v,v=x;break e}}n(v,I);break}else e(v,I);I=I.sibling}C.type===Vr?(x=ki(C.props.children,v.mode,k,C.key),x.return=v,v=x):(k=Su(C.type,C.key,C.props,null,v.mode,k),k.ref=za(v,x,C),k.return=v,v=k)}return s(v);case bn:e:{for(I=C.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){n(v,x.sibling),x=r(x,C.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=Xc(C,v.mode,k),x.return=v,v=x}return s(v)}if(typeof C=="string"||typeof C=="number")return C=""+C,x!==null&&x.tag===6?(n(v,x.sibling),x=r(x,C),x.return=v,v=x):(n(v,x),x=Kc(C,v.mode,k),x.return=v,v=x),s(v);if(ru(C))return b(v,x,C,k);if(_a(C))return S(v,x,C,k);if(M&&nu(v,C),typeof C=="undefined"&&!I)switch(v.tag){case 1:case 22:case 0:case 11:case 15:throw Error(G(152,ti(v.type)||"Component"))}return n(v,x)}}var iu=Xg(!0),Qg=Xg(!1),Ga={},ir=Qr(Ga),$a=Qr(Ga),qa=Qr(Ga);function An(t){if(t===Ga)throw Error(G(174));return t}function hc(t,e){switch(Ae(qa,e),Ae($a,t),Ae(ir,Ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}Ce(ir),Ae(ir,e)}function Ti(){Ce(ir),Ce($a),Ce(qa)}function Yg(t){An(qa.current);var e=An(ir.current),n=yd(e,t.type);e!==n&&(Ae($a,t),Ae(ir,n))}function pc(t){$a.current===t&&(Ce(ir),Ce($a))}var De=Qr(0);function au(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xr=null,tn=null,ar=!1;function Jg(t,e){var n=jt(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Zg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function mc(t){if(ar){var e=tn;if(e){var n=e;if(!Zg(t,e)){if(e=fi(n.nextSibling),!e||!Zg(t,e)){t.flags=t.flags&-1025|2,ar=!1,xr=t;return}Jg(xr,n)}xr=t,tn=fi(e.firstChild)}else t.flags=t.flags&-1025|2,ar=!1,xr=t}}function ev(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xr=t}function su(t){if(t!==xr)return!1;if(!ar)return ev(t),ar=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Zd(e,t.memoizedProps))for(e=tn;e;)Jg(t,e),e=fi(e.nextSibling);if(ev(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tn=fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=xr?fi(t.stateNode.nextSibling):null;return!0}function gc(){tn=xr=null,ar=!1}var Si=[];function vc(){for(var t=0;t<Si.length;t++)Si[t]._workInProgressVersionPrimary=null;Si.length=0}var Ka=xn.ReactCurrentDispatcher,Ut=xn.ReactCurrentBatchConfig,Xa=0,Re=null,nt=null,Qe=null,ou=!1,Qa=!1;function St(){throw Error(G(321))}function yc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nt(t[n],e[n]))return!1;return!0}function _c(t,e,n,i,r,a){if(Xa=a,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ka.current=t===null||t.memoizedState===null?pE:mE,t=n(i,r),Qa){a=0;do{if(Qa=!1,!(25>a))throw Error(G(301));a+=1,Qe=nt=null,e.updateQueue=null,Ka.current=gE,t=n(i,r)}while(Qa)}if(Ka.current=cu,e=nt!==null&&nt.next!==null,Xa=0,Qe=nt=Re=null,ou=!1,e)throw Error(G(300));return t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Re.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Ln(){if(nt===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=Qe===null?Re.memoizedState:Qe.next;if(e!==null)Qe=e,nt=t;else{if(t===null)throw Error(G(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Qe===null?Re.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function sr(t,e){return typeof e=="function"?e(t):e}function Ya(t){var e=Ln(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=nt,r=i.baseQueue,a=n.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(r!==null){r=r.next,i=i.baseState;var o=s=a=null,u=r;do{var l=u.lane;if((Xa&l)===l)o!==null&&(o=o.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),i=u.eagerReducer===t?u.eagerState:t(i,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};o===null?(s=o=c,a=i):o=o.next=c,Re.lanes|=l,ts|=l}u=u.next}while(u!==null&&u!==r);o===null?a=i:o.next=s,Nt(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=o,n.lastRenderedState=i}return[e.memoizedState,n.dispatch]}function Ja(t){var e=Ln(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do a=t(a,s.action),s=s.next;while(s!==r);Nt(a,e.memoizedState)||(Kt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function tv(t,e,n){var i=e._getVersion;i=i(e._source);var r=e._workInProgressVersionPrimary;if(r!==null?t=r===i:(t=t.mutableReadLanes,(t=(Xa&t)===t)&&(e._workInProgressVersionPrimary=i,Si.push(e))),t)return n(e._source);throw Si.push(e),Error(G(350))}function rv(t,e,n,i){var r=ft;if(r===null)throw Error(G(349));var a=e._getVersion,s=a(e._source),o=Ka.current,u=o.useState(function(){return tv(r,e,n)}),l=u[1],c=u[0];u=Qe;var m=t.memoizedState,f=m.refs,_=f.getSnapshot,b=m.source;m=m.subscribe;var S=Re;return t.memoizedState={refs:f,source:e,subscribe:i},o.useEffect(function(){f.getSnapshot=n,f.setSnapshot=l;var v=a(e._source);if(!Nt(s,v)){v=n(e._source),Nt(c,v)||(l(v),v=nn(S),r.mutableReadLanes|=v&r.pendingLanes),v=r.mutableReadLanes,r.entangledLanes|=v;for(var x=r.entanglements,C=v;0<C;){var k=31-qr(C),I=1<<k;x[k]|=v,C&=~I}}},[n,e,i]),o.useEffect(function(){return i(e._source,function(){var v=f.getSnapshot,x=f.setSnapshot;try{x(v(e._source));var C=nn(S);r.mutableReadLanes|=C&r.pendingLanes}catch(k){x(function(){throw k})}})},[e,i]),Nt(_,n)&&Nt(b,e)&&Nt(m,i)||(t={pending:null,dispatch:null,lastRenderedReducer:sr,lastRenderedState:c},t.dispatch=l=bc.bind(null,Re,t),u.queue=t,u.baseQueue=null,c=tv(r,e,n),u.memoizedState=u.baseState=c),c}function nv(t,e,n){var i=Ln();return rv(i,t,e,n)}function Za(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:sr,lastRenderedState:t},t=t.dispatch=bc.bind(null,Re,t),[e.memoizedState,t]}function uu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function iv(t){var e=Dn();return t={current:t},e.memoizedState=t}function lu(){return Ln().memoizedState}function Tc(t,e,n,i){var r=Dn();Re.flags|=t,r.memoizedState=uu(1|e,n,void 0,i===void 0?null:i)}function Sc(t,e,n,i){var r=Ln();i=i===void 0?null:i;var a=void 0;if(nt!==null){var s=nt.memoizedState;if(a=s.destroy,i!==null&&yc(i,s.deps)){uu(e,n,a,i);return}}Re.flags|=t,r.memoizedState=uu(1|e,n,a,i)}function av(t,e){return Tc(516,4,t,e)}function du(t,e){return Sc(516,4,t,e)}function sv(t,e){return Sc(4,2,t,e)}function ov(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uv(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4,2,ov.bind(null,e,t),n)}function xc(){}function lv(t,e){var n=Ln();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&yc(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function dv(t,e){var n=Ln();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&yc(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function hE(t,e){var n=vi();In(98>n?98:n,function(){t(!0)}),In(97<n?97:n,function(){var i=Ut.transition;Ut.transition=1;try{t(!1),e()}finally{Ut.transition=i}})}function bc(t,e,n){var i=At(),r=nn(t),a={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a,s=t.alternate,t===Re||s!==null&&s===Re)Qa=ou=!0;else{if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,u=s(o,n);if(a.eagerReducer=s,a.eagerState=u,Nt(u,o))return}catch{}finally{}an(t,r,i)}}var cu={readContext:Ft,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useOpaqueIdentifier:St,unstable_isNewReconciler:!1},pE={readContext:Ft,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:Ft,useEffect:av,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tc(4,2,ov.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tc(4,2,t,e)},useMemo:function(t,e){var n=Dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Dn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t=i.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=bc.bind(null,Re,t),[i.memoizedState,t]},useRef:iv,useState:Za,useDebugValue:xc,useDeferredValue:function(t){var e=Za(t),n=e[0],i=e[1];return av(function(){var r=Ut.transition;Ut.transition=1;try{i(t)}finally{Ut.transition=r}},[t]),n},useTransition:function(){var t=Za(!1),e=t[0];return t=hE.bind(null,t[1]),iv(t),[t,e]},useMutableSource:function(t,e,n){var i=Dn();return i.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},rv(i,t,e,n)},useOpaqueIdentifier:function(){if(ar){var t=!1,e=oE(function(){throw t||(t=!0,n("r:"+(tc++).toString(36))),Error(G(355))}),n=Za(e)[1];return(Re.mode&2)==0&&(Re.flags|=516,uu(5,function(){n("r:"+(tc++).toString(36))},void 0,null)),e}return e="r:"+(tc++).toString(36),Za(e),e},unstable_isNewReconciler:!1},mE={readContext:Ft,useCallback:lv,useContext:Ft,useEffect:du,useImperativeHandle:uv,useLayoutEffect:sv,useMemo:dv,useReducer:Ya,useRef:lu,useState:function(){return Ya(sr)},useDebugValue:xc,useDeferredValue:function(t){var e=Ya(sr),n=e[0],i=e[1];return du(function(){var r=Ut.transition;Ut.transition=1;try{i(t)}finally{Ut.transition=r}},[t]),n},useTransition:function(){var t=Ya(sr)[0];return[lu().current,t]},useMutableSource:nv,useOpaqueIdentifier:function(){return Ya(sr)[0]},unstable_isNewReconciler:!1},gE={readContext:Ft,useCallback:lv,useContext:Ft,useEffect:du,useImperativeHandle:uv,useLayoutEffect:sv,useMemo:dv,useReducer:Ja,useRef:lu,useState:function(){return Ja(sr)},useDebugValue:xc,useDeferredValue:function(t){var e=Ja(sr),n=e[0],i=e[1];return du(function(){var r=Ut.transition;Ut.transition=1;try{i(t)}finally{Ut.transition=r}},[t]),n},useTransition:function(){var t=Ja(sr)[0];return[lu().current,t]},useMutableSource:nv,useOpaqueIdentifier:function(){return Ja(sr)[0]},unstable_isNewReconciler:!1},vE=xn.ReactCurrentOwner,Kt=!1;function xt(t,e,n,i){e.child=t===null?Qg(e,null,n,i):iu(e,t.child,n,i)}function cv(t,e,n,i,r){n=n.render;var a=e.ref;return _i(e,r),i=_c(t,e,n,i,a,r),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,br(t,e,r)):(e.flags|=1,xt(t,e,i,r),e.child)}function fv(t,e,n,i,r,a){if(t===null){var s=n.type;return typeof s=="function"&&!$c(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,hv(t,e,s,i,r,a)):(t=Su(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}return s=t.child,(r&a)==0&&(r=s.memoizedProps,n=n.compare,n=n!==null?n:Fa,n(r,i)&&t.ref===e.ref)?br(t,e,a):(e.flags|=1,t=un(s,i),t.ref=e.ref,t.return=e,e.child=t)}function hv(t,e,n,i,r,a){if(t!==null&&Fa(t.memoizedProps,i)&&t.ref===e.ref)if(Kt=!1,(a&r)!=0)(t.flags&16384)!=0&&(Kt=!0);else return e.lanes=t.lanes,br(t,e,a);return Cc(t,e,n,i,a)}function Ec(t,e,n){var i=e.pendingProps,r=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden"||i.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},Tu(e,n);else if((n&1073741824)!=0)e.memoizedState={baseLanes:0},Tu(e,a!==null?a.baseLanes:n);else return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},Tu(e,t),null;else a!==null?(i=a.baseLanes|n,e.memoizedState=null):i=n,Tu(e,i);return xt(t,e,r,n),e.child}function pv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function Cc(t,e,n,i,r){var a=Tt(n)?kn:tt.current;return a=gi(e,a),_i(e,r),n=_c(t,e,n,i,a,r),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,br(t,e,r)):(e.flags|=1,xt(t,e,n,r),e.child)}function mv(t,e,n,i,r){if(Tt(n)){var a=!0;Ko(e)}else a=!1;if(_i(e,r),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),qg(e,n,i),fc(e,n,i,r),i=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ft(l):(l=Tt(n)?kn:tt.current,l=gi(e,l));var c=n.getDerivedStateFromProps,m=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";m||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==i||u!==l)&&Kg(e,s,i,l),Jr=!1;var f=e.memoizedState;s.state=f,Wa(e,i,s,r),u=e.memoizedState,o!==i||f!==u||_t.current||Jr?(typeof c=="function"&&(eu(e,n,c,i),u=e.memoizedState),(o=Jr||$g(e,n,o,i,f,u,l))?(m||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4)):(typeof s.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=i,e.memoizedState=u),s.props=i,s.state=u,s.context=l,i=o):(typeof s.componentDidMount=="function"&&(e.flags|=4),i=!1)}else{s=e.stateNode,Vg(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:qt(e.type,o),s.props=l,m=e.pendingProps,f=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=Tt(n)?kn:tt.current,u=gi(e,u));var _=n.getDerivedStateFromProps;(c=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==m||f!==u)&&Kg(e,s,i,u),Jr=!1,f=e.memoizedState,s.state=f,Wa(e,i,s,r);var b=e.memoizedState;o!==m||f!==b||_t.current||Jr?(typeof _=="function"&&(eu(e,n,_,i),b=e.memoizedState),(l=Jr||$g(e,n,l,i,f,b,u))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,b,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,b,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=i,e.memoizedState=b),s.props=i,s.state=b,s.context=u,i=l):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),i=!1)}return wc(t,e,n,i,a,r)}function wc(t,e,n,i,r,a){pv(t,e);var s=(e.flags&64)!=0;if(!i&&!s)return r&&Lg(e,n,!1),br(t,e,a);i=e.stateNode,vE.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&s?(e.child=iu(e,t.child,null,a),e.child=iu(e,null,o,a)):xt(t,e,o,a),e.memoizedState=i.state,r&&Lg(e,n,!0),e.child}function gv(t){var e=t.stateNode;e.pendingContext?Ag(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ag(t,e.context,!1),hc(t,e.containerInfo)}var fu={dehydrated:null,retryLane:0};function vv(t,e,n){var i=e.pendingProps,r=De.current,a=!1,s;return(s=(e.flags&64)!=0)||(s=t!==null&&t.memoizedState===null?!1:(r&2)!=0),s?(a=!0,e.flags&=-65):t!==null&&t.memoizedState===null||i.fallback===void 0||i.unstable_avoidThisFallback===!0||(r|=1),Ae(De,r&1),t===null?(i.fallback!==void 0&&mc(e),t=i.children,r=i.fallback,a?(t=yv(e,t,r,n),e.child.memoizedState={baseLanes:n},e.memoizedState=fu,t):typeof i.unstable_expectedLoadTime=="number"?(t=yv(e,t,r,n),e.child.memoizedState={baseLanes:n},e.memoizedState=fu,e.lanes=33554432,t):(n=qc({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?a?(i=Tv(t,e,i.children,i.fallback,n),a=e.child,r=t.child.memoizedState,a.memoizedState=r===null?{baseLanes:n}:{baseLanes:r.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=fu,i):(n=_v(t,e,i.children,n),e.memoizedState=null,n):a?(i=Tv(t,e,i.children,i.fallback,n),a=e.child,r=t.child.memoizedState,a.memoizedState=r===null?{baseLanes:n}:{baseLanes:r.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=fu,i):(n=_v(t,e,i.children,n),e.memoizedState=null,n)}function yv(t,e,n,i){var r=t.mode,a=t.child;return e={mode:"hidden",children:e},(r&2)==0&&a!==null?(a.childLanes=0,a.pendingProps=e):a=qc(e,r,0,null),n=ki(n,r,i,null),a.return=t,n.return=t,a.sibling=n,t.child=a,n}function _v(t,e,n,i){var r=t.child;return t=r.sibling,n=un(r,{mode:"visible",children:n}),(e.mode&2)==0&&(n.lanes=i),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Tv(t,e,n,i,r){var a=e.mode,s=t.child;t=s.sibling;var o={mode:"hidden",children:n};return(a&2)==0&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=o,s=n.lastEffect,s!==null?(e.firstEffect=n.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):n=un(s,o),t!==null?i=un(t,i):(i=ki(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,i}function Sv(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Hg(t.return,e)}function kc(t,e,n,i,r,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.lastEffect=a)}function xv(t,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(xt(t,e,i.children,n),i=De.current,(i&2)!=0)i=i&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!=0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sv(t,n);else if(t.tag===19)Sv(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ae(De,i),(e.mode&2)==0)e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&au(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),kc(e,!1,r,n,a,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&au(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}kc(e,!0,n,null,a,e.lastEffect);break;case"together":kc(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ts|=e.lanes,(n&e.childLanes)!=0){if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=un(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=un(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var bv,Pc,Ev,Cv;bv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pc=function(){};Ev=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,An(ir.current);var a=null;switch(n){case"input":r=fd(t,r),i=fd(t,i),a=[];break;case"option":r=md(t,r),i=md(t,i),a=[];break;case"select":r=ke({},r,{value:void 0}),i=ke({},i,{value:void 0}),a=[];break;case"textarea":r=gd(t,r),i=gd(t,i),a=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Wo)}_d(n,i);var s;n=null;for(l in r)if(!i.hasOwnProperty(l)&&r.hasOwnProperty(l)&&r[l]!=null)if(l==="style"){var o=r[l];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ma.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in i){var u=i[l];if(o=r!=null?r[l]:void 0,i.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(s in o)!o.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&o[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ma.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ee("scroll",t),a||o===u||(a=[])):typeof u=="object"&&u!==null&&u.$$typeof===od?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};Cv=function(t,e,n,i){n!==i&&(e.flags|=4)};function es(t,e){if(!ar)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function yE(t,e,n){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Tt(e.type)&&qo(),null;case 3:return Ti(),Ce(_t),Ce(tt),vc(),i=e.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(su(e)?e.flags|=4:i.hydrate||(e.flags|=256)),Pc(e),null;case 5:pc(e);var r=An(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)Ev(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=128);else{if(!i){if(e.stateNode===null)throw Error(G(166));return null}if(t=An(ir.current),su(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[Xr]=e,i[Go]=a,n){case"dialog":Ee("cancel",i),Ee("close",i);break;case"iframe":case"object":case"embed":Ee("load",i);break;case"video":case"audio":for(t=0;t<Ba.length;t++)Ee(Ba[t],i);break;case"source":Ee("error",i);break;case"img":case"image":case"link":Ee("error",i),Ee("load",i);break;case"details":Ee("toggle",i);break;case"input":mm(i,a),Ee("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Ee("invalid",i);break;case"textarea":ym(i,a),Ee("invalid",i)}_d(n,a),t=null;for(var s in a)a.hasOwnProperty(s)&&(r=a[s],s==="children"?typeof r=="string"?i.textContent!==r&&(t=["children",r]):typeof r=="number"&&i.textContent!==""+r&&(t=["children",""+r]):ma.hasOwnProperty(s)&&r!=null&&s==="onScroll"&&Ee("scroll",i));switch(n){case"input":wo(i),vm(i,a,!0);break;case"textarea":wo(i),Tm(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Wo)}i=t,e.updateQueue=i,i!==null&&(e.flags|=4)}else{switch(s=r.nodeType===9?r:r.ownerDocument,t===vd.html&&(t=Sm(n)),t===vd.html?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=s.createElement(n,{is:i.is}):(t=s.createElement(n),n==="select"&&(s=t,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):t=s.createElementNS(t,n),t[Xr]=e,t[Go]=i,bv(t,e,!1,!1),e.stateNode=t,s=Td(n,i),n){case"dialog":Ee("cancel",t),Ee("close",t),r=i;break;case"iframe":case"object":case"embed":Ee("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ba.length;r++)Ee(Ba[r],t);r=i;break;case"source":Ee("error",t),r=i;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),r=i;break;case"details":Ee("toggle",t),r=i;break;case"input":mm(t,i),r=fd(t,i),Ee("invalid",t);break;case"option":r=md(t,i);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ke({},i,{value:void 0}),Ee("invalid",t);break;case"textarea":ym(t,i),r=gd(t,i),Ee("invalid",t);break;default:r=i}_d(n,r);var o=r;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="style"?Em(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&xm(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Sa(t,u):typeof u=="number"&&Sa(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ma.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Ee("scroll",t):u!=null&&td(t,a,u,s))}switch(n){case"input":wo(t),vm(t,i,!1);break;case"textarea":wo(t),Tm(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Wr(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?ri(t,!!i.multiple,a,!1):i.defaultValue!=null&&ri(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Wo)}Cg(n,i)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)Cv(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(G(166));n=An(qa.current),An(ir.current),su(e)?(i=e.stateNode,n=e.memoizedProps,i[Xr]=e,i.nodeValue!==n&&(e.flags|=4)):(i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Xr]=e,e.stateNode=i)}return null;case 13:return Ce(De),i=e.memoizedState,(e.flags&64)!=0?(e.lanes=n,e):(i=i!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&su(e):n=t.memoizedState!==null,i&&!n&&(e.mode&2)!=0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(De.current&1)!=0?Ye===0&&(Ye=3):((Ye===0||Ye===3)&&(Ye=4),ft===null||(ts&134217727)==0&&(bi&134217727)==0||Ci(ft,it))),(i||n)&&(e.flags|=4),null);case 4:return Ti(),Pc(e),t===null&&Tg(e.stateNode.containerInfo),null;case 10:return dc(e),null;case 17:return Tt(e.type)&&qo(),null;case 19:if(Ce(De),i=e.memoizedState,i===null)return null;if(a=(e.flags&64)!=0,s=i.rendering,s===null)if(a)es(i,!1);else{if(Ye!==0||t!==null&&(t.flags&64)!=0)for(t=e.child;t!==null;){if(s=au(t),s!==null){for(e.flags|=64,es(i,!1),a=s.updateQueue,a!==null&&(e.updateQueue=a,e.flags|=4),i.lastEffect===null&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=n,n=e.child;n!==null;)a=n,t=i,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&rt()>Bc&&(e.flags|=64,a=!0,es(i,!1),e.lanes=33554432)}else{if(!a)if(t=au(s),t!==null){if(e.flags|=64,a=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),es(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ar)return e=e.lastEffect=i.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*rt()-i.renderingStartTime>Bc&&n!==1073741824&&(e.flags|=64,a=!0,es(i,!1),e.lanes=33554432);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=rt(),n.sibling=null,e=De.current,Ae(De,a?e&1|2:e&1),n):null;case 23:case 24:return Gc(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&i.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(G(156,e.tag))}function _E(t){switch(t.tag){case 1:Tt(t.type)&&qo();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(Ti(),Ce(_t),Ce(tt),vc(),e=t.flags,(e&64)!=0)throw Error(G(285));return t.flags=e&-4097|64,t;case 5:return pc(t),null;case 13:return Ce(De),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Ce(De),null;case 4:return Ti(),null;case 10:return dc(t),null;case 23:case 24:return Gc(),null;default:return null}}function Ic(t,e){try{var n="",i=e;do n+=Zx(i),i=i.return;while(i);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:r}}function Ac(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TE=typeof WeakMap=="function"?WeakMap:Map;function wv(t,e,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){mu||(mu=!0,jc=i),Ac(t,e)},n}function kv(t,e,n){n=Zr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return Ac(t,e),i(r)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){typeof i!="function"&&(or===null?or=new Set([this]):or.add(this),Ac(t,e));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}var SE=typeof WeakSet=="function"?WeakSet:Set;function Pv(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){on(t,n)}else e.current=null}function xE(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,i=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:qt(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&ec(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(G(163))}function bE(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)==3){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var r=t;i=r.next,r=r.tag,(r&4)!=0&&(r&1)!=0&&(Wv(n,t),DE(n,t)),t=i}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(i=n.elementType===n.type?e.memoizedProps:qt(n.type,e.memoizedProps),t.componentDidUpdate(i,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&zg(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}zg(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&Cg(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&jm(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(G(163))}function Iv(t,e){for(var n=t;;){if(n.tag===5){var i=n.stateNode;if(e)i=i.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=r!=null&&r.hasOwnProperty("display")?r.display:null,i.style.display=bm("display",r)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Av(t,e){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(nc,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var i=n,r=i.destroy;if(i=i.tag,r!==void 0)if((i&4)!=0)Wv(e,n);else{i=e;try{r()}catch(a){on(i,a)}}n=n.next}while(n!==t)}break;case 1:if(Pv(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){on(e,a)}break;case 5:Pv(e);break;case 4:Rv(t,e)}}function Dv(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Lv(t){return t.tag===5||t.tag===3||t.tag===4}function Ov(t){e:{for(var e=t.return;e!==null;){if(Lv(e))break e;e=e.return}throw Error(G(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:e=e.containerInfo,i=!0;break;case 4:e=e.containerInfo,i=!0;break;default:throw Error(G(161))}n.flags&16&&(Sa(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||Lv(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}i?Dc(t,n,e):Lc(t,n,e)}function Dc(t,e,n){var i=t.tag,r=i===5||i===6;if(r)t=r?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wo));else if(i!==4&&(t=t.child,t!==null))for(Dc(t,e,n),t=t.sibling;t!==null;)Dc(t,e,n),t=t.sibling}function Lc(t,e,n){var i=t.tag,r=i===5||i===6;if(r)t=r?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Lc(t,e,n),t=t.sibling;t!==null;)Lc(t,e,n),t=t.sibling}function Rv(t,e){for(var n=e,i=!1,r,a;;){if(!i){i=n.return;e:for(;;){if(i===null)throw Error(G(160));switch(r=i.stateNode,i.tag){case 5:a=!1;break e;case 3:r=r.containerInfo,a=!0;break e;case 4:r=r.containerInfo,a=!0;break e}i=i.return}i=!0}if(n.tag===5||n.tag===6){e:for(var s=t,o=n,u=o;;)if(Av(s,u),u.child!==null&&u.tag!==4)u.child.return=u,u=u.child;else{if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}a?(s=r,o=n.stateNode,s.nodeType===8?s.parentNode.removeChild(o):s.removeChild(o)):r.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){r=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(Av(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(i=!1)}n.sibling.return=n.return,n=n.sibling}}function Oc(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do(i.tag&3)==3&&(t=i.destroy,i.destroy=void 0,t!==void 0&&t()),i=i.next;while(i!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){i=e.memoizedProps;var r=t!==null?t.memoizedProps:i;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,a!==null){for(n[Go]=i,t==="input"&&i.type==="radio"&&i.name!=null&&gm(n,i),Td(t,r),e=Td(t,i),r=0;r<a.length;r+=2){var s=a[r],o=a[r+1];s==="style"?Em(n,o):s==="dangerouslySetInnerHTML"?xm(n,o):s==="children"?Sa(n,o):td(n,s,o,e)}switch(t){case"input":hd(n,i);break;case"textarea":_m(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,a=i.value,a!=null?ri(n,!!i.multiple,a,!1):t!==!!i.multiple&&(i.defaultValue!=null?ri(n,!!i.multiple,i.defaultValue,!0):ri(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(G(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,jm(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Uc=rt(),Iv(e.child,!0)),Mv(e);return;case 19:Mv(e);return;case 17:return;case 23:case 24:Iv(e,e.memoizedState!==null);return}throw Error(G(163))}function Mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SE),e.forEach(function(i){var r=RE.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function EE(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var CE=Math.ceil,hu=xn.ReactCurrentDispatcher,Rc=xn.ReactCurrentOwner,ne=0,ft=null,je=null,it=0,On=0,Mc=Qr(0),Ye=0,pu=null,xi=0,ts=0,bi=0,Nc=0,Fc=null,Uc=0,Bc=1/0;function Ei(){Bc=rt()+500}var Q=null,mu=!1,jc=null,or=null,rn=!1,rs=null,ns=90,Hc=[],Vc=[],Er=null,is=0,Wc=null,gu=-1,Cr=0,vu=0,as=null,yu=!1;function At(){return(ne&48)!=0?rt():gu!==-1?gu:gu=rt()}function nn(t){if(t=t.mode,(t&2)==0)return 1;if((t&4)==0)return vi()===99?1:2;if(Cr===0&&(Cr=xi),fE.transition!==0){vu!==0&&(vu=Fc!==null?Fc.pendingLanes:0),t=Cr;var e=4186112&~vu;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=vi(),(ne&4)!=0&&t===98?t=Ro(12,Cr):(t=mb(t),t=Ro(t,Cr)),t}function an(t,e,n){if(50<is)throw is=0,Wc=null,Error(G(185));if(t=_u(t,e),t===null)return null;Mo(t,e,n),t===ft&&(bi|=e,Ye===4&&Ci(t,it));var i=vi();e===1?(ne&8)!=0&&(ne&48)==0?zc(t):(Bt(t,n),ne===0&&(Ei(),nr())):((ne&4)==0||i!==98&&i!==99||(Er===null?Er=new Set([t]):Er.add(t)),Bt(t,n)),Fc=t}function _u(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function Bt(t,e){for(var n=t.callbackNode,i=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qr(s),u=1<<o,l=a[o];if(l===-1){if((u&i)==0||(u&r)!=0){l=e,si(u);var c=_e;a[o]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=e&&(t.expiredLanes|=u);s&=~u}if(i=Da(t,t===ft?it:0),e=_e,i===0)n!==null&&(n!==oc&&ac(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==oc&&ac(n)}e===15?(n=zc.bind(null,t),Sr===null?(Sr=[n],Qo=ic(Xo,jg)):Sr.push(n),n=oc):e===14?n=Va(99,zc.bind(null,t)):(n=gb(e),n=Va(n,Nv.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function Nv(t){if(gu=-1,vu=Cr=0,(ne&48)!=0)throw Error(G(327));var e=t.callbackNode;if(sn()&&t.callbackNode!==e)return null;var n=Da(t,t===ft?it:0);if(n===0)return null;var i=n,r=ne;ne|=16;var a=jv();(ft!==t||it!==i)&&(Ei(),wi(t,i));do try{PE();break}catch(o){Bv(t,o)}while(1);if(lc(),hu.current=a,ne=r,je!==null?i=0:(ft=null,it=0,i=Ye),(xi&bi)!=0)wi(t,0);else if(i!==0){if(i===2&&(ne|=64,t.hydrate&&(t.hydrate=!1,ec(t.containerInfo)),n=qm(t),n!==0&&(i=ss(t,n))),i===1)throw e=pu,wi(t,0),Ci(t,n),Bt(t,rt()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,i){case 0:case 1:throw Error(G(345));case 2:Rn(t);break;case 3:if(Ci(t,n),(n&62914560)===n&&(i=Uc+500-rt(),10<i)){if(Da(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){At(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=wg(Rn.bind(null,t),i);break}Rn(t);break;case 4:if(Ci(t,n),(n&4186112)===n)break;for(i=t.eventTimes,r=-1;0<n;){var s=31-qr(n);a=1<<s,s=i[s],s>r&&(r=s),n&=~a}if(n=r,n=rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*CE(n/1960))-n,10<n){t.timeoutHandle=wg(Rn.bind(null,t),n);break}Rn(t);break;case 5:Rn(t);break;default:throw Error(G(329))}}return Bt(t,rt()),t.callbackNode===e?Nv.bind(null,t):null}function Ci(t,e){for(e&=~Nc,e&=~bi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qr(e),i=1<<n;t[n]=-1,e&=~i}}function zc(t){if((ne&48)!=0)throw Error(G(327));if(sn(),t===ft&&(t.expiredLanes&it)!=0){var e=it,n=ss(t,e);(xi&bi)!=0&&(e=Da(t,e),n=ss(t,e))}else e=Da(t,0),n=ss(t,e);if(t.tag!==0&&n===2&&(ne|=64,t.hydrate&&(t.hydrate=!1,ec(t.containerInfo)),e=qm(t),e!==0&&(n=ss(t,e))),n===1)throw n=pu,wi(t,0),Ci(t,e),Bt(t,rt()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rn(t),Bt(t,rt()),null}function wE(){if(Er!==null){var t=Er;Er=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Bt(e,rt())})}nr()}function Fv(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(Ei(),nr())}}function Uv(t,e){var n=ne;ne&=-2,ne|=8;try{return t(e)}finally{ne=n,ne===0&&(Ei(),nr())}}function Tu(t,e){Ae(Mc,On),On|=e,xi|=e}function Gc(){On=Mc.current,Ce(Mc)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sE(n)),je!==null)for(n=je.return;n!==null;){var i=n;switch(i.tag){case 1:i=i.type.childContextTypes,i!=null&&qo();break;case 3:Ti(),Ce(_t),Ce(tt),vc();break;case 5:pc(i);break;case 4:Ti();break;case 13:Ce(De);break;case 19:Ce(De);break;case 10:dc(i);break;case 23:case 24:Gc()}n=n.return}ft=t,je=un(t.current,null),it=On=xi=e,Ye=0,pu=null,Nc=bi=ts=0}function Bv(t,e){do{var n=je;try{if(lc(),Ka.current=cu,ou){for(var i=Re.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ou=!1}if(Xa=0,Qe=nt=Re=null,Qa=!1,Rc.current=null,n===null||n.return===null){Ye=1,pu=e,je=null;break}e:{var a=t,s=n.return,o=n,u=e;if(e=it,o.flags|=2048,o.firstEffect=o.lastEffect=null,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u;if((o.mode&2)==0){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.lanes=c.lanes):(o.updateQueue=null,o.memoizedState=null)}var m=(De.current&1)!=0,f=s;do{var _;if(_=f.tag===13){var b=f.memoizedState;if(b!==null)_=b.dehydrated!==null;else{var S=f.memoizedProps;_=S.fallback===void 0?!1:S.unstable_avoidThisFallback!==!0?!0:!m}}if(_){var v=f.updateQueue;if(v===null){var x=new Set;x.add(l),f.updateQueue=x}else v.add(l);if((f.mode&2)==0){if(f.flags|=64,o.flags|=16384,o.flags&=-2981,o.tag===1)if(o.alternate===null)o.tag=17;else{var C=Zr(-1,1);C.tag=2,en(o,C)}o.lanes|=1;break e}u=void 0,o=e;var k=a.pingCache;if(k===null?(k=a.pingCache=new TE,u=new Set,k.set(l,u)):(u=k.get(l),u===void 0&&(u=new Set,k.set(l,u))),!u.has(o)){u.add(o);var I=OE.bind(null,a,l,o);l.then(I,I)}f.flags|=4096,f.lanes=e;break e}f=f.return}while(f!==null);u=Error((ti(o.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ye!==5&&(Ye=2),u=Ic(u,o),f=s;do{switch(f.tag){case 3:a=u,f.flags|=4096,e&=-e,f.lanes|=e;var M=wv(f,a,e);Wg(f,M);break e;case 1:a=u;var N=f.type,B=f.stateNode;if((f.flags&64)==0&&(typeof N.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(or===null||!or.has(B)))){f.flags|=4096,e&=-e,f.lanes|=e;var U=kv(f,a,e);Wg(f,U);break e}}f=f.return}while(f!==null)}Vv(n)}catch(F){e=F,je===n&&n!==null&&(je=n=n.return);continue}break}while(1)}function jv(){var t=hu.current;return hu.current=cu,t===null?cu:t}function ss(t,e){var n=ne;ne|=16;var i=jv();ft===t&&it===e||wi(t,e);do try{kE();break}catch(r){Bv(t,r)}while(1);if(lc(),ne=n,hu.current=i,je!==null)throw Error(G(261));return ft=null,it=0,Ye}function kE(){for(;je!==null;)Hv(je)}function PE(){for(;je!==null&&!lE();)Hv(je)}function Hv(t){var e=Gv(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?Vv(t):je=e,Rc.current=null}function Vv(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&2048)==0){if(n=yE(n,e,On),n!==null){je=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||(On&1073741824)!=0||(n.mode&4)==0){for(var i=0,r=n.child;r!==null;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}t!==null&&(t.flags&2048)==0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(n=_E(e),n!==null){n.flags&=2047,je=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ye===0&&(Ye=5)}function Rn(t){var e=vi();return In(99,IE.bind(null,t,e)),null}function IE(t,e){do sn();while(rs!==null);if((ne&48)!=0)throw Error(G(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null;var i=n.lanes|n.childLanes,r=i,a=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;for(var s=t.eventTimes,o=t.expirationTimes;0<a;){var u=31-qr(a),l=1<<u;r[u]=0,s[u]=-1,o[u]=-1,a&=~l}if(Er!==null&&(i&24)==0&&Er.has(t)&&Er.delete(t),t===ft&&(je=ft=null,it=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,i!==null){if(r=ne,ne|=32,Rc.current=null,Yd=No,s=hg(),qd(s)){if("selectionStart"in s)o={start:s.selectionStart,end:s.selectionEnd};else e:if(o=(o=s.ownerDocument)&&o.defaultView||window,(l=o.getSelection&&o.getSelection())&&l.rangeCount!==0){o=l.anchorNode,a=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{o.nodeType,u.nodeType}catch{o=null;break e}var c=0,m=-1,f=-1,_=0,b=0,S=s,v=null;t:for(;;){for(var x;S!==o||a!==0&&S.nodeType!==3||(m=c+a),S!==u||l!==0&&S.nodeType!==3||(f=c+l),S.nodeType===3&&(c+=S.nodeValue.length),(x=S.firstChild)!==null;)v=S,S=x;for(;;){if(S===s)break t;if(v===o&&++_===a&&(m=c),v===u&&++b===l&&(f=c),(x=S.nextSibling)!==null)break;S=v,v=S.parentNode}S=x}o=m===-1||f===-1?null:{start:m,end:f}}else o=null;o=o||{start:0,end:0}}else o=null;Jd={focusedElem:s,selectionRange:o},No=!1,as=null,yu=!1,Q=i;do try{AE()}catch(F){if(Q===null)throw Error(G(330));on(Q,F),Q=Q.nextEffect}while(Q!==null);as=null,Q=i;do try{for(s=t;Q!==null;){var C=Q.flags;if(C&16&&Sa(Q.stateNode,""),C&128){var k=Q.alternate;if(k!==null){var I=k.ref;I!==null&&(typeof I=="function"?I(null):I.current=null)}}switch(C&1038){case 2:Ov(Q),Q.flags&=-3;break;case 6:Ov(Q),Q.flags&=-3,Oc(Q.alternate,Q);break;case 1024:Q.flags&=-1025;break;case 1028:Q.flags&=-1025,Oc(Q.alternate,Q);break;case 4:Oc(Q.alternate,Q);break;case 8:o=Q,Rv(s,o);var M=o.alternate;Dv(o),M!==null&&Dv(M)}Q=Q.nextEffect}}catch(F){if(Q===null)throw Error(G(330));on(Q,F),Q=Q.nextEffect}while(Q!==null);if(I=Jd,k=hg(),C=I.focusedElem,s=I.selectionRange,k!==C&&C&&C.ownerDocument&&fg(C.ownerDocument.documentElement,C)){for(s!==null&&qd(C)&&(k=s.start,I=s.end,I===void 0&&(I=k),"selectionStart"in C?(C.selectionStart=k,C.selectionEnd=Math.min(I,C.value.length)):(I=(k=C.ownerDocument||document)&&k.defaultView||window,I.getSelection&&(I=I.getSelection(),o=C.textContent.length,M=Math.min(s.start,o),s=s.end===void 0?M:Math.min(s.end,o),!I.extend&&M>s&&(o=s,s=M,M=o),o=cg(C,M),a=cg(C,s),o&&a&&(I.rangeCount!==1||I.anchorNode!==o.node||I.anchorOffset!==o.offset||I.focusNode!==a.node||I.focusOffset!==a.offset)&&(k=k.createRange(),k.setStart(o.node,o.offset),I.removeAllRanges(),M>s?(I.addRange(k),I.extend(a.node,a.offset)):(k.setEnd(a.node,a.offset),I.addRange(k)))))),k=[],I=C;I=I.parentNode;)I.nodeType===1&&k.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<k.length;C++)I=k[C],I.element.scrollLeft=I.left,I.element.scrollTop=I.top}No=!!Yd,Jd=Yd=null,t.current=n,Q=i;do try{for(C=t;Q!==null;){var N=Q.flags;if(N&36&&bE(C,Q.alternate,Q),N&128){k=void 0;var B=Q.ref;if(B!==null){var U=Q.stateNode;switch(Q.tag){case 5:k=U;break;default:k=U}typeof B=="function"?B(k):B.current=k}}Q=Q.nextEffect}}catch(F){if(Q===null)throw Error(G(330));on(Q,F),Q=Q.nextEffect}while(Q!==null);Q=null,cE(),ne=r}else t.current=n;if(rn)rn=!1,rs=t,ns=e;else for(Q=i;Q!==null;)e=Q.nextEffect,Q.nextEffect=null,Q.flags&8&&(N=Q,N.sibling=null,N.stateNode=null),Q=e;if(i=t.pendingLanes,i===0&&(or=null),i===1?t===Wc?is++:(is=0,Wc=t):is=0,n=n.stateNode,Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(nc,n,void 0,(n.current.flags&64)==64)}catch{}if(Bt(t,rt()),mu)throw mu=!1,t=jc,jc=null,t;return(ne&8)!=0||nr(),null}function AE(){for(;Q!==null;){var t=Q.alternate;yu||as===null||((Q.flags&8)!=0?Om(Q,as)&&(yu=!0):Q.tag===13&&EE(t,Q)&&Om(Q,as)&&(yu=!0));var e=Q.flags;(e&256)!=0&&xE(t,Q),(e&512)==0||rn||(rn=!0,Va(97,function(){return sn(),null})),Q=Q.nextEffect}}function sn(){if(ns!==90){var t=97<ns?97:ns;return ns=90,In(t,LE)}return!1}function DE(t,e){Hc.push(e,t),rn||(rn=!0,Va(97,function(){return sn(),null}))}function Wv(t,e){Vc.push(e,t),rn||(rn=!0,Va(97,function(){return sn(),null}))}function LE(){if(rs===null)return!1;var t=rs;if(rs=null,(ne&48)!=0)throw Error(G(331));var e=ne;ne|=32;var n=Vc;Vc=[];for(var i=0;i<n.length;i+=2){var r=n[i],a=n[i+1],s=r.destroy;if(r.destroy=void 0,typeof s=="function")try{s()}catch(u){if(a===null)throw Error(G(330));on(a,u)}}for(n=Hc,Hc=[],i=0;i<n.length;i+=2){r=n[i],a=n[i+1];try{var o=r.create;r.destroy=o()}catch(u){if(a===null)throw Error(G(330));on(a,u)}}for(o=t.current.firstEffect;o!==null;)t=o.nextEffect,o.nextEffect=null,o.flags&8&&(o.sibling=null,o.stateNode=null),o=t;return ne=e,nr(),!0}function zv(t,e,n){e=Ic(n,e),e=wv(t,e,1),en(t,e),e=At(),t=_u(t,1),t!==null&&(Mo(t,1,e),Bt(t,e))}function on(t,e){if(t.tag===3)zv(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){zv(n,t,e);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(or===null||!or.has(i))){t=Ic(e,t);var r=kv(n,t,1);if(en(n,r),r=At(),n=_u(n,1),n!==null)Mo(n,1,r),Bt(n,r);else if(typeof i.componentDidCatch=="function"&&(or===null||!or.has(i)))try{i.componentDidCatch(e,t)}catch{}break}}n=n.return}}function OE(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(it&n)===n&&(Ye===4||Ye===3&&(it&62914560)===it&&500>rt()-Uc?wi(t,0):Nc|=n),Bt(t,e)}function RE(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,(e&2)==0?e=1:(e&4)==0?e=vi()===99?1:2:(Cr===0&&(Cr=xi),e=oi(62914560&~Cr),e===0&&(e=4194304))),n=At(),t=_u(t,e),t!==null&&(Mo(t,e,n),Bt(t,n))}var Gv;Gv=function(t,e,n){var i=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||_t.current)Kt=!0;else if((n&i)!=0)Kt=(t.flags&16384)!=0;else{switch(Kt=!1,e.tag){case 3:gv(e),gc();break;case 5:Yg(e);break;case 1:Tt(e.type)&&Ko(e);break;case 4:hc(e,e.stateNode.containerInfo);break;case 10:i=e.memoizedProps.value;var r=e.type._context;Ae(Yo,r._currentValue),r._currentValue=i;break;case 13:if(e.memoizedState!==null)return(n&e.child.childLanes)!=0?vv(t,e,n):(Ae(De,De.current&1),e=br(t,e,n),e!==null?e.sibling:null);Ae(De,De.current&1);break;case 19:if(i=(n&e.childLanes)!=0,(t.flags&64)!=0){if(i)return xv(t,e,n);e.flags|=64}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ae(De,De.current),i)break;return null;case 23:case 24:return e.lanes=0,Ec(t,e,n)}return br(t,e,n)}else Kt=!1;switch(e.lanes=0,e.tag){case 2:if(i=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=gi(e,tt.current),_i(e,n),r=_c(null,e,i,t,r,n),e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(i)){var a=!0;Ko(e)}else a=!1;e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,cc(e);var s=i.getDerivedStateFromProps;typeof s=="function"&&eu(e,i,s,t),r.updater=tu,e.stateNode=r,r._reactInternals=e,fc(e,i,t,n),e=wc(null,e,i,!0,a,n)}else e.tag=0,xt(null,e,r,n),e=e.child;return e;case 16:r=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=NE(r),t=qt(r,t),a){case 0:e=Cc(null,e,r,t,n);break e;case 1:e=mv(null,e,r,t,n);break e;case 11:e=cv(null,e,r,t,n);break e;case 14:e=fv(null,e,r,qt(r.type,t),i,n);break e}throw Error(G(306,r,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qt(i,r),Cc(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qt(i,r),mv(t,e,i,r,n);case 3:if(gv(e),i=e.updateQueue,t===null||i===null)throw Error(G(282));if(i=e.pendingProps,r=e.memoizedState,r=r!==null?r.element:null,Vg(t,e),Wa(e,i,null,n),i=e.memoizedState.element,i===r)gc(),e=br(t,e,n);else{if(r=e.stateNode,(a=r.hydrate)&&(tn=fi(e.stateNode.containerInfo.firstChild),xr=e,a=ar=!0),a){if(t=r.mutableSourceEagerHydrationData,t!=null)for(r=0;r<t.length;r+=2)a=t[r],a._workInProgressVersionPrimary=t[r+1],Si.push(a);for(n=Qg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else xt(t,e,i,n),gc();e=e.child}return e;case 5:return Yg(e),t===null&&mc(e),i=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,s=r.children,Zd(i,r)?s=null:a!==null&&Zd(i,a)&&(e.flags|=16),pv(t,e),xt(t,e,s,n),e.child;case 6:return t===null&&mc(e),null;case 13:return vv(t,e,n);case 4:return hc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=iu(e,null,i,n):xt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qt(i,r),cv(t,e,i,r,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value;var o=e.type._context;if(Ae(Yo,o._currentValue),o._currentValue=a,s!==null)if(o=s.value,a=Nt(o,a)?0:(typeof i._calculateChangedBits=="function"?i._calculateChangedBits(o,a):1073741823)|0,a===0){if(s.children===r.children&&!_t.current){e=br(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var l=u.firstContext;l!==null;){if(l.context===i&&(l.observedBits&a)!=0){o.tag===1&&(l=Zr(-1,n&-n),l.tag=2,en(o,l)),o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Hg(o.return,n),u.lanes|=n;break}l=l.next}}else s=o.tag===10&&o.type===e.type?null:o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}xt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,a=e.pendingProps,i=a.children,_i(e,n),r=Ft(r,a.unstable_observedBits),i=i(r),e.flags|=1,xt(t,e,i,n),e.child;case 14:return r=e.type,a=qt(r,e.pendingProps),a=qt(r.type,a),fv(t,e,r,a,i,n);case 15:return hv(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qt(i,r),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Tt(i)?(t=!0,Ko(e)):t=!1,_i(e,n),qg(e,i,r),fc(e,i,r,n),wc(null,e,i,!0,t,n);case 19:return xv(t,e,n);case 23:return Ec(t,e,n);case 24:return Ec(t,e,n)}throw Error(G(156,e.tag))};function ME(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(t,e,n,i){return new ME(t,e,n,i)}function $c(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NE(t){if(typeof t=="function")return $c(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xo)return 11;if(t===Eo)return 14}return 2}function un(t,e){var n=t.alternate;return n===null?(n=jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Su(t,e,n,i,r,a){var s=2;if(i=t,typeof t=="function")$c(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Vr:return ki(n.children,r,a,e);case cm:s=8,r|=16;break;case rd:s=8,r|=1;break;case va:return t=jt(12,n,e,r|8),t.elementType=va,t.type=va,t.lanes=a,t;case ya:return t=jt(13,n,e,r),t.type=ya,t.elementType=ya,t.lanes=a,t;case bo:return t=jt(19,n,e,r),t.elementType=bo,t.lanes=a,t;case ud:return qc(n,r,a,e);case ld:return t=jt(24,n,e,r),t.elementType=ld,t.lanes=a,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nd:s=10;break e;case id:s=9;break e;case xo:s=11;break e;case Eo:s=14;break e;case ad:s=16,i=null;break e;case sd:s=22;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=jt(s,n,e,r),e.elementType=t,e.type=i,e.lanes=a,e}function ki(t,e,n,i){return t=jt(7,t,i,e),t.lanes=n,t}function qc(t,e,n,i){return t=jt(23,t,i,e),t.elementType=ud,t.lanes=n,t}function Kc(t,e,n){return t=jt(6,t,null,e),t.lanes=n,t}function Xc(t,e,n){return e=jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FE(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Md(0),this.expirationTimes=Md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.mutableSourceEagerHydrationData=null}function UE(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bn,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function xu(t,e,n,i){var r=e.current,a=At(),s=nn(r);e:if(n){n=n._reactInternals;t:{if(Cn(n)!==n||n.tag!==1)throw Error(G(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Tt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(G(171))}if(n.tag===1){var u=n.type;if(Tt(u)){n=Dg(n,u,o);break e}}n=o}else n=Yr;return e.context===null?e.context=n:e.pendingContext=n,e=Zr(a,s),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),en(r,e),an(r,s,a),s}function Qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $v(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yc(t,e){$v(t,e),(t=t.alternate)&&$v(t,e)}function BE(){return null}function Jc(t,e,n){var i=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new FE(t,e,n!=null&&n.hydrate===!0),e=jt(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,cc(e),t[hi]=n.current,Tg(t.nodeType===8?t.parentNode:t),i)for(t=0;t<i.length;t++){e=i[t];var r=e._getVersion;r=r(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,r]:n.mutableSourceEagerHydrationData.push(e,r)}this._internalRoot=n}Jc.prototype.render=function(t){xu(t,this._internalRoot,null,null)};Jc.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;xu(null,t,null,function(){e[hi]=null})};function os(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jE(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Jc(t,0,e?{hydrate:!0}:void 0)}function bu(t,e,n,i,r){var a=n._reactRootContainer;if(a){var s=a._internalRoot;if(typeof r=="function"){var o=r;r=function(){var l=Qc(s);o.call(l)}}xu(e,s,t,r)}else{if(a=n._reactRootContainer=jE(n,i),s=a._internalRoot,typeof r=="function"){var u=r;r=function(){var l=Qc(s);u.call(l)}}Uv(function(){xu(e,s,t,r)})}return Qc(s)}Rm=function(t){if(t.tag===13){var e=At();an(t,4,e),Yc(t,4)}};Id=function(t){if(t.tag===13){var e=At();an(t,67108864,e),Yc(t,67108864)}};Mm=function(t){if(t.tag===13){var e=At(),n=nn(t);an(t,n,e),Yc(t,n)}};Nm=function(t,e){return e()};xd=function(t,e,n){switch(e){case"input":if(hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=$o(i);if(!r)throw Error(G(90));pm(i),hd(i,r)}}}break;case"textarea":_m(t,n);break;case"select":e=n.value,e!=null&&ri(t,!!n.multiple,e,!1)}};bd=Fv;Pm=function(t,e,n,i,r){var a=ne;ne|=4;try{return In(98,t.bind(null,e,n,i,r))}finally{ne=a,ne===0&&(Ei(),nr())}};Ed=function(){(ne&49)==0&&(wE(),sn())};Im=function(t,e){var n=ne;ne|=2;try{return t(e)}finally{ne=n,ne===0&&(Ei(),nr())}};function qv(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!os(e))throw Error(G(200));return UE(t,e,null,n)}var HE={Events:[Ha,pi,$o,wm,km,sn,{current:!1}]},us={findFiberByHostInstance:wn,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},VE={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lm(t),t===null?null:t.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||BE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{nc=Eu.inject(VE),Pn=Eu}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HE;Mt.createPortal=qv;Mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):Error(G(268,Object.keys(t)));return t=Lm(e),t=t===null?null:t.stateNode,t};Mt.flushSync=function(t,e){var n=ne;if((n&48)!=0)return t(e);ne|=1;try{if(t)return In(99,t.bind(null,e))}finally{ne=n,nr()}};Mt.hydrate=function(t,e,n){if(!os(e))throw Error(G(200));return bu(null,t,e,!0,n)};Mt.render=function(t,e,n){if(!os(e))throw Error(G(200));return bu(null,t,e,!1,n)};Mt.unmountComponentAtNode=function(t){if(!os(t))throw Error(G(40));return t._reactRootContainer?(Uv(function(){bu(null,null,t,!1,function(){t._reactRootContainer=null,t[hi]=null})}),!0):!1};Mt.unstable_batchedUpdates=Fv;Mt.unstable_createPortal=function(t,e){return qv(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Mt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!os(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return bu(t,e,n,!1,i)};Mt.version="17.0.2";function Kv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kv)}catch(t){console.error(t)}}Kv(),im.exports=Mt;var OA=im.exports,ls;typeof window!="undefined"?ls=window:typeof vo!="undefined"?ls=vo:typeof self!="undefined"?ls=self:ls={};var D=ls,WE={},zE=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:WE}),GE=jp(zE),Xv=typeof vo!="undefined"?vo:typeof window!="undefined"?window:{},$E=GE,ds;typeof document!="undefined"?ds=document:(ds=Xv["__GLOBAL_DOCUMENT_CACHE@4"],ds||(ds=Xv["__GLOBAL_DOCUMENT_CACHE@4"]=$E));var z=ds;function Ht(){return Ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ht.apply(this,arguments)}var qE=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ht});function re(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cs(t,e){return cs=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},cs(t,e)}function $(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,cs(t,e)}var KE=XE;function XE(t,e){var n,i=null;try{n=JSON.parse(t,e)}catch(r){i=r}return[i,n]}var Zc={exports:{}};(function(t,e){function n(u){if(u&&typeof u=="object"){var l=u.which||u.keyCode||u.charCode;l&&(u=l)}if(typeof u=="number")return s[u];var c=String(u),m=i[c.toLowerCase()];if(m)return m;var m=r[c.toLowerCase()];if(m)return m;if(c.length===1)return c.charCodeAt(0)}n.isEventKey=function(l,c){if(l&&typeof l=="object"){var m=l.which||l.keyCode||l.charCode;if(m==null)return!1;if(typeof c=="string"){var f=i[c.toLowerCase()];if(f)return f===m;var f=r[c.toLowerCase()];if(f)return f===m}else if(typeof c=="number")return c===m;return!1}},e=t.exports=n;var i=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var s=e.names=e.title={};for(a in i)s[i[a]]=a;for(var o in r)i[o]=r[o]})(Zc,Zc.exports);var ae=Zc.exports,ef={exports:{}},QE=jp(qE),YE=ZE,JE=Object.prototype.toString;function ZE(t){if(!t)return!1;var e=JE.call(t);return e==="[object Function]"||typeof t=="function"&&e!=="[object RegExp]"||typeof window!="undefined"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}var eC=D,tC=function(e,n){return n===void 0&&(n=!1),function(i,r,a){if(i){e(i);return}if(r.statusCode>=400&&r.statusCode<=599){var s=a;if(n)if(eC.TextDecoder){var o=rC(r.headers&&r.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function rC(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,n){var i=n.split("="),r=i[0],a=i[1];return r.trim()==="charset"?a.trim():e},"utf-8")}var nC=tC,Qv=D,iC=QE,aC=YE;ur.httpHandler=nC;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var sC=function(e){var n={};return e&&e.trim().split(`
`).forEach(function(i){var r=i.indexOf(":"),a=i.slice(0,r).trim().toLowerCase(),s=i.slice(r+1).trim();typeof n[a]=="undefined"?n[a]=s:Array.isArray(n[a])?n[a].push(s):n[a]=[n[a],s]}),n};ef.exports=ur;ef.exports.default=ur;ur.XMLHttpRequest=Qv.XMLHttpRequest||dC;ur.XDomainRequest="withCredentials"in new ur.XMLHttpRequest?ur.XMLHttpRequest:Qv.XDomainRequest;oC(["get","put","post","patch","head","delete"],function(t){ur[t==="delete"?"del":t]=function(e,n,i){return n=Yv(e,n,i),n.method=t.toUpperCase(),Jv(n)}});function oC(t,e){for(var n=0;n<t.length;n++)e(t[n])}function uC(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function Yv(t,e,n){var i=t;return aC(e)?(n=e,typeof t=="string"&&(i={uri:t})):i=iC({},e,{uri:t}),i.callback=n,i}function ur(t,e,n){return e=Yv(t,e,n),Jv(e)}function Jv(t){if(typeof t.callback=="undefined")throw new Error("callback argument missing");var e=!1,n=function(k,I,M){e||(e=!0,t.callback(k,I,M))};function i(){o.readyState===4&&setTimeout(s,0)}function r(){var C=void 0;if(o.response?C=o.response:C=o.responseText||lC(o),S)try{C=JSON.parse(C)}catch{}return C}function a(C){return clearTimeout(v),C instanceof Error||(C=new Error(""+(C||"Unknown XMLHttpRequest Error"))),C.statusCode=0,n(C,x)}function s(){if(!l){var C;clearTimeout(v),t.useXDR&&o.status===void 0?C=200:C=o.status===1223?204:o.status;var k=x,I=null;return C!==0?(k={body:r(),statusCode:C,method:m,headers:{},url:c,rawRequest:o},o.getAllResponseHeaders&&(k.headers=sC(o.getAllResponseHeaders()))):I=new Error("Internal XMLHttpRequest Error"),n(I,k,k.body)}}var o=t.xhr||null;o||(t.cors||t.useXDR?o=new ur.XDomainRequest:o=new ur.XMLHttpRequest);var u,l,c=o.url=t.uri||t.url,m=o.method=t.method||"GET",f=t.body||t.data,_=o.headers=t.headers||{},b=!!t.sync,S=!1,v,x={body:void 0,headers:{},statusCode:0,method:m,url:c,rawRequest:o};if("json"in t&&t.json!==!1&&(S=!0,_.accept||_.Accept||(_.Accept="application/json"),m!=="GET"&&m!=="HEAD"&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),f=JSON.stringify(t.json===!0?f:t.json))),o.onreadystatechange=i,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){l=!0},o.ontimeout=a,o.open(m,c,!b,t.username,t.password),b||(o.withCredentials=!!t.withCredentials),!b&&t.timeout>0&&(v=setTimeout(function(){if(!l){l=!0,o.abort("timeout");var C=new Error("XMLHttpRequest timeout");C.code="ETIMEDOUT",a(C)}},t.timeout)),o.setRequestHeader)for(u in _)_.hasOwnProperty(u)&&o.setRequestHeader(u,_[u]);else if(t.headers&&!uC(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(o.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(o),o.send(f||null),o}function lC(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function dC(){}var Zv=ef.exports,e0={exports:{}},t0=z,tf=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function Dt(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}Dt.prototype=tf(Error.prototype);Dt.prototype.constructor=Dt;Dt.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function rf(t){function e(i,r,a,s){return(i|0)*3600+(r|0)*60+(a|0)+(s|0)/1e3}var n=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function fs(){this.values=tf(null)}fs.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function hs(t,e,n,i){var r=i?t.split(i):[t];for(var a in r)if(typeof r[a]=="string"){var s=r[a].split(n);if(s.length===2){var o=s[0],u=s[1];e(o,u)}}}function cC(t,e,n){var i=t;function r(){var o=rf(t);if(o===null)throw new Dt(Dt.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,u){var l=new fs;hs(o,function(c,m){switch(c){case"region":for(var f=n.length-1;f>=0;f--)if(n[f].id===m){l.set(c,n[f].region);break}break;case"vertical":l.alt(c,m,["rl","lr"]);break;case"line":var _=m.split(","),b=_[0];l.integer(c,b),l.percent(c,b)&&l.set("snapToLines",!1),l.alt(c,b,["auto"]),_.length===2&&l.alt("lineAlign",_[1],["start","center","end"]);break;case"position":_=m.split(","),l.percent(c,_[0]),_.length===2&&l.alt("positionAlign",_[1],["start","center","end"]);break;case"size":l.percent(c,m);break;case"align":l.alt(c,m,["start","center","end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical","");try{u.line=l.get("line","auto")}catch{}u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100);try{u.align=l.get("align","center")}catch{u.align=l.get("align","middle")}try{u.position=l.get("position","auto")}catch{u.position=l.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},u.align)}u.positionAlign=l.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},u.align)}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=r(),s(),t.substr(0,3)!=="-->")throw new Dt(Dt.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);t=t.substr(3),s(),e.endTime=r(),s(),a(t,e)}var nf=t0.createElement&&t0.createElement("textarea"),fC={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},r0={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},hC={v:"title",lang:"lang"},n0={rt:"ruby"};function i0(t,e){function n(){if(!e)return null;function b(v){return e=e.substr(v.length),v}var S=e.match(/^([^<]*)(<[^>]*>?)?/);return b(S[1]?S[1]:S[2])}function i(b){return nf.innerHTML=b,b=nf.textContent,nf.textContent="",b}function r(b,S){return!n0[S.localName]||n0[S.localName]===b.localName}function a(b,S){var v=fC[b];if(!v)return null;var x=t.document.createElement(v),C=hC[b];return C&&S&&(x[C]=S.trim()),x}for(var s=t.document.createElement("div"),o=s,u,l=[];(u=n())!==null;){if(u[0]==="<"){if(u[1]==="/"){l.length&&l[l.length-1]===u.substr(2).replace(">","")&&(l.pop(),o=o.parentNode);continue}var c=rf(u.substr(1,u.length-2)),m;if(c){m=t.document.createProcessingInstruction("timestamp",c),o.appendChild(m);continue}var f=u.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f||(m=a(f[1],f[3]),!m)||!r(o,m))continue;if(f[2]){var _=f[2].split(".");_.forEach(function(b){var S=/^bg_/.test(b),v=S?b.slice(3):b;if(r0.hasOwnProperty(v)){var x=S?"background-color":"color",C=r0[v];m.style[x]=C}}),m.className=_.join(" ")}l.push(f[1]),o.appendChild(m),o=m;continue}o.appendChild(t.document.createTextNode(i(u)))}return s}var a0=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function pC(t){for(var e=0;e<a0.length;e++){var n=a0[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function mC(t){var e=[],n="",i;if(!t||!t.childNodes)return"ltr";function r(o,u){for(var l=u.childNodes.length-1;l>=0;l--)o.push(u.childNodes[l])}function a(o){if(!o||!o.length)return null;var u=o.pop(),l=u.textContent||u.innerText;if(l){var c=l.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):l}if(u.tagName==="ruby")return a(o);if(u.childNodes)return r(o,u),a(o)}for(r(e,t);n=a(e);)for(var s=0;s<n.length;s++)if(i=n.charCodeAt(s),pC(i))return"rtl";return"ltr"}function gC(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,i=0,r=0;r<n.length&&n[r]!==e;r++)n[r].mode==="showing"&&i++;return++i*-1}function Cu(){}Cu.prototype.applyStyles=function(t,e){e=e||this.div;for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])};Cu.prototype.formatStyle=function(t,e){return t===0?0:t+e};function wu(t,e,n){Cu.call(this),this.cue=e,this.cueDiv=i0(t,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=t.document.createElement("div"),i={direction:mC(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}wu.prototype=tf(Cu.prototype);wu.prototype.constructor=wu;function ht(t){var e,n,i,r;if(t.div){n=t.div.offsetHeight,i=t.div.offsetWidth,r=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||n,this.bottom=t.bottom||r+(t.height||n),this.width=t.width||i,this.lineHeight=e!==void 0?e:t.lineHeight}ht.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};ht.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};ht.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};ht.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};ht.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};ht.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),n=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),i=e*n;return i/(this.height*this.width)};ht.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};ht.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var r={left:t.left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||n};return r};function vC(t,e,n,i){function r(v,x){for(var C,k=new ht(v),I=1,M=0;M<x.length;M++){for(;v.overlapsOppositeAxis(n,x[M])||v.within(n)&&v.overlapsAny(i);)v.move(x[M]);if(v.within(n))return v;var N=v.intersectPercentage(n);I>N&&(C=new ht(v),I=N),v=new ht(k)}return C||k}var a=new ht(e),s=e.cue,o=gC(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"],l="height";break;case"rl":u=["+x","-x"],l="width";break;case"lr":u=["-x","+x"],l="width";break}var c=a.lineHeight,m=c*Math.round(o),f=n[l]+c,_=u[0];Math.abs(m)>f&&(m=m<0?-1:1,m*=Math.ceil(f/c)*c),o<0&&(m+=s.vertical===""?n.height:n.width,u=u.reverse()),a.move(_,m)}else{var b=a.lineHeight/n.height*100;switch(s.lineAlign){case"center":o-=b/2;break;case"end":o-=b;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}u=["+y","-x","+x","-y"],a=new ht(e)}var S=r(a,u);e.move(S.toCSSCompatValues(n))}function Pi(){}Pi.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};Pi.convertCueToDOMTree=function(t,e){return!t||!e?null:i0(t,e)};var yC=.05,_C="sans-serif",TC="1.5%";Pi.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=t.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=TC,n.appendChild(i);function r(c){for(var m=0;m<c.length;m++)if(c[m].hasBeenReset||!c[m].displayState)return!0;return!1}if(!r(e)){for(var a=0;a<e.length;a++)i.appendChild(e[a].displayState);return}var s=[],o=ht.getSimpleBoxPosition(i),u=Math.round(o.height*yC*100)/100,l={font:u+"px "+_C};(function(){for(var c,m,f=0;f<e.length;f++)m=e[f],c=new wu(t,m,l),i.appendChild(c.div),vC(t,c,o,s),m.displayState=c.div,s.push(ht.getSimpleBoxPosition(c))})()};Pi.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]};Pi.Parser.prototype={reportOrThrowError:function(t){if(t instanceof Dt)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function n(){for(var c=e.buffer,m=0;m<c.length&&c[m]!=="\r"&&c[m]!==`
`;)++m;var f=c.substr(0,m);return c[m]==="\r"&&++m,c[m]===`
`&&++m,e.buffer=c.substr(m),f}function i(c){var m=new fs;if(hs(c,function(_,b){switch(_){case"id":m.set(_,b);break;case"width":m.percent(_,b);break;case"lines":m.integer(_,b);break;case"regionanchor":case"viewportanchor":var S=b.split(",");if(S.length!==2)break;var v=new fs;if(v.percent("x",S[0]),v.percent("y",S[1]),!v.has("x")||!v.has("y"))break;m.set(_+"X",v.get("x")),m.set(_+"Y",v.get("y"));break;case"scroll":m.alt(_,b,["up"]);break}},/=/,/\s/),m.has("id")){var f=new(e.vttjs.VTTRegion||e.window.VTTRegion);f.width=m.get("width",100),f.lines=m.get("lines",3),f.regionAnchorX=m.get("regionanchorX",0),f.regionAnchorY=m.get("regionanchorY",100),f.viewportAnchorX=m.get("viewportanchorX",0),f.viewportAnchorY=m.get("viewportanchorY",100),f.scroll=m.get("scroll",""),e.onregion&&e.onregion(f),e.regionList.push({id:m.get("id"),region:f})}}function r(c){var m=new fs;hs(c,function(f,_){switch(f){case"MPEGT":m.integer(f+"S",_);break;case"LOCA":m.set(f+"L",rf(_));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:m.get("MPEGTS"),LOCAL:m.get("LOCAL")})}function a(c){c.match(/X-TIMESTAMP-MAP/)?hs(c,function(m,f){switch(m){case"X-TIMESTAMP-MAP":r(f);break}},/=/):hs(c,function(m,f){switch(m){case"Region":i(f);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=n();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Dt(Dt.Errors.BadSignature);e.state="HEADER"}for(var u=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(u?u=!1:s=n(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{cC(s,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var l=s.indexOf("-->")!==-1;if(!s||l&&(u=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new Dt(Dt.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var SC=Pi,xC="auto",bC={"":1,lr:1,rl:1},EC={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function CC(t){if(typeof t!="string")return!1;var e=bC[t.toLowerCase()];return e?t.toLowerCase():!1}function af(t){if(typeof t!="string")return!1;var e=EC[t.toLowerCase()];return e?t.toLowerCase():!1}function s0(t,e,n){this.hasBeenReset=!1;var i="",r=!1,a=t,s=e,o=n,u=null,l="",c=!0,m="auto",f="start",_="auto",b="auto",S=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(x){i=""+x}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(x){r=!!x}},startTime:{enumerable:!0,get:function(){return a},set:function(x){if(typeof x!="number")throw new TypeError("Start time must be set to a number.");a=x,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(x){if(typeof x!="number")throw new TypeError("End time must be set to a number.");s=x,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(x){o=""+x,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(x){u=x,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(x){var C=CC(x);if(C===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=C,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(x){c=!!x,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return m},set:function(x){if(typeof x!="number"&&x!==xC)throw new SyntaxError("Line: an invalid number or illegal string was specified.");m=x,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(x){var C=af(x);C?(f=C,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return _},set:function(x){if(x<0||x>100)throw new Error("Position must be between 0 and 100.");_=x,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return b},set:function(x){var C=af(x);C?(b=C,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return S},set:function(x){if(x<0||x>100)throw new Error("Size must be between 0 and 100.");S=x,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(x){var C=af(x);if(!C)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=C,this.hasBeenReset=!0}}}),this.displayState=void 0}s0.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var wC=s0,kC={"":!0,up:!0};function PC(t){if(typeof t!="string")return!1;var e=kC[t.toLowerCase()];return e?t.toLowerCase():!1}function ps(t){return typeof t=="number"&&t>=0&&t<=100}function IC(){var t=100,e=3,n=0,i=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(o){if(!ps(o))throw new Error("Width must be between 0 and 100.");t=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!ps(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(o){if(!ps(o))throw new Error("RegionAnchorY must be between 0 and 100.");n=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!ps(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!ps(o))throw new Error("ViewportAnchorX must be between 0 and 100.");r=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var u=PC(o);u===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=u}}})}var AC=IC,wr=D,Mn=e0.exports={WebVTT:SC,VTTCue:wC,VTTRegion:AC};wr.vttjs=Mn;wr.WebVTT=Mn.WebVTT;var DC=Mn.VTTCue,LC=Mn.VTTRegion,OC=wr.VTTCue,RC=wr.VTTRegion;Mn.shim=function(){wr.VTTCue=DC,wr.VTTRegion=LC};Mn.restore=function(){wr.VTTCue=OC,wr.VTTRegion=RC};wr.VTTCue||Mn.shim();var o0=e0.exports;function MC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ku(t,e,n){return MC()?ku=Reflect.construct:ku=function(r,a,s){var o=[null];o.push.apply(o,a);var u=Function.bind.apply(r,o),l=new u;return s&&cs(l,s.prototype),l},ku.apply(null,arguments)}function NC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cs(t,e)}var u0={exports:{}};(function(t,e){(function(n){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,r=/^([^\/?#]*)([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(u,l,c){if(c=c||{},u=u.trim(),l=l.trim(),!l){if(!c.alwaysNormalize)return u;var m=o.parseURL(u);if(!m)throw new Error("Error trying to parse base URL.");return m.path=o.normalizePath(m.path),o.buildURLFromParts(m)}var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):l;var _=o.parseURL(u);if(!_)throw new Error("Error trying to parse base URL.");if(!_.netLoc&&_.path&&_.path[0]!=="/"){var b=r.exec(_.path);_.netLoc=b[1],_.path=b[2]}_.netLoc&&!_.path&&(_.path="/");var S={scheme:_.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(S.netLoc=_.netLoc,f.path[0]!=="/"))if(!f.path)S.path=_.path,f.params||(S.params=_.params,f.query||(S.query=_.query));else{var v=_.path,x=v.substring(0,v.lastIndexOf("/")+1)+f.path;S.path=o.normalizePath(x)}return S.path===null&&(S.path=c.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(S)},parseURL:function(u){var l=i.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(a,"");u.length!==(u=u.replace(s,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};t.exports=o})()})(u0);var l0=u0.exports,d0="http://example.com",Pu=function(e,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(e)&&(e=D.location&&D.location.href||"");var i=typeof D.URL=="function",r=/^\/\//.test(e),a=!D.location&&!/\/\//i.test(e);if(i?e=new D.URL(e,D.location||d0):/\/\//i.test(e)||(e=l0.buildAbsoluteURL(D.location&&D.location.href||"",e)),i){var s=new URL(n,e);return a?s.href.slice(d0.length):r?s.href.slice(s.protocol.length):s.href}return l0.buildAbsoluteURL(e,n)},sf=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(i,r){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)},e.off=function(i,r){if(!this.listeners[i])return!1;var a=this.listeners[i].indexOf(r);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(a,1),a>-1},e.trigger=function(i){var r=this.listeners[i];if(!!r)if(arguments.length===2)for(var a=r.length,s=0;s<a;++s)r[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),u=r.length,l=0;l<u;++l)r[l].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(r){i.push(r)})},t}(),FC=function(e){return D.atob?D.atob(e):Buffer.from(e,"base64").toString("binary")};function c0(t){for(var e=FC(t),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */var UC=function(t){$(e,t);function e(){var i;return i=t.call(this)||this,i.buffer="",i}var n=e.prototype;return n.push=function(r){var a;for(this.buffer+=r,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},e}(sf),BC=String.fromCharCode(9),of=function(e){var n=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),i={};return n[1]&&(i.length=parseInt(n[1],10)),n[2]&&(i.offset=parseInt(n[2],10)),i},jC=function(){var e="[^=]*",n='"[^"]*"|[^,]*',i="(?:"+e+")=(?:"+n+")";return new RegExp("(?:^|,)("+i+")")},Xt=function(e){for(var n=e.split(jC()),i={},r=n.length,a;r--;)n[r]!==""&&(a=/([^=]*)=(.*)/.exec(n[r]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),i[a[0]]=a[1]);return i},HC=function(t){$(e,t);function e(){var i;return i=t.call(this)||this,i.customParsers=[],i.tagMappers=[],i}var n=e.prototype;return n.push=function(r){var a=this,s,o;if(r=r.trim(),r.length!==0){if(r[0]!=="#"){this.trigger("data",{type:"uri",uri:r});return}var u=this.tagMappers.reduce(function(l,c){var m=c(r);return m===r?l:l.concat([m])},[r]);u.forEach(function(l){for(var c=0;c<a.customParsers.length;c++)if(a.customParsers[c].call(a,l))return;if(l.indexOf("#EXT")!==0){a.trigger("data",{type:"comment",text:l.slice(1)});return}if(l=l.replace("\r",""),s=/^#EXTM3U/.exec(l),s){a.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(l),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),a.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),a.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(l),s){o=Ht(of(s[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(l),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"map"},s[1]){var m=Xt(s[1]);m.URI&&(o.uri=m.URI),m.BYTERANGE&&(o.byterange=of(m.BYTERANGE))}a.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=Xt(s[1]),o.attributes.RESOLUTION){var f=o.attributes.RESOLUTION.split("x"),_={};f[0]&&(_.width=parseInt(f[0],10)),f[1]&&(_.height=parseInt(f[1],10)),o.attributes.RESOLUTION=_}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(l),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=Xt(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(l),s){a.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(l),s){a.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(l),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(l),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=Xt(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),a.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(l),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=Xt(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=Xt(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(BC)),a.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=Xt(s[1]),["DURATION"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseFloat(o.attributes[b]))}),["INDEPENDENT","GAP"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=/YES/.test(o.attributes[b]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=of(o.attributes.BYTERANGE)),a.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=Xt(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseFloat(o.attributes[b]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=/YES/.test(o.attributes[b]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=Xt(s[1]),["PART-TARGET"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseFloat(o.attributes[b]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=Xt(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(b){if(o.attributes.hasOwnProperty(b)){o.attributes[b]=parseInt(o.attributes[b],10);var S=b==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[S]=o.attributes[b],delete o.attributes[b]}}),a.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=Xt(s[1]),["LAST-MSN","LAST-PART"].forEach(function(b){o.attributes.hasOwnProperty(b)&&(o.attributes[b]=parseInt(o.attributes[b],10))}),a.trigger("data",o);return}a.trigger("data",{type:"tag",data:l.slice(4)})})}},n.addParser=function(r){var a=this,s=r.expression,o=r.customType,u=r.dataParser,l=r.segment;typeof u!="function"&&(u=function(m){return m}),this.customParsers.push(function(c){var m=s.exec(c);if(m)return a.trigger("data",{type:"custom",data:u(c),customType:o,segment:l}),!0})},n.addTagMapper=function(r){var a=r.expression,s=r.map,o=function(l){return a.test(l)?s(l):l};this.tagMappers.push(o)},e}(sf),VC=function(e){return e.toLowerCase().replace(/-(\w)/g,function(n){return n[1].toUpperCase()})},Ii=function(e){var n={};return Object.keys(e).forEach(function(i){n[VC(i)]=e[i]}),n},uf=function(e){var n=e.serverControl,i=e.targetDuration,r=e.partTargetDuration;if(!!n){var a="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",u=i&&i*3,l=r&&r*2;i&&!n.hasOwnProperty(s)&&(n[s]=u,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+u+")."})),u&&n[s]<u&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+n[s]+") to targetDuration * 3 ("+u+")"}),n[s]=u),r&&!n.hasOwnProperty(o)&&(n[o]=r*3,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+n[o]+")."})),r&&n[o]<l&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+n[o]+") to partTargetDuration * 2 ("+l+")."}),n[o]=l)}},WC=function(t){$(e,t);function e(){var i;i=t.call(this)||this,i.lineStream=new UC,i.parseStream=new HC,i.lineStream.pipe(i.parseStream);var r=re(i),a=[],s={},o,u,l=!1,c=function(){},m={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",_=0;i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var b=0,S=0;return i.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&u&&(s.key=u),!s.timeline&&typeof _=="number"&&(s.timeline=_),i.manifest.preloadSegment=s)}),i.parseStream.on("data",function(v){var x,C;({tag:function(){({version:function(){v.version&&(this.manifest.version=v.version)},"allow-cache":function(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var M={};"length"in v&&(s.byterange=M,M.length=v.length,"offset"in v||(v.offset=b)),"offset"in v&&(s.byterange=M,M.offset=v.offset),b=M.offset+M.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.duration>0&&(s.duration=v.duration),v.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){u=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT===f){var M=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(M.indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:c0(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV!="undefined"&&(u.iv=v.attributes.IV)},"media-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,_=v.number},"playlist-type":function(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map:function(){o={},v.uri&&(o.uri=v.uri),v.byterange&&(o.byterange=v.byterange),u&&(o.key=u)},"stream-inf":function(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||m,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Ht(s.attributes,v.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||m,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var M=this.manifest.mediaGroups[v.attributes.TYPE];M[v.attributes["GROUP-ID"]]=M[v.attributes["GROUP-ID"]]||{},x=M[v.attributes["GROUP-ID"]],C={default:/yes/i.test(v.attributes.DEFAULT)},C.default?C.autoselect=!0:C.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(C.language=v.attributes.LANGUAGE),v.attributes.URI&&(C.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(C.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(C.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(C.forced=/yes/i.test(v.attributes.FORCED)),x[v.attributes.NAME]=C},discontinuity:function(){_+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString=="undefined"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),s.dateTimeString=v.dateTimeString,s.dateTimeObject=v.dateTimeObject},targetduration:function(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,uf.call(this,this.manifest)},start:function(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out":function(){s.cueOut=v.data},"cue-out-cont":function(){s.cueOutCont=v.data},"cue-in":function(){s.cueIn=v.data},skip:function(){this.manifest.skip=Ii(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part:function(){var M=this;l=!0;var N=this.manifest.segments.length,B=Ii(v.attributes);s.parts=s.parts||[],s.parts.push(B),B.byterange&&(B.byterange.hasOwnProperty("offset")||(B.byterange.offset=S),S=B.byterange.offset+B.byterange.length);var U=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+U+" for segment #"+N,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(F,H){F.hasOwnProperty("lastPart")||M.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+H+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var M=this.manifest.serverControl=Ii(v.attributes);M.hasOwnProperty("canBlockReload")||(M.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),uf.call(this,this.manifest),M.canSkipDateranges&&!M.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var M=this.manifest.segments.length,N=Ii(v.attributes),B=N.type&&N.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(N),N.byterange&&(N.byterange.hasOwnProperty("offset")||(N.byterange.offset=B?S:0,B&&(S=N.byterange.offset+N.byterange.length)));var U=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+U+" for segment #"+M,v.attributes,["TYPE","URI"]),!!N.type)for(var F=0;F<s.preloadHints.length-1;F++){var H=s.preloadHints[F];!H.type||H.type===N.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+U+" for segment #"+M+" has the same TYPE "+N.type+" as preload hint #"+F})}},"rendition-report":function(){var M=Ii(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(M);var N=this.manifest.renditionReports.length-1,B=["LAST-MSN","URI"];l&&B.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+N,v.attributes,B)},"part-inf":function(){this.manifest.partInf=Ii(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),uf.call(this,this.manifest)}}[v.tagType]||c).call(r)},uri:function(){s.uri=v.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),u&&(s.key=u),s.timeline=_,o&&(s.map=o),S=0,s={}},comment:function(){},custom:function(){v.segment?(s.custom=s.custom||{},s.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(r)}),i}var n=e.prototype;return n.warnOnMissingAttributes_=function(r,a,s){var o=[];s.forEach(function(u){a.hasOwnProperty(u)||o.push(u)}),o.length&&this.trigger("warn",{message:r+" lacks required attribute(s): "+o.join(", ")})},n.push=function(r){this.lineStream.push(r)},n.end=function(){this.lineStream.push(`
`),this.trigger("end")},n.addParser=function(r){this.parseStream.addParser(r)},n.addTagMapper=function(r){this.parseStream.addTagMapper(r)},e}(sf),Nn={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},zC=["video","audio","text"],f0=["Video","Audio","Text"],h0=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(n,i,r){var a=("00"+Number(i).toString(16)).slice(-2),s=("00"+Number(r).toString(16)).slice(-2);return"avc1."+a+"00"+s})},lr=function(e){e===void 0&&(e="");var n=e.split(","),i=[];return n.forEach(function(r){r=r.trim();var a;zC.forEach(function(s){var o=Nn[s].exec(r.toLowerCase());if(!(!o||o.length<=1)){a=s;var u=r.substring(0,o[1].length),l=r.replace(u,"");i.push({type:u,details:l,mediaType:s})}}),a||i.push({type:r,details:"",mediaType:"unknown"})}),i},GC=function(e,n){if(!e.mediaGroups.AUDIO||!n)return null;var i=e.mediaGroups.AUDIO[n];if(!i)return null;for(var r in i){var a=i[r];if(a.default&&a.playlists)return lr(a.playlists[0].attributes.CODECS)}return null},p0=function(e){return e===void 0&&(e=""),Nn.audio.test(e.trim().toLowerCase())},$C=function(e){return e===void 0&&(e=""),Nn.text.test(e.trim().toLowerCase())},ms=function(e){if(!(!e||typeof e!="string")){var n=e.toLowerCase().split(",").map(function(a){return h0(a.trim())}),i="video";n.length===1&&p0(n[0])?i="audio":n.length===1&&$C(n[0])&&(i="application");var r="mp4";return n.every(function(a){return Nn.mp4.test(a)})?r="mp4":n.every(function(a){return Nn.webm.test(a)})?r="webm":n.every(function(a){return Nn.ogg.test(a)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},Iu=function(e){return e===void 0&&(e=""),D.MediaSource&&D.MediaSource.isTypeSupported&&D.MediaSource.isTypeSupported(ms(e))||!1},lf=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(n){n=n.trim();for(var i=0;i<f0.length;i++){var r=f0[i];if(Nn["muxer"+r].test(n))return!0}return!1})},m0="mp4a.40.2",qC="avc1.4d400d",KC=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,XC=/^application\/dash\+xml/i,g0=function(e){return KC.test(e)?"hls":XC.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},ln={},Fn={};function df(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}var v0=df({HTML:"text/html",isHTML:function(t){return t===v0.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),y0=df({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===y0.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Fn.freeze=df;Fn.MIME_TYPE=v0;Fn.NAMESPACE=y0;var QC=Fn,gs=QC.NAMESPACE;function YC(t){return t!==""}function JC(t){return t?t.split(/[\t\n\f\r ]+/).filter(YC):[]}function ZC(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function _0(t){if(!t)return[];var e=JC(t);return Object.keys(e.reduce(ZC,{}))}function e1(t){return function(e){return t&&t.indexOf(e)!==-1}}function vs(t,e){for(var n in t)e[n]=t[n]}function bt(t,e){var n=t.prototype;if(!(n instanceof e)){let i=function(){};i.prototype=e.prototype,i=new i,vs(n,i),t.prototype=n=i}n.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),n.constructor=t)}var Et={},Qt=Et.ELEMENT_NODE=1,Ai=Et.ATTRIBUTE_NODE=2,Au=Et.TEXT_NODE=3,T0=Et.CDATA_SECTION_NODE=4,S0=Et.ENTITY_REFERENCE_NODE=5,t1=Et.ENTITY_NODE=6,x0=Et.PROCESSING_INSTRUCTION_NODE=7,b0=Et.COMMENT_NODE=8,E0=Et.DOCUMENT_NODE=9,C0=Et.DOCUMENT_TYPE_NODE=10,kr=Et.DOCUMENT_FRAGMENT_NODE=11,r1=Et.NOTATION_NODE=12,at={},ze={};at.INDEX_SIZE_ERR=(ze[1]="Index size error",1);at.DOMSTRING_SIZE_ERR=(ze[2]="DOMString size error",2);var n1=at.HIERARCHY_REQUEST_ERR=(ze[3]="Hierarchy request error",3);at.WRONG_DOCUMENT_ERR=(ze[4]="Wrong document",4);at.INVALID_CHARACTER_ERR=(ze[5]="Invalid character",5);at.NO_DATA_ALLOWED_ERR=(ze[6]="No data allowed",6);at.NO_MODIFICATION_ALLOWED_ERR=(ze[7]="No modification allowed",7);var i1=at.NOT_FOUND_ERR=(ze[8]="Not found",8);at.NOT_SUPPORTED_ERR=(ze[9]="Not supported",9);var w0=at.INUSE_ATTRIBUTE_ERR=(ze[10]="Attribute in use",10);at.INVALID_STATE_ERR=(ze[11]="Invalid state",11);at.SYNTAX_ERR=(ze[12]="Syntax error",12);at.INVALID_MODIFICATION_ERR=(ze[13]="Invalid modification",13);at.NAMESPACE_ERR=(ze[14]="Invalid namespace",14);at.INVALID_ACCESS_ERR=(ze[15]="Invalid access",15);function Un(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,ze[t]),this.message=ze[t],Error.captureStackTrace&&Error.captureStackTrace(this,Un);return n.code=t,e&&(this.message=this.message+": "+e),n}Un.prototype=Error.prototype;vs(at,Un);function Pr(){}Pr.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],i=0;i<this.length;i++)Li(this[i],n,t,e);return n.join("")}};function Di(t,e){this._node=t,this._refresh=e,cf(this)}function cf(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);H0(t,"length",n.length),vs(n,t),t._inc=e}}Di.prototype.item=function(t){return cf(this),this[t]};bt(Di,Pr);function Du(){}function k0(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function P0(t,e,n,i){if(i?e[k0(e,i)]=n:e[e.length++]=n,t){n.ownerElement=t;var r=t.ownerDocument;r&&(i&&L0(r,t,i),a1(r,t,n))}}function I0(t,e,n){var i=k0(e,n);if(i>=0){for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,t){var a=t.ownerDocument;a&&(L0(a,t,n),n.ownerElement=null)}}else throw Un(i1,new Error(t.tagName+"@"+n))}Du.prototype={length:0,item:Pr.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Un(w0);var n=this.getNamedItem(t.nodeName);return P0(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e=t.ownerElement,n;if(e&&e!=this._ownerElement)throw new Un(w0);return n=this.getNamedItemNS(t.namespaceURI,t.localName),P0(this._ownerElement,this,t,n),n},removeNamedItem:function(t){var e=this.getNamedItem(t);return I0(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return I0(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var i=this[n];if(i.localName==e&&i.namespaceURI==t)return i}return null}};function A0(){}A0.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var i=new _s;if(i.implementation=this,i.childNodes=new Pr,i.doctype=n||null,n&&i.appendChild(n),e){var r=i.createElementNS(t,e);i.appendChild(r)}return i},createDocumentType:function(t,e,n){var i=new Ou;return i.name=t,i.nodeName=t,i.publicId=e||"",i.systemId=n||"",i}};function st(){}st.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return R0(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return O0(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return _f(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==Au&&t.nodeType==Au?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n){for(var i in n)if(n[i]==t)return i}e=e.nodeType==Ai?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==Ai?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function D0(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}vs(Et,st);vs(Et,st.prototype);function ys(t,e){if(e(t))return!0;if(t=t.firstChild)do if(ys(t,e))return!0;while(t=t.nextSibling)}function _s(){}function a1(t,e,n){t&&t._inc++;var i=n.namespaceURI;i===gs.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}function L0(t,e,n,i){t&&t._inc++;var r=n.namespaceURI;r===gs.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function ff(t,e,n){if(t&&t._inc){t._inc++;var i=e.childNodes;if(n)i[i.length++]=n;else{for(var r=e.firstChild,a=0;r;)i[a++]=r,r=r.nextSibling;i.length=a}}}function O0(t,e){var n=e.previousSibling,i=e.nextSibling;return n?n.nextSibling=i:t.firstChild=i,i?i.previousSibling=n:t.lastChild=n,ff(t.ownerDocument,t),e}function R0(t,e,n){var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===kr){var r=e.firstChild;if(r==null)return e;var a=e.lastChild}else r=a=e;var s=n?n.previousSibling:t.lastChild;r.previousSibling=s,a.nextSibling=n,s?s.nextSibling=r:t.firstChild=r,n==null?t.lastChild=a:n.previousSibling=a;do r.parentNode=t;while(r!==a&&(r=r.nextSibling));return ff(t.ownerDocument||t,t),e.nodeType==kr&&(e.firstChild=e.lastChild=null),e}function s1(t,e){var n=e.parentNode;if(n){var i=t.lastChild;n.removeChild(e);var i=t.lastChild}var i=t.lastChild;return e.parentNode=t,e.previousSibling=i,e.nextSibling=null,i?i.nextSibling=e:t.firstChild=e,t.lastChild=e,ff(t.ownerDocument,t,e),e}_s.prototype={nodeName:"#document",nodeType:E0,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==kr){for(var n=t.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,e),n=i}return t}return this.documentElement==null&&t.nodeType==Qt&&(this.documentElement=t),R0(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),O0(this,t)},importNode:function(t,e){return j0(this,t,e)},getElementById:function(t){var e=null;return ys(this.documentElement,function(n){if(n.nodeType==Qt&&n.getAttribute("id")==t)return e=n,!0}),e},getElementsByClassName:function(t){var e=_0(t);return new Di(this,function(n){var i=[];return e.length>0&&ys(n.documentElement,function(r){if(r!==n&&r.nodeType===Qt){var a=r.getAttribute("class");if(a){var s=t===a;if(!s){var o=_0(a);s=e.every(e1(o))}s&&i.push(r)}}}),i})},createElement:function(t){var e=new Bn;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Pr;var n=e.attributes=new Du;return n._ownerElement=e,e},createDocumentFragment:function(){var t=new Ru;return t.ownerDocument=this,t.childNodes=new Pr,t},createTextNode:function(t){var e=new hf;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new pf;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new mf;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new vf;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new Lu;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new gf;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new Bn,i=e.split(":"),r=n.attributes=new Du;return n.childNodes=new Pr,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,i.length==2?(n.prefix=i[0],n.localName=i[1]):n.localName=e,r._ownerElement=n,n},createAttributeNS:function(t,e){var n=new Lu,i=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,i.length==2?(n.prefix=i[0],n.localName=i[1]):n.localName=e,n}};bt(_s,st);function Bn(){this._nsMap={}}Bn.prototype={nodeType:Qt,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===kr?this.insertBefore(t,null):s1(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var i=this.ownerDocument.createAttributeNS(t,e);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Di(this,function(e){var n=[];return ys(e,function(i){i!==e&&i.nodeType==Qt&&(t==="*"||i.tagName==t)&&n.push(i)}),n})},getElementsByTagNameNS:function(t,e){return new Di(this,function(n){var i=[];return ys(n,function(r){r!==n&&r.nodeType===Qt&&(t==="*"||r.namespaceURI===t)&&(e==="*"||r.localName==e)&&i.push(r)}),i})}};_s.prototype.getElementsByTagName=Bn.prototype.getElementsByTagName;_s.prototype.getElementsByTagNameNS=Bn.prototype.getElementsByTagNameNS;bt(Bn,st);function Lu(){}Lu.prototype.nodeType=Ai;bt(Lu,st);function Ts(){}Ts.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(ze[n1])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){var i=this.data.substring(0,t),r=this.data.substring(t+e);n=i+n+r,this.nodeValue=this.data=n,this.length=n.length}};bt(Ts,st);function hf(){}hf.prototype={nodeName:"#text",nodeType:Au,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};bt(hf,Ts);function pf(){}pf.prototype={nodeName:"#comment",nodeType:b0};bt(pf,Ts);function mf(){}mf.prototype={nodeName:"#cdata-section",nodeType:T0};bt(mf,Ts);function Ou(){}Ou.prototype.nodeType=C0;bt(Ou,st);function M0(){}M0.prototype.nodeType=r1;bt(M0,st);function N0(){}N0.prototype.nodeType=t1;bt(N0,st);function gf(){}gf.prototype.nodeType=S0;bt(gf,st);function Ru(){}Ru.prototype.nodeName="#document-fragment";Ru.prototype.nodeType=kr;bt(Ru,st);function vf(){}vf.prototype.nodeType=x0;bt(vf,st);function F0(){}F0.prototype.serializeToString=function(t,e,n){return U0.call(t,e,n)};st.prototype.toString=U0;function U0(t,e){var n=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,a=i.namespaceURI;if(a&&r==null){var r=i.lookupPrefix(a);if(r==null)var s=[{namespace:a,prefix:null}]}return Li(this,n,t,e,s),n.join("")}function B0(t,e,n){var i=t.prefix||"",r=t.namespaceURI;if(!r||i==="xml"&&r===gs.XML||r===gs.XMLNS)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix===i)return s.namespace!==r}return!0}function yf(t,e,n){t.push(" ",e,'="',n.replace(/[<&"]/g,D0),'"')}function Li(t,e,n,i,r){if(r||(r=[]),i)if(t=i(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Qt:var a=t.attributes,s=a.length,o=t.firstChild,u=t.tagName;n=gs.isHTML(t.namespaceURI)||n;var l=u;if(!n&&!t.prefix&&t.namespaceURI){for(var c,m=0;m<a.length;m++)if(a.item(m).name==="xmlns"){c=a.item(m).value;break}if(!c)for(var f=r.length-1;f>=0;f--){var _=r[f];if(_.prefix===""&&_.namespace===t.namespaceURI){c=_.namespace;break}}if(c!==t.namespaceURI)for(var f=r.length-1;f>=0;f--){var _=r[f];if(_.namespace===t.namespaceURI){_.prefix&&(l=_.prefix+":"+u);break}}}e.push("<",l);for(var b=0;b<s;b++){var S=a.item(b);S.prefix=="xmlns"?r.push({prefix:S.localName,namespace:S.value}):S.nodeName=="xmlns"&&r.push({prefix:"",namespace:S.value})}for(var b=0;b<s;b++){var S=a.item(b);if(B0(S,n,r)){var v=S.prefix||"",x=S.namespaceURI;yf(e,v?"xmlns:"+v:"xmlns",x),r.push({prefix:v,namespace:x})}Li(S,e,n,i,r)}if(u===l&&B0(t,n,r)){var v=t.prefix||"",x=t.namespaceURI;yf(e,v?"xmlns:"+v:"xmlns",x),r.push({prefix:v,namespace:x})}if(o||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(e.push(">"),n&&/^script$/i.test(u))for(;o;)o.data?e.push(o.data):Li(o,e,n,i,r.slice()),o=o.nextSibling;else for(;o;)Li(o,e,n,i,r.slice()),o=o.nextSibling;e.push("</",l,">")}else e.push("/>");return;case E0:case kr:for(var o=t.firstChild;o;)Li(o,e,n,i,r.slice()),o=o.nextSibling;return;case Ai:return yf(e,t.name,t.value);case Au:return e.push(t.data.replace(/[<&]/g,D0).replace(/]]>/g,"]]&gt;"));case T0:return e.push("<![CDATA[",t.data,"]]>");case b0:return e.push("<!--",t.data,"-->");case C0:var C=t.publicId,k=t.systemId;if(e.push("<!DOCTYPE ",t.name),C)e.push(" PUBLIC ",C),k&&k!="."&&e.push(" ",k),e.push(">");else if(k&&k!=".")e.push(" SYSTEM ",k,">");else{var I=t.internalSubset;I&&e.push(" [",I,"]"),e.push(">")}return;case x0:return e.push("<?",t.target," ",t.data,"?>");case S0:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function j0(t,e,n){var i;switch(e.nodeType){case Qt:i=e.cloneNode(!1),i.ownerDocument=t;case kr:break;case Ai:n=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=t,i.parentNode=null,n)for(var r=e.firstChild;r;)i.appendChild(j0(t,r,n)),r=r.nextSibling;return i}function _f(t,e,n){var i=new e.constructor;for(var r in e){var a=e[r];typeof a!="object"&&a!=i[r]&&(i[r]=a)}switch(e.childNodes&&(i.childNodes=new Pr),i.ownerDocument=t,i.nodeType){case Qt:var s=e.attributes,o=i.attributes=new Du,u=s.length;o._ownerElement=i;for(var l=0;l<u;l++)i.setAttributeNode(_f(t,s.item(l),!0));break;case Ai:n=!0}if(n)for(var c=e.firstChild;c;)i.appendChild(_f(t,c,n)),c=c.nextSibling;return i}function H0(t,e,n){t[e]=n}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Qt:case kr:var n=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}};Object.defineProperty(Di.prototype,"length",{get:function(){return cf(this),this.$$length}}),Object.defineProperty(st.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Qt:case kr:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),H0=function(e,n,i){e["$$"+n]=i}}}catch{}ln.DocumentType=Ou;ln.DOMException=Un;ln.DOMImplementation=A0;ln.Element=Bn;ln.Node=st;ln.NodeList=Pr;ln.XMLSerializer=F0;var Ss={},V0={};(function(t){var e=Fn.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),t.entityMap=t.HTML_ENTITIES})(V0);var Tf={},xs=Fn.NAMESPACE,Sf=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,W0=new RegExp("[\\-\\.0-9"+Sf.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),z0=new RegExp("^"+Sf.source+W0.source+"*(?::"+Sf.source+W0.source+"*)?$"),bs=0,dn=1,Oi=2,Es=3,Ri=4,Mi=5,Cs=6,Mu=7;function Ni(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ni)}Ni.prototype=new Error;Ni.prototype.name=Ni.name;function G0(){}G0.prototype={parse:function(t,e,n){var i=this.domBuilder;i.startDocument(),K0(e,e={}),o1(t,e,n,i,this.errorHandler),i.endDocument()}};function o1(t,e,n,i,r){function a(de){if(de>65535){de-=65536;var pe=55296+(de>>10),He=56320+(de&1023);return String.fromCharCode(pe,He)}else return String.fromCharCode(de)}function s(de){var pe=de.slice(1,-1);return pe in n?n[pe]:pe.charAt(0)==="#"?a(parseInt(pe.substr(1).replace("x","0x"))):(r.error("entity not found:"+de),de)}function o(de){if(de>S){var pe=t.substring(S,de).replace(/&#?\w+;/g,s);f&&u(S),i.characters(pe,0,de-S),S=de}}function u(de,pe){for(;de>=c&&(pe=m.exec(t));)l=pe.index,c=l+pe[0].length,f.lineNumber++;f.columnNumber=de-l+1}for(var l=0,c=0,m=/.*(?:\r\n?|\n)|.*$/g,f=i.locator,_=[{currentNSMap:e}],b={},S=0;;){try{var v=t.indexOf("<",S);if(v<0){if(!t.substr(S).match(/^\s*$/)){var x=i.doc,C=x.createTextNode(t.substr(S));x.appendChild(C),i.currentElement=C}return}switch(v>S&&o(v),t.charAt(v+1)){case"/":var k=t.indexOf(">",v+3),I=t.substring(v+2,k).replace(/[ \t\n\r]+$/g,""),M=_.pop();k<0?(I=t.substring(v+2).replace(/[\s<].*/,""),r.error("end tag name: "+I+" is not complete:"+M.tagName),k=v+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),r.error("end tag name: "+I+" maybe not complete"),k=v+1+I.length);var N=M.localNSMap,B=M.tagName==I,U=B||M.tagName&&M.tagName.toLowerCase()==I.toLowerCase();if(U){if(i.endElement(M.uri,M.localName,I),N)for(var F in N)i.endPrefixMapping(F);B||r.fatalError("end tag name: "+I+" is not match the current start tagName:"+M.tagName)}else _.push(M);k++;break;case"?":f&&u(v),k=f1(t,v,i);break;case"!":f&&u(v),k=c1(t,v,i,r);break;default:f&&u(v);var H=new X0,se=_[_.length-1].currentNSMap,k=u1(t,v,H,se,s,r),le=H.length;if(!H.closed&&d1(t,k,H.tagName,b)&&(H.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),f&&le){for(var ie=$0(f,{}),xe=0;xe<le;xe++){var oe=H[xe];u(oe.offset),oe.locator=$0(f,{})}i.locator=ie,q0(H,i,se)&&_.push(H),i.locator=f}else q0(H,i,se)&&_.push(H);xs.isHTML(H.uri)&&!H.closed?k=l1(t,k,H.tagName,s,i):k++}}catch(de){if(de instanceof Ni)throw de;r.error("element parse error: "+de),k=-1}k>S?S=k:o(Math.max(v,S)+1)}}function $0(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function u1(t,e,n,i,r,a){function s(f,_,b){n.attributeNames.hasOwnProperty(f)&&a.fatalError("Attribute "+f+" redefined"),n.addValue(f,_,b)}for(var o,u,l=++e,c=bs;;){var m=t.charAt(l);switch(m){case"=":if(c===dn)o=t.slice(e,l),c=Es;else if(c===Oi)c=Es;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===Es||c===dn)if(c===dn&&(a.warning('attribute value must after "="'),o=t.slice(e,l)),e=l+1,l=t.indexOf(m,e),l>0)u=t.slice(e,l).replace(/&#?\w+;/g,r),s(o,u,e-1),c=Mi;else throw new Error("attribute value no end '"+m+"' match");else if(c==Ri)u=t.slice(e,l).replace(/&#?\w+;/g,r),s(o,u,e),a.warning('attribute "'+o+'" missed start quot('+m+")!!"),e=l+1,c=Mi;else throw new Error('attribute value must after "="');break;case"/":switch(c){case bs:n.setTagName(t.slice(e,l));case Mi:case Cs:case Mu:c=Mu,n.closed=!0;case Ri:case dn:case Oi:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),c==bs&&n.setTagName(t.slice(e,l)),l;case">":switch(c){case bs:n.setTagName(t.slice(e,l));case Mi:case Cs:case Mu:break;case Ri:case dn:u=t.slice(e,l),u.slice(-1)==="/"&&(n.closed=!0,u=u.slice(0,-1));case Oi:c===Oi&&(u=o),c==Ri?(a.warning('attribute "'+u+'" missed quot(")!'),s(o,u.replace(/&#?\w+;/g,r),e)):((!xs.isHTML(i[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),s(u,u,e));break;case Es:throw new Error("attribute value missed!!")}return l;case"\x80":m=" ";default:if(m<=" ")switch(c){case bs:n.setTagName(t.slice(e,l)),c=Cs;break;case dn:o=t.slice(e,l),c=Oi;break;case Ri:var u=t.slice(e,l).replace(/&#?\w+;/g,r);a.warning('attribute "'+u+'" missed quot(")!!'),s(o,u,e);case Mi:c=Cs;break}else switch(c){case Oi:n.tagName,(!xs.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=l,c=dn;break;case Mi:a.warning('attribute space is required"'+o+'"!!');case Cs:c=dn,e=l;break;case Es:c=Ri,e=l;break;case Mu:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function q0(t,e,n){for(var i=t.tagName,r=null,a=t.length;a--;){var s=t[a],o=s.qName,u=s.value,f=o.indexOf(":");if(f>0)var l=s.prefix=o.slice(0,f),c=o.slice(f+1),m=l==="xmlns"&&c;else c=o,l=null,m=o==="xmlns"&&"";s.localName=c,m!==!1&&(r==null&&(r={},K0(n,n={})),n[m]=r[m]=u,s.uri=xs.XMLNS,e.startPrefixMapping(m,u))}for(var a=t.length;a--;){s=t[a];var l=s.prefix;l&&(l==="xml"&&(s.uri=xs.XML),l!=="xmlns"&&(s.uri=n[l||""]))}var f=i.indexOf(":");f>0?(l=t.prefix=i.slice(0,f),c=t.localName=i.slice(f+1)):(l=null,c=t.localName=i);var _=t.uri=n[l||""];if(e.startElement(_,c,i,t),t.closed){if(e.endElement(_,c,i),r)for(l in r)e.endPrefixMapping(l)}else return t.currentNSMap=n,t.localNSMap=r,!0}function l1(t,e,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=t.indexOf("</"+n+">",e),s=t.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(n)?(r.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,i),r.characters(s,0,s.length),a)}return e+1}function d1(t,e,n,i){var r=i[n];return r==null&&(r=t.lastIndexOf("</"+n+">"),r<e&&(r=t.lastIndexOf("</"+n)),i[n]=r),r<e}function K0(t,e){for(var n in t)e[n]=t[n]}function c1(t,e,n,i){var r=t.charAt(e+2);switch(r){case"-":if(t.charAt(e+3)==="-"){var a=t.indexOf("-->",e+4);return a>e?(n.comment(t,e+4,a-e-4),a+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var a=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,a-e-9),n.endCDATA(),a+3}var s=h1(t,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var u=s[1][0],l=!1,c=!1;o>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],c=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(c=s[3][0]));var m=s[o-1];return n.startDTD(u,l,c),n.endDTD(),m.index+m[0].length}}return-1}function f1(t,e,n){var i=t.indexOf("?>",e);if(i){var r=t.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,n.processingInstruction(r[1],r[2]),i+2):-1}return-1}function X0(){this.attributeNames={}}X0.prototype={setTagName:function(t){if(!z0.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!z0.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function h1(t,e){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(t);n=r.exec(t);)if(i.push(n),n[1])return i}Tf.XMLReader=G0;Tf.ParseError=Ni;var p1=Fn,xf=ln,Q0=V0,Y0=Tf,m1=xf.DOMImplementation,J0=p1.NAMESPACE,g1=Y0.ParseError,v1=Y0.XMLReader;function Z0(t){this.options=t||{locator:{}}}Z0.prototype.parseFromString=function(t,e){var n=this.options,i=new v1,r=n.domBuilder||new ws,a=n.errorHandler,s=n.locator,o=n.xmlns||{},u=/\/x?html?$/.test(e),l=u?Q0.HTML_ENTITIES:Q0.XML_ENTITIES;return s&&r.setDocumentLocator(s),i.errorHandler=y1(a,r,s),i.domBuilder=n.domBuilder||r,u&&(o[""]=J0.HTML),o.xml=o.xml||J0.XML,t&&typeof t=="string"?i.parse(t,o,l):i.errorHandler.error("invalid doc source"),r.doc};function y1(t,e,n){if(!t){if(e instanceof ws)return e;t=e}var i={},r=t instanceof Function;n=n||{};function a(s){var o=t[s];!o&&r&&(o=t.length==2?function(u){t(s,u)}:t),i[s]=o&&function(u){o("[xmldom "+s+"]	"+u+bf(n))}||function(){}}return a("warning"),a("error"),a("fatalError"),i}function ws(){this.cdata=!1}function Fi(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}ws.prototype={startDocument:function(){this.doc=new m1().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,i){var r=this.doc,a=r.createElementNS(t,n||e),s=i.length;Nu(this,a),this.currentElement=a,this.locator&&Fi(this.locator,a);for(var o=0;o<s;o++){var t=i.getURI(o),u=i.getValue(o),n=i.getQName(o),l=r.createAttributeNS(t,n);this.locator&&Fi(i.getLocator(o),l),l.value=l.nodeValue=u,a.setAttributeNode(l)}},endElement:function(t,e,n){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&Fi(this.locator,n),Nu(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=ey.apply(this,arguments),t){if(this.cdata)var i=this.doc.createCDATASection(t);else var i=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(t)&&this.doc.appendChild(i),this.locator&&Fi(this.locator,i)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=ey.apply(this,arguments);var i=this.doc.createComment(t);this.locator&&Fi(this.locator,i),Nu(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(t,e,n);this.locator&&Fi(this.locator,r),Nu(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]	"+t,bf(this.locator))},error:function(t){console.error("[xmldom error]	"+t,bf(this.locator))},fatalError:function(t){throw new g1(t,this.locator)}};function bf(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function ey(t,e,n){return typeof t=="string"?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){ws.prototype[t]=function(){return null}});function Nu(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Ss.__DOMHandler=ws;Ss.DOMParser=Z0;Ss.DOMImplementation=xf.DOMImplementation;Ss.XMLSerializer=xf.XMLSerializer;var _1=Ss.DOMParser;/*! @name mpd-parser @version 0.19.2 @license Apache-2.0 */var ty=function(e){return!!e&&typeof e=="object"},pt=function t(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.reduce(function(r,a){return typeof a!="object"||Object.keys(a).forEach(function(s){Array.isArray(r[s])&&Array.isArray(a[s])?r[s]=r[s].concat(a[s]):ty(r[s])&&ty(a[s])?r[s]=t(r[s],a[s]):r[s]=a[s]}),r},{})},T1=function(e){return Object.keys(e).map(function(n){return e[n]})},S1=function(e,n){for(var i=[],r=e;r<n;r++)i.push(r);return i},Fu=function(e){return e.reduce(function(n,i){return n.concat(i)},[])},ry=function(e){if(!e.length)return[];for(var n=[],i=0;i<e.length;i++)n.push(e[i]);return n},x1=function(e,n){return e.reduce(function(i,r,a){return r[n]&&i.push(a),i},[])},Ui={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},ks=function(e){var n=e.baseUrl,i=n===void 0?"":n,r=e.source,a=r===void 0?"":r,s=e.range,o=s===void 0?"":s,u=e.indexRange,l=u===void 0?"":u,c={uri:a,resolvedUri:Pu(i||"",a)};if(o||l){var m=o||l,f=m.split("-"),_=parseInt(f[0],10),b=parseInt(f[1],10);c.byterange={length:b-_+1,offset:_}}return c},b1=function(e){var n=e.offset+e.length-1;return e.offset+"-"+n},ny=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},E1={static:function(e){var n=e.duration,i=e.timescale,r=i===void 0?1:i,a=e.sourceDuration,s=e.periodDuration,o=ny(e.endNumber),u=n/r;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/u}:{start:0,end:a/u}},dynamic:function(e){var n=e.NOW,i=e.clientOffset,r=e.availabilityStartTime,a=e.timescale,s=a===void 0?1:a,o=e.duration,u=e.start,l=u===void 0?0:u,c=e.minimumUpdatePeriod,m=c===void 0?0:c,f=e.timeShiftBufferDepth,_=f===void 0?1/0:f,b=ny(e.endNumber),S=(n+i)/1e3,v=r+l,x=S+m,C=x-v,k=Math.ceil(C*s/o),I=Math.floor((S-v-_)*s/o),M=Math.floor((S-v)*s/o);return{start:Math.max(0,I),end:typeof b=="number"?b:Math.min(k,M)}}},C1=function(e){return function(n,i){var r=e.duration,a=e.timescale,s=a===void 0?1:a,o=e.periodIndex,u=e.startNumber,l=u===void 0?1:u;return{number:l+n,duration:r/s,timeline:o,time:i*r}}},Ef=function(e){var n=e.type,i=e.duration,r=e.timescale,a=r===void 0?1:r,s=e.periodDuration,o=e.sourceDuration,u=E1[n](e),l=u.start,c=u.end,m=S1(l,c).map(C1(e));if(n==="static"){var f=m.length-1,_=typeof s=="number"?s:o;m[f].duration=_-i/a*f}return m},iy=function(e){var n=e.baseUrl,i=e.initialization,r=i===void 0?{}:i,a=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,u=e.duration;if(!n)throw new Error(Ui.NO_BASE_URL);var l=ks({baseUrl:n,source:r.sourceURL,range:r.range}),c=ks({baseUrl:n,source:n,indexRange:o});if(c.map=l,u){var m=Ef(e);m.length&&(c.duration=m[0].duration,c.timeline=m[0].timeline)}else a&&(c.duration=a,c.timeline=0);return c.number=0,[c]},Cf=function(e,n,i){for(var r=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,u=o.offset+o.length,l=n.timescale,c=n.references.filter(function(N){return N.referenceType!==1}),m=[],f=e.endList?"static":"dynamic",_=u+n.firstOffset,b=0;b<c.length;b++){var S=n.references[b],v=S.referencedSize,x=S.subsegmentDuration,C=_+v-1,k=_+"-"+C,I={baseUrl:i,timescale:l,timeline:s,periodIndex:s,duration:x,sourceDuration:a,indexRange:k,type:f},M=iy(I)[0];r&&(M.map=r),m.push(M),_+=v}return e.segments=m,e},Uu=function(e){return e&&e.uri+"-"+b1(e.byterange)},ay=function(e){var n=T1(e.reduce(function(i,r){var a=r.attributes.id+(r.attributes.lang||"");if(i[a]){var s;r.segments[0]&&(r.segments[0].discontinuity=!0),(s=i[a].segments).push.apply(s,r.segments),r.attributes.contentProtection&&(i[a].attributes.contentProtection=r.attributes.contentProtection)}else i[a]=r;return i},{}));return n.map(function(i){return i.discontinuityStarts=x1(i.segments,"discontinuity"),i})},wf=function(e,n){var i=Uu(e.sidx),r=i&&n[i]&&n[i].sidx;return r&&Cf(e,r,e.sidx.resolvedUri),e},w1=function(e,n){if(n===void 0&&(n={}),!Object.keys(n).length)return e;for(var i in e)e[i]=wf(e[i],n);return e},k1=function(e,n){var i,r=e.attributes,a=e.segments,s=e.sidx,o={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:r.type==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:a,mediaSequence:a.length?a[0].number:1};return r.contentProtection&&(o.contentProtection=r.contentProtection),s&&(o.sidx=s),n&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},P1=function(e){var n,i=e.attributes,r=e.segments;typeof r=="undefined"&&(r=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var a=(n={NAME:i.id,BANDWIDTH:i.bandwidth},n["PROGRAM-ID"]=1,n);return i.codecs&&(a.CODECS=i.codecs),{attributes:a,uri:"",endList:i.type==="static",timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:r,mediaSequence:r.length?r[0].number:1}},I1=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i=!1);var r,a=e.reduce(function(o,u){var l=u.attributes.role&&u.attributes.role.value||"",c=u.attributes.lang||"",m=u.attributes.label||"main";if(c&&!u.attributes.label){var f=l?" ("+l+")":"";m=""+u.attributes.lang+f}o[m]||(o[m]={language:c,autoselect:!0,default:l==="main",playlists:[],uri:""});var _=wf(k1(u,i),n);return o[m].playlists.push(_),typeof r=="undefined"&&l==="main"&&(r=u,r.default=!0),o},{});if(!r){var s=Object.keys(a)[0];a[s].default=!0}return a},A1=function(e,n){return n===void 0&&(n={}),e.reduce(function(i,r){var a=r.attributes.lang||"text";return i[a]||(i[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),i[a].playlists.push(wf(P1(r),n)),i},{})},D1=function(e){return e.reduce(function(n,i){return i&&i.forEach(function(r){var a=r.channel,s=r.language;n[s]={autoselect:!1,default:!1,instreamId:a,language:s},r.hasOwnProperty("aspectRatio")&&(n[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(n[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(n[s]["3D"]=r["3D"])}),n},{})},L1=function(e){var n,i=e.attributes,r=e.segments,a=e.sidx,s={attributes:(n={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:i.type==="static",timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:r,mediaSequence:r.length?r[0].number:1};return i.contentProtection&&(s.contentProtection=i.contentProtection),a&&(s.sidx=a),s},O1=function(e){var n=e.attributes;return n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video"},R1=function(e){var n=e.attributes;return n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio"},M1=function(e){var n=e.attributes;return n.mimeType==="text/vtt"||n.contentType==="text"},N1=function(e,n,i){var r;if(i===void 0&&(i={}),!e.length)return{};var a=e[0].attributes,s=a.sourceDuration,o=a.type,u=a.suggestedPresentationDelay,l=a.minimumUpdatePeriod,c=ay(e.filter(O1)).map(L1),m=ay(e.filter(R1)),f=e.filter(M1),_=e.map(function(v){return v.attributes.captionServices}).filter(Boolean),b={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:s,playlists:w1(c,i)};l>=0&&(b.minimumUpdatePeriod=l*1e3),n&&(b.locations=n),o==="dynamic"&&(b.suggestedPresentationDelay=u);var S=b.playlists.length===0;return m.length&&(b.mediaGroups.AUDIO.audio=I1(m,i,S)),f.length&&(b.mediaGroups.SUBTITLES.subs=A1(f,i)),_.length&&(b.mediaGroups["CLOSED-CAPTIONS"].cc=D1(_)),b},F1=function(e,n,i){var r=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,u=o===void 0?1:o,l=e.start,c=l===void 0?0:l,m=e.minimumUpdatePeriod,f=m===void 0?0:m,_=(r+a)/1e3,b=s+c,S=_+f,v=S-b;return Math.ceil((v*u-n)/i)},sy=function(e,n){for(var i=e.type,r=e.minimumUpdatePeriod,a=r===void 0?0:r,s=e.media,o=s===void 0?"":s,u=e.sourceDuration,l=e.timescale,c=l===void 0?1:l,m=e.startNumber,f=m===void 0?1:m,_=e.periodIndex,b=[],S=-1,v=0;v<n.length;v++){var x=n[v],C=x.d,k=x.r||0,I=x.t||0;S<0&&(S=I),I&&I>S&&(S=I);var M=void 0;if(k<0){var N=v+1;N===n.length?i==="dynamic"&&a>0&&o.indexOf("$Number$")>0?M=F1(e,S,C):M=(u*c-S)/C:M=(n[N].t-S)/C}else M=k+1;for(var B=f+b.length+M,U=f+b.length;U<B;)b.push({number:U,duration:C/c,time:S,timeline:_}),S+=C,U++}return b},U1=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,B1=function(e){return function(n,i,r,a){if(n==="$$")return"$";if(typeof e[i]=="undefined")return n;var s=""+e[i];return i==="RepresentationID"||(r?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},oy=function(e,n){return e.replace(U1,B1(n))},j1=function(e,n){return!e.duration&&!n?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]:e.duration?Ef(e):sy(e,n)},H1=function(e,n){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,a=r===void 0?{sourceURL:"",range:""}:r,s=ks({baseUrl:e.baseUrl,source:oy(a.sourceURL,i),range:a.range}),o=j1(e,n);return o.map(function(u){i.Number=u.number,i.Time=u.time;var l=oy(e.media||"",i),c=e.timescale||1,m=e.presentationTimeOffset||0,f=e.periodStart+(u.time-m)/c,_={uri:l,timeline:u.timeline,duration:u.duration,resolvedUri:Pu(e.baseUrl||"",l),map:s,number:u.number,presentationTime:f};return _})},V1=function(e,n){var i=e.baseUrl,r=e.initialization,a=r===void 0?{}:r,s=ks({baseUrl:i,source:a.sourceURL,range:a.range}),o=ks({baseUrl:i,source:n.media,range:n.mediaRange});return o.map=s,o},W1=function(e,n){var i=e.duration,r=e.segmentUrls,a=r===void 0?[]:r,s=e.periodStart;if(!i&&!n||i&&n)throw new Error(Ui.SEGMENT_TIME_UNSPECIFIED);var o=a.map(function(c){return V1(e,c)}),u;i&&(u=Ef(e)),n&&(u=sy(e,n));var l=u.map(function(c,m){if(o[m]){var f=o[m],_=e.timescale||1,b=e.presentationTimeOffset||0;return f.timeline=c.timeline,f.duration=c.duration,f.number=c.number,f.presentationTime=s+(c.time-b)/_,f}}).filter(function(c){return c});return l},z1=function(e){var n=e.attributes,i=e.segmentInfo,r,a;i.template?(a=H1,r=pt(n,i.template)):i.base?(a=iy,r=pt(n,i.base)):i.list&&(a=W1,r=pt(n,i.list));var s={attributes:n};if(!a)return s;var o=a(r,i.segmentTimeline);if(r.duration){var u=r,l=u.duration,c=u.timescale,m=c===void 0?1:c;r.duration=l/m}else o.length?r.duration=o.reduce(function(f,_){return Math.max(f,Math.ceil(_.duration))},0):r.duration=0;return s.attributes=r,s.segments=o,i.base&&r.indexRange&&(s.sidx=o[0],s.segments=[]),s},G1=function(e){return e.map(z1)},Me=function(e,n){return ry(e.childNodes).filter(function(i){var r=i.tagName;return r===n})},kf=function(e){return e.textContent.trim()},Bi=function(e){var n=365*24*60*60,i=30*24*60*60,r=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,u=o.exec(e);if(!u)return 0;var l=u.slice(1),c=l[0],m=l[1],f=l[2],_=l[3],b=l[4],S=l[5];return parseFloat(c||0)*n+parseFloat(m||0)*i+parseFloat(f||0)*r+parseFloat(_||0)*a+parseFloat(b||0)*s+parseFloat(S||0)},$1=function(e){var n=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return n.test(e)&&(e+="Z"),Date.parse(e)},uy={mediaPresentationDuration:function(e){return Bi(e)},availabilityStartTime:function(e){return $1(e)/1e3},minimumUpdatePeriod:function(e){return Bi(e)},suggestedPresentationDelay:function(e){return Bi(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return Bi(e)},start:function(e){return Bi(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var n=parseInt(e,10);return isNaN(n)?Bi(e):n},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},ot=function(e){return e&&e.attributes?ry(e.attributes).reduce(function(n,i){var r=uy[i.name]||uy.DEFAULT;return n[i.name]=r(i.value),n},{}):{}},q1={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Bu=function(e,n){return n.length?Fu(e.map(function(i){return n.map(function(r){return Pu(i,kf(r))})})):e},Pf=function(e){var n=Me(e,"SegmentTemplate")[0],i=Me(e,"SegmentList")[0],r=i&&Me(i,"SegmentURL").map(function(f){return pt({tag:"SegmentURL"},ot(f))}),a=Me(e,"SegmentBase")[0],s=i||n,o=s&&Me(s,"SegmentTimeline")[0],u=i||a||n,l=u&&Me(u,"Initialization")[0],c=n&&ot(n);c&&l?c.initialization=l&&ot(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var m={template:c,segmentTimeline:o&&Me(o,"S").map(function(f){return ot(f)}),list:i&&pt(ot(i),{segmentUrls:r,initialization:ot(l)}),base:a&&pt(ot(a),{initialization:ot(l)})};return Object.keys(m).forEach(function(f){m[f]||delete m[f]}),m},K1=function(e,n,i){return function(r){var a=Me(r,"BaseURL"),s=Bu(n,a),o=pt(e,ot(r)),u=Pf(r);return s.map(function(l){return{segmentInfo:pt(i,u),attributes:pt(o,{baseUrl:l})}})}},X1=function(e){return e.reduce(function(n,i){var r=ot(i),a=q1[r.schemeIdUri];if(a){n[a]={attributes:r};var s=Me(i,"cenc:pssh")[0];if(s){var o=kf(s),u=o&&c0(o);n[a].pssh=u}}return n},{})},Q1=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var n=typeof e.value!="string"?[]:e.value.split(";");return n.map(function(r){var a,s;if(s=r,/^CC\d=/.test(r)){var o=r.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(r)&&(a=r);return{channel:a,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var i=typeof e.value!="string"?[]:e.value.split(";");return i.map(function(r){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(r)){var s=r.split("="),o=s[0],u=s[1],l=u===void 0?"":u;a.channel=o,a.language=r,l.split(",").forEach(function(c){var m=c.split(":"),f=m[0],_=m[1];f==="lang"?a.language=_:f==="er"?a.easyReader=Number(_):f==="war"?a.aspectRatio=Number(_):f==="3D"&&(a["3D"]=Number(_))})}else a.language=r;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},Y1=function(e,n,i){return function(r){var a=ot(r),s=Bu(n,Me(r,"BaseURL")),o=Me(r,"Role")[0],u={role:ot(o)},l=pt(e,a,u),c=Me(r,"Accessibility")[0],m=Q1(ot(c));m&&(l=pt(l,{captionServices:m}));var f=Me(r,"Label")[0];if(f&&f.childNodes.length){var _=f.childNodes[0].nodeValue.trim();l=pt(l,{label:_})}var b=X1(Me(r,"ContentProtection"));Object.keys(b).length&&(l=pt(l,{contentProtection:b}));var S=Pf(r),v=Me(r,"Representation"),x=pt(i,S);return Fu(v.map(K1(l,s,x)))}},J1=function(e,n){return function(i,r){var a=Bu(n,Me(i.node,"BaseURL")),s=parseInt(i.attributes.id,10),o=D.isNaN(s)?r:s,u=pt(e,{periodIndex:o,periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(u.periodDuration=i.attributes.duration);var l=Me(i.node,"AdaptationSet"),c=Pf(i.node);return Fu(l.map(Y1(u,a,c)))}},Z1=function(e){var n=e.attributes,i=e.priorPeriodAttributes,r=e.mpdType;return typeof n.start=="number"?n.start:i&&typeof i.start=="number"&&typeof i.duration=="number"?i.start+i.duration:!i&&r==="static"?0:null},ew=function(e,n){n===void 0&&(n={});var i=n,r=i.manifestUri,a=r===void 0?"":r,s=i.NOW,o=s===void 0?Date.now():s,u=i.clientOffset,l=u===void 0?0:u,c=Me(e,"Period");if(!c.length)throw new Error(Ui.INVALID_NUMBER_OF_PERIOD);var m=Me(e,"Location"),f=ot(e),_=Bu([a],Me(e,"BaseURL"));f.type=f.type||"static",f.sourceDuration=f.mediaPresentationDuration||0,f.NOW=o,f.clientOffset=l,m.length&&(f.locations=m.map(kf));var b=[];return c.forEach(function(S,v){var x=ot(S),C=b[v-1];x.start=Z1({attributes:x,priorPeriodAttributes:C?C.attributes:null,mpdType:f.type}),b.push({node:S,attributes:x})}),{locations:f.locations,representationInfo:Fu(b.map(J1(f,_)))}},ly=function(e){if(e==="")throw new Error(Ui.DASH_EMPTY_MANIFEST);var n=new _1,i,r;try{i=n.parseFromString(e,"application/xml"),r=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(Ui.DASH_INVALID_XML);return r},tw=function(e){var n=Me(e,"UTCTiming")[0];if(!n)return null;var i=ot(n);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ui.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},rw=function(e,n){n===void 0&&(n={});var i=ew(ly(e),n),r=G1(i.representationInfo);return N1(r,i.locations,n.sidxMapping)},nw=function(e){return tw(ly(e))},dy=Math.pow(2,32),iw=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;n.version===0?(n.earliestPresentationTime=e.getUint32(i),n.firstOffset=e.getUint32(i+4),i+=8):(n.earliestPresentationTime=e.getUint32(i)*dy+e.getUint32(i+4),n.firstOffset=e.getUint32(i+8)*dy+e.getUint32(i+12),i+=16),i+=2;var r=e.getUint16(i);for(i+=2;r>0;i+=12,r--)n.references.push({referenceType:(t[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(t[i+8]&128),sapType:(t[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return n},aw=iw,sw=function(e){return e.toString(2).length},ow=function(e){return Math.ceil(sw(e)/8)},uw=function(e){return ArrayBuffer.isView(e)},Z=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!uw(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Je=D.BigInt||Number,If=[Je("0x1"),Je("0x100"),Je("0x10000"),Je("0x1000000"),Je("0x100000000"),Je("0x10000000000"),Je("0x1000000000000"),Je("0x100000000000000"),Je("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var lw=function(e,n){var i=n===void 0?{}:n,r=i.signed,a=r===void 0?!1:r,s=i.le,o=s===void 0?!1:s;e=Z(e);var u=o?"reduce":"reduceRight",l=e[u]?e[u]:Array.prototype[u],c=l.call(e,function(f,_,b){var S=o?b:Math.abs(b+1-e.length);return f+Je(_)*If[S]},Je(0));if(a){var m=If[e.length]/Je(2)-Je(1);c=Je(c),c>m&&(c-=m,c-=m,c-=Je(2))}return Number(c)},dw=function(e,n){var i=n===void 0?{}:n,r=i.le,a=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Je(e);for(var s=ow(e),o=new Uint8Array(new ArrayBuffer(s)),u=0;u<s;u++){var l=a?u:Math.abs(u+1-o.length);o[l]=Number(e/If[u]&Je(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=u===0?1:2)}return o},cy=function(e,n){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;n||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},cw=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(n=n.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),n.length<=1)return Z(n[0]);var r=n.reduce(function(o,u,l){return o+(u.byteLength||u.length)},0),a=new Uint8Array(r),s=0;return n.forEach(function(o){o=Z(o),a.set(o,s),s+=o.byteLength}),a},Pe=function(e,n,i){var r=i===void 0?{}:i,a=r.offset,s=a===void 0?0:a,o=r.mask,u=o===void 0?[]:o;e=Z(e),n=Z(n);var l=n.every?n.every:Array.prototype.every;return n.length&&e.length-s>=n.length&&l.call(n,function(c,m){var f=u[m]?u[m]&e[s+m]:e[s+m];return c===f})},fw=Z([73,68,51]),hw=function(e,n){n===void 0&&(n=0),e=Z(e);var i=e[n+5],r=e[n+6]<<21|e[n+7]<<14|e[n+8]<<7|e[n+9],a=(i&16)>>4;return a?r+20:r+10},Ps=function t(e,n){return n===void 0&&(n=0),e=Z(e),e.length-n<10||!Pe(e,fw,{offset:n})?n:(n+=hw(e,n),t(e,n))},fy=function(e){return typeof e=="string"?cy(e):e},pw=function(e){return Array.isArray(e)?e.map(function(n){return fy(n)}):[fy(e)]},mw=function t(e,n,i){i===void 0&&(i=!1),n=pw(n),e=Z(e);var r=[];if(!n.length)return r;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var u=a+s;if(u>e.length){if(i)break;u=e.length}var l=e.subarray(a+8,u);Pe(o,n[0])&&(n.length===1?r.push(l):r.push.apply(r,t(l,n.slice(1),i))),a=u}return r},ju={EBML:Z([26,69,223,163]),DocType:Z([66,130]),Segment:Z([24,83,128,103]),SegmentInfo:Z([21,73,169,102]),Tracks:Z([22,84,174,107]),Track:Z([174]),TrackNumber:Z([215]),DefaultDuration:Z([35,227,131]),TrackEntry:Z([174]),TrackType:Z([131]),FlagDefault:Z([136]),CodecID:Z([134]),CodecPrivate:Z([99,162]),VideoTrack:Z([224]),AudioTrack:Z([225]),Cluster:Z([31,67,182,117]),Timestamp:Z([231]),TimestampScale:Z([42,215,177]),BlockGroup:Z([160]),BlockDuration:Z([155]),Block:Z([161]),SimpleBlock:Z([163])},Af=[128,64,32,16,8,4,2,1],gw=function(e){for(var n=1,i=0;i<Af.length&&!(e&Af[i]);i++)n++;return n},Hu=function(e,n,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var a=gw(e[n]),s=e.subarray(n,n+a);return i&&(s=Array.prototype.slice.call(e,n,n+a),s[0]^=Af[a-1]),{length:a,value:lw(s,{signed:r}),bytes:s}},hy=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(n){return t(n)}):typeof e=="number"?dw(e):e},vw=function(e){return Array.isArray(e)?e.map(function(n){return hy(n)}):[hy(e)]},yw=function t(e,n,i){if(i>=n.length)return n.length;var r=Hu(n,i,!1);if(Pe(e.bytes,r.bytes))return i;var a=Hu(n,i+r.length);return t(e,n,i+a.length+a.value+r.length)},py=function t(e,n){n=vw(n),e=Z(e);var i=[];if(!n.length)return i;for(var r=0;r<e.length;){var a=Hu(e,r,!1),s=Hu(e,r+a.length),o=r+a.length+s.length;s.value===127&&(s.value=yw(a,e,o),s.value!==e.length&&(s.value-=o));var u=o+s.value>e.length?e.length:o+s.value,l=e.subarray(o,u);Pe(n[0],a.bytes)&&(n.length===1?i.push(l):i=i.concat(t(l,n.slice(1))));var c=a.length+s.length+l.length;r+=c}return i},_w=Z([0,0,0,1]),Tw=Z([0,0,1]),Sw=Z([0,0,3]),xw=function(e){for(var n=[],i=1;i<e.length-2;)Pe(e.subarray(i,i+3),Sw)&&(n.push(i+2),i++),i++;if(n.length===0)return e;var r=e.length-n.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===n[0]&&(s++,n.shift()),a[i]=e[s];return a},my=function(e,n,i,r){r===void 0&&(r=1/0),e=Z(e),i=[].concat(i);for(var a=0,s,o=0;a<e.length&&(o<r||s);){var u=void 0;if(Pe(e.subarray(a),_w)?u=4:Pe(e.subarray(a),Tw)&&(u=3),!u){a++;continue}if(o++,s)return xw(e.subarray(s,a));var l=void 0;n==="h264"?l=e[a+u]&31:n==="h265"&&(l=e[a+u]>>1&63),i.indexOf(l)!==-1&&(s=a+u),a+=u+(n==="h264"?1:2)}return e.subarray(0,0)},bw=function(e,n,i){return my(e,"h264",n,i)},Ew=function(e,n,i){return my(e,"h265",n,i)},mt={webm:Z([119,101,98,109]),matroska:Z([109,97,116,114,111,115,107,97]),flac:Z([102,76,97,67]),ogg:Z([79,103,103,83]),ac3:Z([11,119]),riff:Z([82,73,70,70]),avi:Z([65,86,73]),wav:Z([87,65,86,69]),"3gp":Z([102,116,121,112,51,103]),mp4:Z([102,116,121,112]),fmp4:Z([115,116,121,112]),mov:Z([102,116,121,112,113,116]),moov:Z([109,111,111,118]),moof:Z([109,111,111,102])},ji={aac:function(e){var n=Ps(e);return Pe(e,[255,16],{offset:n,mask:[255,22]})},mp3:function(e){var n=Ps(e);return Pe(e,[255,2],{offset:n,mask:[255,6]})},webm:function(e){var n=py(e,[ju.EBML,ju.DocType])[0];return Pe(n,mt.webm)},mkv:function(e){var n=py(e,[ju.EBML,ju.DocType])[0];return Pe(n,mt.matroska)},mp4:function(e){if(ji["3gp"](e)||ji.mov(e))return!1;if(Pe(e,mt.mp4,{offset:4})||Pe(e,mt.fmp4,{offset:4})||Pe(e,mt.moof,{offset:4})||Pe(e,mt.moov,{offset:4}))return!0},mov:function(e){return Pe(e,mt.mov,{offset:4})},"3gp":function(e){return Pe(e,mt["3gp"],{offset:4})},ac3:function(e){var n=Ps(e);return Pe(e,mt.ac3,{offset:n})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var n=0;n+188<e.length&&n<188;){if(e[n]===71&&e[n+188]===71)return!0;n+=1}return!1},flac:function(e){var n=Ps(e);return Pe(e,mt.flac,{offset:n})},ogg:function(e){return Pe(e,mt.ogg)},avi:function(e){return Pe(e,mt.riff)&&Pe(e,mt.avi,{offset:8})},wav:function(e){return Pe(e,mt.riff)&&Pe(e,mt.wav,{offset:8})},h264:function(e){return bw(e,7,3).length},h265:function(e){return Ew(e,[32,33],3).length}},Df=Object.keys(ji).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);Df.forEach(function(t){var e=ji[t];ji[t]=function(n){return e(Z(n))}});var Cw=ji,Lf=function(e){e=Z(e);for(var n=0;n<Df.length;n++){var i=Df[n];if(Cw[i](e))return i}return""},ww=function(e){return mw(e,["moof"]).length>0},Of=9e4,Rf,Mf,Vu,Nf,gy,vy,yy;Rf=function(t){return t*Of};Mf=function(t,e){return t*e};Vu=function(t){return t/Of};Nf=function(t,e){return t/e};gy=function(t,e){return Rf(Nf(t,e))};vy=function(t,e){return Mf(Vu(t),e)};yy=function(t,e,n){return Vu(n?t:t-e)};var Wu={ONE_SECOND_IN_TS:Of,secondsToVideoTs:Rf,secondsToAudioTs:Mf,videoTsToSeconds:Vu,audioTsToSeconds:Nf,audioTsToVideoTs:gy,videoTsToAudioTs:vy,metadataTsToSeconds:yy};/**
 * @license
 * Video.js 7.17.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var _y="7.17.0",Ir={},cn=function(e,n){return Ir[e]=Ir[e]||[],n&&(Ir[e]=Ir[e].concat(n)),Ir[e]},kw=function(e,n){cn(e,n)},Ty=function(e,n){var i=cn(e).indexOf(n);return i<=-1?!1:(Ir[e]=Ir[e].slice(),Ir[e].splice(i,1),!0)},Pw=function(e,n){cn(e,[].concat(n).map(function(i){var r=function a(){return Ty(e,a),i.apply(void 0,arguments)};return r}))},zu={prefixed:!0},Gu=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Sy=Gu[0],Is;for(var $u=0;$u<Gu.length;$u++)if(Gu[$u][1]in z){Is=Gu[$u];break}if(Is){for(var qu=0;qu<Is.length;qu++)zu[Sy[qu]]=Is[qu];zu.prefixed=Is[0]!==Sy[0]}var Ct=[],Iw=function(e,n){return function(i,r,a){var s=n.levels[r],o=new RegExp("^("+s+")$");if(i!=="log"&&a.unshift(i.toUpperCase()+":"),a.unshift(e+":"),Ct){Ct.push([].concat(a));var u=Ct.length-1e3;Ct.splice(0,u>0?u:0)}if(!!D.console){var l=D.console[i];!l&&i==="debug"&&(l=D.console.info||D.console.log),!(!l||!s||!o.test(i))&&l[Array.isArray(a)?"apply":"call"](D.console,a)}}};function xy(t){var e="info",n,i=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];n("log",e,s)};return n=Iw(t,i),i.createLogger=function(r){return xy(t+": "+r)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},i.level=function(r){if(typeof r=="string"){if(!i.levels.hasOwnProperty(r))throw new Error('"'+r+'" in not a valid log level');e=r}return e},i.history=function(){return Ct?[].concat(Ct):[]},i.history.filter=function(r){return(Ct||[]).filter(function(a){return new RegExp(".*"+r+".*").test(a[0])})},i.history.clear=function(){Ct&&(Ct.length=0)},i.history.disable=function(){Ct!==null&&(Ct.length=0,Ct=null)},i.history.enable=function(){Ct===null&&(Ct=[])},i.error=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n("error",e,a)},i.warn=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n("warn",e,a)},i.debug=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n("debug",e,a)},i}var ue=xy("VIDEOJS"),by=ue.createLogger,Aw=Object.prototype.toString,Ey=function(e){return Ar(e)?Object.keys(e):[]};function Hi(t,e){Ey(t).forEach(function(n){return e(t[n],n)})}function Dw(t,e,n){return n===void 0&&(n=0),Ey(t).reduce(function(i,r){return e(i,t[r],r)},n)}function Le(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Object.assign?Ht.apply(void 0,[t].concat(n)):(n.forEach(function(r){!r||Hi(r,function(a,s){t[s]=a})}),t)}function Ar(t){return!!t&&typeof t=="object"}function As(t){return Ar(t)&&Aw.call(t)==="[object Object]"&&t.constructor===Object}function Ds(t,e){if(!t||!e)return"";if(typeof D.getComputedStyle=="function"){var n;try{n=D.getComputedStyle(t)}catch{return""}return n?n.getPropertyValue(e)||n[e]:""}return""}var Ge=D.navigator&&D.navigator.userAgent||"",Cy=/AppleWebKit\/([\d.]+)/i.exec(Ge),Lw=Cy?parseFloat(Cy.pop()):null,wy=/iPod/i.test(Ge),Ow=function(){var t=Ge.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Dr=/Android/i.test(Ge),Ff=function(){var t=Ge.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),ky=Dr&&Ff<5&&Lw<537,Py=/Firefox/i.test(Ge),Ls=/Edg/i.test(Ge),Lr=!Ls&&(/Chrome/i.test(Ge)||/CriOS/i.test(Ge)),Iy=function(){var t=Ge.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Os=function(){var t=/MSIE\s(\d+)\.\d/.exec(Ge),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(Ge)&&/rv:11.0/.test(Ge)&&(e=11),e}(),Uf=/Safari/i.test(Ge)&&!Lr&&!Dr&&!Ls,Ay=/Windows/i.test(Ge),Vi=Boolean(Wi()&&("ontouchstart"in D||D.navigator.maxTouchPoints||D.DocumentTouch&&D.document instanceof D.DocumentTouch)),Bf=/iPad/i.test(Ge)||Uf&&Vi&&!/iPhone/i.test(Ge),jf=/iPhone/i.test(Ge)&&!Bf,wt=jf||Bf||wy,Ku=(Uf||wt)&&!Lr,Rw=Object.freeze({__proto__:null,IS_IPOD:wy,IOS_VERSION:Ow,IS_ANDROID:Dr,ANDROID_VERSION:Ff,IS_NATIVE_ANDROID:ky,IS_FIREFOX:Py,IS_EDGE:Ls,IS_CHROME:Lr,CHROME_VERSION:Iy,IE_VERSION:Os,IS_SAFARI:Uf,IS_WINDOWS:Ay,TOUCH_ENABLED:Vi,IS_IPAD:Bf,IS_IPHONE:jf,IS_IOS:wt,IS_ANY_SAFARI:Ku});function Dy(t){return typeof t=="string"&&Boolean(t.trim())}function Ly(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Mw(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function Wi(){return z===D.document}function zi(t){return Ar(t)&&t.nodeType===1}function Oy(){try{return D.parent!==D.self}catch{return!0}}function Ry(t){return function(e,n){if(!Dy(e))return z[t](null);Dy(n)&&(n=z.querySelector(n));var i=zi(n)?n:z;return i[t]&&i[t](e)}}function fe(t,e,n,i){t===void 0&&(t="div"),e===void 0&&(e={}),n===void 0&&(n={});var r=z.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(a){var s=e[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(ue.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+a+" to "+s+".")),r.setAttribute(a,s)):a==="textContent"?jn(r,s):(r[a]!==s||a==="tabIndex")&&(r[a]=s)}),Object.getOwnPropertyNames(n).forEach(function(a){r.setAttribute(a,n[a])}),i&&Wf(r,i),r}function jn(t,e){return typeof t.textContent=="undefined"?t.innerText=e:t.textContent=e,t}function Hf(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function Hn(t,e){return Ly(e),t.classList?t.classList.contains(e):Mw(e).test(t.className)}function Or(t,e){return t.classList?t.classList.add(e):Hn(t,e)||(t.className=(t.className+" "+e).trim()),t}function Rs(t,e){return t?(t.classList?t.classList.remove(e):(Ly(e),t.className=t.className.split(/\s+/).filter(function(n){return n!==e}).join(" ")),t):(ue.warn("removeClass was called with an element that doesn't exist"),null)}function My(t,e,n){var i=Hn(t,e);if(typeof n=="function"&&(n=n(t,e)),typeof n!="boolean"&&(n=!i),n!==i)return n?Or(t,e):Rs(t,e),t}function Ny(t,e){Object.getOwnPropertyNames(e).forEach(function(n){var i=e[n];i===null||typeof i=="undefined"||i===!1?t.removeAttribute(n):t.setAttribute(n,i===!0?"":i)})}function Rr(t){var e={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var i=t.attributes,r=i.length-1;r>=0;r--){var a=i[r].name,s=i[r].value;(typeof t[a]=="boolean"||n.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}return e}function Fy(t,e){return t.getAttribute(e)}function Gi(t,e,n){t.setAttribute(e,n)}function Xu(t,e){t.removeAttribute(e)}function Uy(){z.body.focus(),z.onselectstart=function(){return!1}}function By(){z.onselectstart=function(){return!0}}function $i(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(i){e[i]!==void 0&&(n[i]=e[i])}),n.height||(n.height=parseFloat(Ds(t,"height"))),n.width||(n.width=parseFloat(Ds(t,"width"))),n}}function Ms(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=t.offsetWidth,n=t.offsetHeight,i=0,r=0;t.offsetParent&&t!==z[zu.fullscreenElement];)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:i,top:r,width:e,height:n}}function Qu(t,e){var n={x:0,y:0};if(wt)for(var i=t;i&&i.nodeName.toLowerCase()!=="html";){var r=Ds(i,"transform");if(/^matrix/.test(r)){var a=r.slice(7,-1).split(/,\s/).map(Number);n.x+=a[4],n.y+=a[5]}else if(/^matrix3d/.test(r)){var s=r.slice(9,-1).split(/,\s/).map(Number);n.x+=s[12],n.y+=s[13]}i=i.parentNode}var o={},u=Ms(e.target),l=Ms(t),c=l.width,m=l.height,f=e.offsetY-(l.top-u.top),_=e.offsetX-(l.left-u.left);return e.changedTouches&&(_=e.changedTouches[0].pageX-l.left,f=e.changedTouches[0].pageY+l.top,wt&&(_-=n.x,f-=n.y)),o.y=1-Math.max(0,Math.min(1,f/m)),o.x=Math.max(0,Math.min(1,_/c)),o}function jy(t){return Ar(t)&&t.nodeType===3}function Vf(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function Hy(t){return typeof t=="function"&&(t=t()),(Array.isArray(t)?t:[t]).map(function(e){if(typeof e=="function"&&(e=e()),zi(e)||jy(e))return e;if(typeof e=="string"&&/\S/.test(e))return z.createTextNode(e)}).filter(function(e){return e})}function Wf(t,e){return Hy(e).forEach(function(n){return t.appendChild(n)}),t}function Vy(t,e){return Wf(Vf(t),e)}function Ns(t){return t.button===void 0&&t.buttons===void 0||t.button===0&&t.buttons===void 0||t.type==="mouseup"&&t.button===0&&t.buttons===0?!0:!(t.button!==0||t.buttons!==1)}var fn=Ry("querySelector"),Wy=Ry("querySelectorAll"),zy=Object.freeze({__proto__:null,isReal:Wi,isEl:zi,isInFrame:Oy,createEl:fe,textContent:jn,prependTo:Hf,hasClass:Hn,addClass:Or,removeClass:Rs,toggleClass:My,setAttributes:Ny,getAttributes:Rr,getAttribute:Fy,setAttribute:Gi,removeAttribute:Xu,blockTextSelection:Uy,unblockTextSelection:By,getBoundingClientRect:$i,findPosition:Ms,getPointerPosition:Qu,isTextNode:jy,emptyEl:Vf,normalizeContent:Hy,appendContent:Wf,insertContent:Vy,isSingleLeftClick:Ns,$:fn,$$:Wy}),Gy=!1,zf,Nw=function(){if(zf.options.autoSetup!==!1){var e=Array.prototype.slice.call(z.getElementsByTagName("video")),n=Array.prototype.slice.call(z.getElementsByTagName("audio")),i=Array.prototype.slice.call(z.getElementsByTagName("video-js")),r=e.concat(n,i);if(r&&r.length>0)for(var a=0,s=r.length;a<s;a++){var o=r[a];if(o&&o.getAttribute){if(o.player===void 0){var u=o.getAttribute("data-setup");u!==null&&zf(o)}}else{Gf(1);break}}else Gy||Gf(1)}};function Gf(t,e){!Wi()||(e&&(zf=e),D.setTimeout(Nw,t))}function $f(){Gy=!0,D.removeEventListener("load",$f)}Wi()&&(z.readyState==="complete"?$f():D.addEventListener("load",$f));var $y=function(e){var n=z.createElement("style");return n.className=e,n},qy=function(e,n){e.styleSheet?e.styleSheet.cssText=n:e.textContent=n},Fw=3,Uw=Fw;function hn(){return Uw++}var Ky;D.WeakMap||(Ky=function(){function t(){this.vdata="vdata"+Math.floor(D.performance&&D.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(i,r){var a=i[this.vdata]||hn();return i[this.vdata]||(i[this.vdata]=a),this.data[a]=r,this},e.get=function(i){var r=i[this.vdata];if(r)return this.data[r];ue("We have no data for this element",i)},e.has=function(i){var r=i[this.vdata];return r in this.data},e.delete=function(i){var r=i[this.vdata];r&&(delete this.data[r],delete i[this.vdata])},t}());var gt=D.WeakMap?new WeakMap:new Ky;function Xy(t,e){if(!!gt.has(t)){var n=gt.get(t);n.handlers[e].length===0&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&gt.delete(t)}}function qf(t,e,n,i){n.forEach(function(r){t(e,r,i)})}function Yu(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){var i=t||D.event;t={};for(var r in i)r!=="layerX"&&r!=="layerY"&&r!=="keyLocation"&&r!=="webkitMovementX"&&r!=="webkitMovementY"&&(r==="returnValue"&&i.preventDefault||(t[r]=i[r]));if(t.target||(t.target=t.srcElement||z),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,t.clientX!==null&&t.clientX!==void 0){var a=z.documentElement,s=z.body;t.pageX=t.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),t.pageY=t.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}t.which=t.charCode||t.keyCode,t.button!==null&&t.button!==void 0&&(t.button=t.button&1?0:t.button&4?1:t.button&2?2:0)}return t.fixed_=!0,t}var Ju,Bw=function(){if(typeof Ju!="boolean"){Ju=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Ju=!0}});D.addEventListener("test",null,e),D.removeEventListener("test",null,e)}catch{}}return Ju},jw=["touchstart","touchmove"];function Lt(t,e,n){if(Array.isArray(e))return qf(Lt,t,e,n);gt.has(t)||gt.set(t,{});var i=gt.get(t);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),n.guid||(n.guid=hn()),i.handlers[e].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(a,s){if(!i.disabled){a=Yu(a);var o=i.handlers[a.type];if(o)for(var u=o.slice(0),l=0,c=u.length;l<c&&!a.isImmediatePropagationStopped();l++)try{u[l].call(t,a,s)}catch(m){ue.error(m)}}}),i.handlers[e].length===1)if(t.addEventListener){var r=!1;Bw()&&jw.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,i.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,i.dispatcher)}function ut(t,e,n){if(!!gt.has(t)){var i=gt.get(t);if(!!i.handlers){if(Array.isArray(e))return qf(ut,t,e,n);var r=function(l,c){i.handlers[c]=[],Xy(l,c)};if(e===void 0){for(var a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&r(t,a);return}var s=i.handlers[e];if(!!s){if(!n){r(t,e);return}if(n.guid)for(var o=0;o<s.length;o++)s[o].guid===n.guid&&s.splice(o--,1);Xy(t,e)}}}}function qi(t,e,n){var i=gt.has(t)?gt.get(t):{},r=t.parentNode||t.ownerDocument;if(typeof e=="string"?e={type:e,target:t}:e.target||(e.target=t),e=Yu(e),i.dispatcher&&i.dispatcher.call(t,e,n),r&&!e.isPropagationStopped()&&e.bubbles===!0)qi.call(null,r,e,n);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){gt.has(e.target)||gt.set(e.target,{});var a=gt.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function Zu(t,e,n){if(Array.isArray(e))return qf(Zu,t,e,n);var i=function r(){ut(t,e,r),n.apply(this,arguments)};i.guid=n.guid=n.guid||hn(),Lt(t,e,i)}function Qy(t,e,n){var i=function r(){ut(t,e,r),n.apply(this,arguments)};i.guid=n.guid=n.guid||hn(),Lt(t,e,i)}var Hw=Object.freeze({__proto__:null,fixEvent:Yu,on:Lt,off:ut,trigger:qi,one:Zu,any:Qy}),Yt=30,Te=function(e,n,i){n.guid||(n.guid=hn());var r=n.bind(e);return r.guid=i?i+"_"+n.guid:n.guid,r},Mr=function(e,n){var i=D.performance.now(),r=function(){var s=D.performance.now();s-i>=n&&(e.apply(void 0,arguments),i=s)};return r},Vw=function(e,n,i,r){r===void 0&&(r=D);var a,s=function(){r.clearTimeout(a),a=null},o=function(){var l=this,c=arguments,m=function(){a=null,m=null,i||e.apply(l,c)};!a&&i&&e.apply(l,c),r.clearTimeout(a),a=r.setTimeout(m,n)};return o.cancel=s,o},$e=function(){};$e.prototype.allowedEvents_={};$e.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Lt(this,t,e),this.addEventListener=n};$e.prototype.addEventListener=$e.prototype.on;$e.prototype.off=function(t,e){ut(this,t,e)};$e.prototype.removeEventListener=$e.prototype.off;$e.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Zu(this,t,e),this.addEventListener=n};$e.prototype.any=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},Qy(this,t,e),this.addEventListener=n};$e.prototype.trigger=function(t){var e=t.type||t;typeof t=="string"&&(t={type:e}),t=Yu(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),qi(this,t)};$e.prototype.dispatchEvent=$e.prototype.trigger;var Fs;$e.prototype.queueTrigger=function(t){var e=this;Fs||(Fs=new Map);var n=t.type||t,i=Fs.get(this);i||(i=new Map,Fs.set(this,i));var r=i.get(n);i.delete(n),D.clearTimeout(r);var a=D.setTimeout(function(){i.size===0&&(i=null,Fs.delete(e)),e.trigger(t)},0);i.set(n,a)};var el=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Nr=function(e){return e instanceof $e||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(n){return typeof e[n]=="function"})},Ww=function(e,n){Nr(e)?n():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(n))},Kf=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},tl=function(e,n,i){if(!e||!e.nodeName&&!Nr(e))throw new Error("Invalid target for "+el(n)+"#"+i+"; must be a DOM node or evented object.")},Yy=function(e,n,i){if(!Kf(e))throw new Error("Invalid event type for "+el(n)+"#"+i+"; must be a non-empty string or array.")},Jy=function(e,n,i){if(typeof e!="function")throw new Error("Invalid listener for "+el(n)+"#"+i+"; must be a function.")},Xf=function(e,n,i){var r=n.length<3||n[0]===e||n[0]===e.eventBusEl_,a,s,o;return r?(a=e.eventBusEl_,n.length>=3&&n.shift(),s=n[0],o=n[1]):(a=n[0],s=n[1],o=n[2]),tl(a,e,i),Yy(s,e,i),Jy(o,e,i),o=Te(e,o),{isTargetingSelf:r,target:a,type:s,listener:o}},Vn=function(e,n,i,r){tl(e,e,n),e.nodeName?Hw[n](e,i,r):e[n](i,r)},zw={on:function(){for(var e=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Xf(this,i,"on"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(Vn(o,"on",u,l),!s){var c=function(){return e.off(o,u,l)};c.guid=l.guid;var m=function(){return e.off("dispose",c)};m.guid=l.guid,Vn(this,"on","dispose",c),Vn(o,"on","dispose",m)}},one:function(){for(var e=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Xf(this,i,"one"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s)Vn(o,"one",u,l);else{var c=function m(){e.off(o,u,m);for(var f=arguments.length,_=new Array(f),b=0;b<f;b++)_[b]=arguments[b];l.apply(null,_)};c.guid=l.guid,Vn(o,"one",u,c)}},any:function(){for(var e=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Xf(this,i,"any"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s)Vn(o,"any",u,l);else{var c=function m(){e.off(o,u,m);for(var f=arguments.length,_=new Array(f),b=0;b<f;b++)_[b]=arguments[b];l.apply(null,_)};c.guid=l.guid,Vn(o,"any",u,c)}},off:function(e,n,i){if(!e||Kf(e))ut(this.eventBusEl_,e,n);else{var r=e,a=n;tl(r,this,"off"),Yy(a,this,"off"),Jy(i,this,"off"),i=Te(this,i),this.off("dispose",i),r.nodeName?(ut(r,a,i),ut(r,"dispose",i)):Nr(r)&&(r.off(a,i),r.off("dispose",i))}},trigger:function(e,n){tl(this.eventBusEl_,this,"trigger");var i=e&&typeof e!="string"?e.type:e;if(!Kf(i)){var r="Invalid event type for "+el(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||ue).error(r);else throw new Error(r)}return qi(this.eventBusEl_,e,n)}};function Qf(t,e){e===void 0&&(e={});var n=e,i=n.eventBusKey;if(i){if(!t[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');t.eventBusEl_=t[i]}else t.eventBusEl_=fe("span",{className:"vjs-event-bus"});return Le(t,zw),t.eventedCallbacks&&t.eventedCallbacks.forEach(function(r){r()}),t.on("dispose",function(){t.off(),[t,t.el_,t.eventBusEl_].forEach(function(r){r&&gt.has(r)&&gt.delete(r)}),D.setTimeout(function(){t.eventBusEl_=null},0)}),t}var Gw={state:{},setState:function(e){var n=this;typeof e=="function"&&(e=e());var i;return Hi(e,function(r,a){n.state[a]!==r&&(i=i||{},i[a]={from:n.state[a],to:r}),n.state[a]=r}),i&&Nr(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function Zy(t,e){return Le(t,Gw),t.state=Le({},t.state,e),typeof t.handleStateChanged=="function"&&Nr(t)&&t.on("statechanged",t.handleStateChanged),t}var rl=function(e){return typeof e!="string"?e:e.replace(/./,function(n){return n.toLowerCase()})},Ne=function(e){return typeof e!="string"?e:e.replace(/./,function(n){return n.toUpperCase()})},$w=function(e,n){return Ne(e)===Ne(n)};function we(){for(var t={},e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach(function(r){!r||Hi(r,function(a,s){if(!As(a)){t[s]=a;return}As(t[s])||(t[s]={}),t[s]=we(t[s],a)})}),t}var qw=function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(i){return i in this.map_},e.delete=function(i){var r=this.has(i);return delete this.map_[i],r},e.set=function(i,r){return this.map_[i]=r,this},e.forEach=function(i,r){for(var a in this.map_)i.call(r,this.map_[a],a,this)},t}(),Kw=D.Map?D.Map:qw,Xw=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(i){return i in this.set_},e.delete=function(i){var r=this.has(i);return delete this.set_[i],r},e.add=function(i){return this.set_[i]=1,this},e.forEach=function(i,r){for(var a in this.set_)i.call(r,a,a,this)},t}(),Yf=D.Set?D.Set:Xw,V=function(){function t(n,i,r){if(!n&&this.play?this.player_=n=this:this.player_=n,this.isDisposed_=!1,this.parentComponent_=null,this.options_=we({},this.options_),i=this.options_=we(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var a=n&&n.id&&n.id()||"no_player";this.id_=a+"_component_"+hn()}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.evented!==!1&&(Qf(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Zy(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Yf,this.setIntervalIds_=new Yf,this.rafIds_=new Yf,this.namedRafs_=new Kw,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(r),i.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(i){return i?(this.options_=we(this.options_,i),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(i,r,a){return fe(i,r,a)},e.localize=function(i,r,a){a===void 0&&(a=i);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),u=o&&o[s],l=s&&s.split("-")[0],c=o&&o[l],m=a;return u&&u[i]?m=u[i]:c&&c[i]&&(m=c[i]),r&&(m=m.replace(/\{(\d+)\}/g,function(f,_){var b=r[_-1],S=b;return typeof b=="undefined"&&(S=f),S})),m},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(i){return this.childIndex_[i]},e.getChild=function(i){if(!!i)return this.childNameIndex_[i]},e.getDescendant=function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];r=r.reduce(function(u,l){return u.concat(l)},[]);for(var s=this,o=0;o<r.length;o++)if(s=s.getChild(r[o]),!s||!s.getChild)return;return s},e.addChild=function(i,r,a){r===void 0&&(r={}),a===void 0&&(a=this.children_.length);var s,o;if(typeof i=="string"){o=Ne(i);var u=r.componentClass||o;r.name=o;var l=t.getComponent(u);if(!l)throw new Error("Component "+u+" does not exist");if(typeof l!="function")return null;s=new l(this.player_||this,r)}else s=i;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(a,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Ne(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[rl(o)]=s),typeof s.el=="function"&&s.el()){var c=null;this.children_[a+1]&&(this.children_[a+1].el_?c=this.children_[a+1].el_:zi(this.children_[a+1])&&(c=this.children_[a+1])),this.contentEl().insertBefore(s.el(),c)}return s},e.removeChild=function(i){if(typeof i=="string"&&(i=this.getChild(i)),!(!i||!this.children_)){for(var r=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===i){r=!0,this.children_.splice(a,1);break}if(!!r){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[Ne(i.name())]=null,this.childNameIndex_[rl(i.name())]=null;var s=i.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},e.initChildren=function(){var i=this,r=this.options_.children;if(r){var a=this.options_,s=function(c){var m=c.name,f=c.opts;if(a[m]!==void 0&&(f=a[m]),f!==!1){f===!0&&(f={}),f.playerOptions=i.options_.playerOptions;var _=i.addChild(m,f);_&&(i[m]=_)}},o,u=t.getComponent("Tech");Array.isArray(r)?o=r:o=Object.keys(r),o.concat(Object.keys(this.options_).filter(function(l){return!o.some(function(c){return typeof c=="string"?l===c:l===c.name})})).map(function(l){var c,m;return typeof l=="string"?(c=l,m=r[c]||i.options_[c]||{}):(c=l.name,m=l),{name:c,opts:m}}).filter(function(l){var c=t.getComponent(l.opts.componentClass||Ne(l.name));return c&&!u.isTech(c)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(i,r){if(r===void 0&&(r=!1),!!i){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(i);return}r?i.call(this):this.setTimeout(i,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach(function(r){r.call(this)},this),this.trigger("ready")},1)},e.$=function(i,r){return fn(i,r||this.contentEl())},e.$$=function(i,r){return Wy(i,r||this.contentEl())},e.hasClass=function(i){return Hn(this.el_,i)},e.addClass=function(i){Or(this.el_,i)},e.removeClass=function(i){Rs(this.el_,i)},e.toggleClass=function(i,r){My(this.el_,i,r)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(i){return Fy(this.el_,i)},e.setAttribute=function(i,r){Gi(this.el_,i,r)},e.removeAttribute=function(i){Xu(this.el_,i)},e.width=function(i,r){return this.dimension("width",i,r)},e.height=function(i,r){return this.dimension("height",i,r)},e.dimensions=function(i,r){this.width(i,!0),this.height(r)},e.dimension=function(i,r,a){if(r!==void 0){(r===null||r!==r)&&(r=0),(""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1?this.el_.style[i]=r:r==="auto"?this.el_.style[i]="":this.el_.style[i]=r+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[i],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Ne(i)],10)},e.currentDimension=function(i){var r=0;if(i!=="width"&&i!=="height")throw new Error("currentDimension only accepts width or height value");if(r=Ds(this.el_,i),r=parseFloat(r),r===0||isNaN(r)){var a="offset"+Ne(i);r=this.el_[a]}return r},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(i){this.player_&&(i.stopPropagation(),this.player_.handleKeyDown(i))},e.handleKeyPress=function(i){this.handleKeyDown(i)},e.emitTapEvents=function(){var i=0,r=null,a=10,s=200,o;this.on("touchstart",function(l){l.touches.length===1&&(r={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},i=D.performance.now(),o=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)o=!1;else if(r){var c=l.touches[0].pageX-r.pageX,m=l.touches[0].pageY-r.pageY,f=Math.sqrt(c*c+m*m);f>a&&(o=!1)}});var u=function(){o=!1};this.on("touchleave",u),this.on("touchcancel",u),this.on("touchend",function(l){if(r=null,o===!0){var c=D.performance.now()-i;c<s&&(l.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var i=Te(this.player(),this.player().reportUserActivity),r;this.on("touchstart",function(){i(),this.clearInterval(r),r=this.setInterval(i,250)});var a=function(o){i(),this.clearInterval(r)};this.on("touchmove",i),this.on("touchend",a),this.on("touchcancel",a)}},e.setTimeout=function(i,r){var a=this,s;return i=Te(this,i),this.clearTimersOnDispose_(),s=D.setTimeout(function(){a.setTimeoutIds_.has(s)&&a.setTimeoutIds_.delete(s),i()},r),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),D.clearTimeout(i)),i},e.setInterval=function(i,r){i=Te(this,i),this.clearTimersOnDispose_();var a=D.setInterval(i,r);return this.setIntervalIds_.add(a),a},e.clearInterval=function(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),D.clearInterval(i)),i},e.requestAnimationFrame=function(i){var r=this;if(!this.supportsRaf_)return this.setTimeout(i,1e3/60);this.clearTimersOnDispose_();var a;return i=Te(this,i),a=D.requestAnimationFrame(function(){r.rafIds_.has(a)&&r.rafIds_.delete(a),i()}),this.rafIds_.add(a),a},e.requestNamedAnimationFrame=function(i,r){var a=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),r=Te(this,r);var s=this.requestAnimationFrame(function(){r(),a.namedRafs_.has(i)&&a.namedRafs_.delete(i)});return this.namedRafs_.set(i,s),i}},e.cancelNamedAnimationFrame=function(i){!this.namedRafs_.has(i)||(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},e.cancelAnimationFrame=function(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),D.cancelAnimationFrame(i)),i):this.clearTimeout(i)},e.clearTimersOnDispose_=function(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(r){var a=r[0],s=r[1];i[a].forEach(function(o,u){return i[s](u)})}),i.clearingTimersOnDispose_=!1}))},t.registerComponent=function(i,r){if(typeof i!="string"||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var a=t.getComponent("Tech"),s=a&&a.isTech(r),o=t===r||t.prototype.isPrototypeOf(r.prototype);if(s||!o){var u;throw s?u="techs must be registered using Tech.registerTech()":u="must be a Component subclass",new Error('Illegal component, "'+i+'"; '+u+".")}i=Ne(i),t.components_||(t.components_={});var l=t.getComponent("Player");if(i==="Player"&&l&&l.players){var c=l.players,m=Object.keys(c);if(c&&m.length>0&&m.map(function(f){return c[f]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[i]=r,t.components_[rl(i)]=r,r},t.getComponent=function(i){if(!(!i||!t.components_))return t.components_[i]},t}();V.prototype.supportsRaf_=typeof D.requestAnimationFrame=="function"&&typeof D.cancelAnimationFrame=="function";V.registerComponent("Component",V);function Qw(t,e,n){if(typeof e!="number"||e<0||e>n)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}function e_(t,e,n,i){return Qw(t,i,n.length-1),n[i][e]}function Jf(t){var e;return t===void 0||t.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:t.length,start:e_.bind(null,"start",0,t),end:e_.bind(null,"end",1,t)},D.Symbol&&D.Symbol.iterator&&(e[D.Symbol.iterator]=function(){return(t||[]).values()}),e}function Wn(t,e){return Array.isArray(t)?Jf(t):t===void 0||e===void 0?Jf():Jf([[t,e]])}function t_(t,e){var n=0,i,r;if(!e)return 0;(!t||!t.length)&&(t=Wn(0,0));for(var a=0;a<t.length;a++)i=t.start(a),r=t.end(a),r>e&&(r=e),n+=r-i;return n/e}function vt(t){if(t instanceof vt)return t;typeof t=="number"?this.code=t:typeof t=="string"?this.message=t:Ar(t)&&(typeof t.code=="number"&&(this.code=t.code),Le(this,t)),this.message||(this.message=vt.defaultMessages[this.code]||"")}vt.prototype.code=0;vt.prototype.message="";vt.prototype.status=null;vt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];vt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ki=0;Ki<vt.errorTypes.length;Ki++)vt[vt.errorTypes[Ki]]=Ki,vt.prototype[vt.errorTypes[Ki]]=Ki;function Us(t){return t!=null&&typeof t.then=="function"}function dr(t){Us(t)&&t.then(null,function(e){})}var Zf=function(e){var n=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(i,r,a){return e[r]&&(i[r]=e[r]),i},{cues:e.cues&&Array.prototype.map.call(e.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})});return n},Yw=function(e){var n=e.$$("track"),i=Array.prototype.map.call(n,function(a){return a.track}),r=Array.prototype.map.call(n,function(a){var s=Zf(a.track);return a.src&&(s.src=a.src),s});return r.concat(Array.prototype.filter.call(e.textTracks(),function(a){return i.indexOf(a)===-1}).map(Zf))},Jw=function(e,n){return e.forEach(function(i){var r=n.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(function(a){return r.addCue(a)})}),n.textTracks()},r_={textTracksToJson:Yw,jsonToTextTracks:Jw,trackToJson_:Zf},eh="vjs-modal-dialog",Xi=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.close_=function(s){return a.close(s)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=fe("div",{className:eh+"-content"},{role:"document"}),a.descEl_=fe("p",{className:eh+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),jn(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return eh+" vjs-hidden "+t.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var r=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(r+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),r},n.open=function(){if(!this.opened_){var r=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!r.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&r.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=r.controls(),r.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(r){return typeof r=="boolean"&&this[r?"open":"close"](),this.opened_},n.close=function(){if(!!this.opened_){var r=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&r.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&r.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(r){if(typeof r=="boolean"){var a=this.closeable_=!!r,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(r){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),Vy(a,r),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var u=this.getChild("closeButton");u&&s.appendChild(u.el_)},n.empty=function(){this.trigger("beforemodalempty"),Vf(this.contentEl()),this.trigger("modalempty")},n.content=function(r){return typeof r!="undefined"&&(this.content_=r),this.content_},n.conditionalFocus_=function(){var r=z.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(r)||a===r)&&(this.previouslyActiveEl_=r,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(r){if(r.stopPropagation(),ae.isEventKey(r,"Escape")&&this.closeable()){r.preventDefault(),this.close();return}if(!!ae.isEventKey(r,"Tab")){for(var a=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,u=0;u<a.length;u++)if(s===a[u]){o=u;break}z.activeElement===this.el_&&(o=0),r.shiftKey&&o===0?(a[a.length-1].focus(),r.preventDefault()):!r.shiftKey&&o===a.length-1&&(a[0].focus(),r.preventDefault())}},n.focusableEls_=function(){var r=this.el_.querySelectorAll("*");return Array.prototype.filter.call(r,function(a){return(a instanceof D.HTMLAnchorElement||a instanceof D.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof D.HTMLInputElement||a instanceof D.HTMLSelectElement||a instanceof D.HTMLTextAreaElement||a instanceof D.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof D.HTMLIFrameElement||a instanceof D.HTMLObjectElement||a instanceof D.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},e}(V);Xi.prototype.options_={pauseOnOpen:!0,temporary:!0};V.registerComponent("ModalDialog",Xi);var Qi=function(t){$(e,t);function e(i){var r;i===void 0&&(i=[]),r=t.call(this)||this,r.tracks_=[],Object.defineProperty(re(r),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<i.length;a++)r.addTrack(i[a]);return r}var n=e.prototype;return n.addTrack=function(r){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(r)===-1&&(this.tracks_.push(r),this.trigger({track:r,type:"addtrack",target:this})),r.labelchange_=function(){a.trigger({track:r,type:"labelchange",target:a})},Nr(r)&&r.addEventListener("labelchange",r.labelchange_)},n.removeTrack=function(r){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===r){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}!a||this.trigger({track:a,type:"removetrack",target:this})},n.getTrackById=function(r){for(var a=null,s=0,o=this.length;s<o;s++){var u=this[s];if(u.id===r){a=u;break}}return a},e}($e);Qi.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var Zw in Qi.prototype.allowedEvents_)Qi.prototype["on"+Zw]=null;var th=function(e,n){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||n.id===e[i].id||(e[i].enabled=!1)},ek=function(t){$(e,t);function e(i){var r;i===void 0&&(i=[]);for(var a=i.length-1;a>=0;a--)if(i[a].enabled){th(i,i[a]);break}return r=t.call(this,i)||this,r.changing_=!1,r}var n=e.prototype;return n.addTrack=function(r){var a=this;r.enabled&&th(this,r),t.prototype.addTrack.call(this,r),!!r.addEventListener&&(r.enabledChange_=function(){a.changing_||(a.changing_=!0,th(a,r),a.changing_=!1,a.trigger("change"))},r.addEventListener("enabledchange",r.enabledChange_))},n.removeTrack=function(r){t.prototype.removeTrack.call(this,r),r.removeEventListener&&r.enabledChange_&&(r.removeEventListener("enabledchange",r.enabledChange_),r.enabledChange_=null)},e}(Qi),rh=function(e,n){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||n.id===e[i].id||(e[i].selected=!1)},tk=function(t){$(e,t);function e(i){var r;i===void 0&&(i=[]);for(var a=i.length-1;a>=0;a--)if(i[a].selected){rh(i,i[a]);break}return r=t.call(this,i)||this,r.changing_=!1,Object.defineProperty(re(r),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),r}var n=e.prototype;return n.addTrack=function(r){var a=this;r.selected&&rh(this,r),t.prototype.addTrack.call(this,r),!!r.addEventListener&&(r.selectedChange_=function(){a.changing_||(a.changing_=!0,rh(a,r),a.changing_=!1,a.trigger("change"))},r.addEventListener("selectedchange",r.selectedChange_))},n.removeTrack=function(r){t.prototype.removeTrack.call(this,r),r.removeEventListener&&r.selectedChange_&&(r.removeEventListener("selectedchange",r.selectedChange_),r.selectedChange_=null)},e}(Qi),n_=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.addTrack=function(r){var a=this;t.prototype.addTrack.call(this,r),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),r.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(r.kind)===-1&&r.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(r){t.prototype.removeTrack.call(this,r),r.removeEventListener&&(this.queueChange_&&r.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&r.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Qi),rk=function(){function t(n){n===void 0&&(n=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var i=0,r=n.length;i<r;i++)this.addTrackElement_(n[i])}var e=t.prototype;return e.addTrackElement_=function(i){var r=this.trackElements_.length;""+r in this||Object.defineProperty(this,r,{get:function(){return this.trackElements_[r]}}),this.trackElements_.indexOf(i)===-1&&this.trackElements_.push(i)},e.getTrackElementByTrack_=function(i){for(var r,a=0,s=this.trackElements_.length;a<s;a++)if(i===this.trackElements_[a].track){r=this.trackElements_[a];break}return r},e.removeTrackElement_=function(i){for(var r=0,a=this.trackElements_.length;r<a;r++)if(i===this.trackElements_[r]){this.trackElements_[r].track&&typeof this.trackElements_[r].track.off=="function"&&this.trackElements_[r].track.off(),typeof this.trackElements_[r].off=="function"&&this.trackElements_[r].off(),this.trackElements_.splice(r,1);break}},t}(),i_=function(){function t(n){t.prototype.setCues_.call(this,n),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(i){var r=this.length||0,a=0,s=i.length;this.cues_=i,this.length_=i.length;var o=function(l){""+l in this||Object.defineProperty(this,""+l,{get:function(){return this.cues_[l]}})};if(r<s)for(a=r;a<s;a++)o.call(this,a)},e.getCueById=function(i){for(var r=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===i){r=o;break}}return r},t}(),nk={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ik={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ak={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},a_={disabled:"disabled",hidden:"hidden",showing:"showing"},nh=function(t){$(e,t);function e(n){var i;n===void 0&&(n={}),i=t.call(this)||this;var r={id:n.id||"vjs_track_"+hn(),kind:n.kind||"",language:n.language||""},a=n.label||"",s=function(l){Object.defineProperty(re(i),l,{get:function(){return r[l]},set:function(){}})};for(var o in r)s(o);return Object.defineProperty(re(i),"label",{get:function(){return a},set:function(l){l!==a&&(a=l,this.trigger("labelchange"))}}),i}return e}($e),ih=function(e){var n=["protocol","hostname","port","pathname","search","hash","host"],i=z.createElement("a");i.href=e;for(var r={},a=0;a<n.length;a++)r[n[a]]=i[n[a]];return r.protocol==="http:"&&(r.host=r.host.replace(/:80$/,"")),r.protocol==="https:"&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=D.location.protocol),r.host||(r.host=D.location.host),r},s_=function(e){if(!e.match(/^https?:\/\//)){var n=z.createElement("a");n.href=e,e=n.href}return e},ah=function(e){if(typeof e=="string"){var n=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,i=n.exec(e);if(i)return i.pop().toLowerCase()}return""},nl=function(e,n){n===void 0&&(n=D.location);var i=ih(e),r=i.protocol===":"?n.protocol:i.protocol,a=r+i.host!==n.protocol+n.host;return a},sk=Object.freeze({__proto__:null,parseUrl:ih,getAbsoluteURL:s_,getFileExtension:ah,isCrossOrigin:nl}),o_=function(e,n){var i=new D.WebVTT.Parser(D,D.vttjs,D.WebVTT.StringDecoder()),r=[];i.oncue=function(a){n.addCue(a)},i.onparsingerror=function(a){r.push(a)},i.onflush=function(){n.trigger({type:"loadeddata",target:n})},i.parse(e),r.length>0&&(D.console&&D.console.groupCollapsed&&D.console.groupCollapsed("Text Track parsing errors for "+n.src),r.forEach(function(a){return ue.error(a)}),D.console&&D.console.groupEnd&&D.console.groupEnd()),i.flush()},u_=function(e,n){var i={uri:e},r=nl(e);r&&(i.cors=r);var a=n.tech_.crossOrigin()==="use-credentials";a&&(i.withCredentials=a),Zv(i,Te(this,function(s,o,u){if(s)return ue.error(s,o);n.loaded_=!0,typeof D.WebVTT!="function"?n.tech_&&n.tech_.any(["vttjsloaded","vttjserror"],function(l){if(l.type==="vttjserror"){ue.error("vttjs failed to load, stopping trying to process "+n.src);return}return o_(u,n)}):o_(u,n)}))},Bs=function(t){$(e,t);function e(i){var r;if(i===void 0&&(i={}),!i.tech)throw new Error("A tech was not provided.");var a=we(i,{kind:ak[i.kind]||"subtitles",language:i.language||i.srclang||""}),s=a_[a.mode]||"disabled",o=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(s="hidden"),r=t.call(this,a)||this,r.tech_=a.tech,r.cues_=[],r.activeCues_=[],r.preload_=r.tech_.preloadTextTracks!==!1;var u=new i_(r.cues_),l=new i_(r.activeCues_),c=!1,m=Te(re(r),function(){!this.tech_.isReady_||this.tech_.isDisposed()||(this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1))}),f=function(){r.tech_.off("timeupdate",m)};return r.tech_.one("dispose",f),s!=="disabled"&&r.tech_.on("timeupdate",m),Object.defineProperties(re(r),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(b){!a_[b]||s!==b&&(s=b,!this.preload_&&s!=="disabled"&&this.cues.length===0&&u_(this.src,this),this.tech_.off("timeupdate",m),s!=="disabled"&&this.tech_.on("timeupdate",m),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return l;for(var b=this.tech_.currentTime(),S=[],v=0,x=this.cues.length;v<x;v++){var C=this.cues[v];(C.startTime<=b&&C.endTime>=b||C.startTime===C.endTime&&C.startTime<=b&&C.startTime+.5>=b)&&S.push(C)}if(c=!1,S.length!==this.activeCues_.length)c=!0;else for(var k=0;k<S.length;k++)this.activeCues_.indexOf(S[k])===-1&&(c=!0);return this.activeCues_=S,l.setCues_(this.activeCues_),l},set:function(){}}}),a.src?(r.src=a.src,r.preload_||(r.loaded_=!0),(r.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&u_(r.src,re(r))):r.loaded_=!0,r}var n=e.prototype;return n.addCue=function(r){var a=r;if(D.vttjs&&!(r instanceof D.vttjs.VTTCue)){a=new D.vttjs.VTTCue(r.startTime,r.endTime,r.text);for(var s in r)s in a||(a[s]=r[s]);a.id=r.id,a.originalCue_=r}for(var o=this.tech_.textTracks(),u=0;u<o.length;u++)o[u]!==this&&o[u].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},n.removeCue=function(r){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===r||s.originalCue_&&s.originalCue_===r){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},e}(nh);Bs.prototype.allowedEvents_={cuechange:"cuechange"};var l_=function(t){$(e,t);function e(n){var i;n===void 0&&(n={});var r=we(n,{kind:ik[n.kind]||""});i=t.call(this,r)||this;var a=!1;return Object.defineProperty(re(i),"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),r.enabled&&(i.enabled=r.enabled),i.loaded_=!0,i}return e}(nh),d_=function(t){$(e,t);function e(n){var i;n===void 0&&(n={});var r=we(n,{kind:nk[n.kind]||""});i=t.call(this,r)||this;var a=!1;return Object.defineProperty(re(i),"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),r.selected&&(i.selected=r.selected),i}return e}(nh),c_=0,ok=1,f_=2,uk=3,Yi=function(t){$(e,t);function e(n){var i;n===void 0&&(n={}),i=t.call(this)||this;var r,a=new Bs(n);return i.kind=a.kind,i.src=a.src,i.srclang=a.language,i.label=a.label,i.default=a.default,Object.defineProperties(re(i),{readyState:{get:function(){return r}},track:{get:function(){return a}}}),r=c_,a.addEventListener("loadeddata",function(){r=f_,i.trigger({type:"load",target:re(i)})}),i}return e}($e);Yi.prototype.allowedEvents_={load:"load"};Yi.NONE=c_;Yi.LOADING=ok;Yi.LOADED=f_;Yi.ERROR=uk;var Vt={audio:{ListClass:ek,TrackClass:l_,capitalName:"Audio"},video:{ListClass:tk,TrackClass:d_,capitalName:"Video"},text:{ListClass:n_,TrackClass:Bs,capitalName:"Text"}};Object.keys(Vt).forEach(function(t){Vt[t].getterName=t+"Tracks",Vt[t].privateName=t+"Tracks_"});var Ji={remoteText:{ListClass:n_,TrackClass:Bs,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:rk,TrackClass:Yi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},yt=Ht({},Vt,Ji);Ji.names=Object.keys(Ji);Vt.names=Object.keys(Vt);yt.names=[].concat(Ji.names).concat(Vt.names);function lk(t,e,n,i,r){r===void 0&&(r={});var a=t.textTracks();r.kind=e,n&&(r.label=n),i&&(r.language=i),r.tech=t;var s=new yt.text.TrackClass(r);return a.addTrack(s),s}var Se=function(t){$(e,t);function e(i,r){var a;return i===void 0&&(i={}),r===void 0&&(r=function(){}),i.reportTouchActivity=!1,a=t.call(this,null,i,r)||this,a.onDurationChange_=function(s){return a.onDurationChange(s)},a.trackProgress_=function(s){return a.trackProgress(s)},a.trackCurrentTime_=function(s){return a.trackCurrentTime(s)},a.stopTrackingCurrentTime_=function(s){return a.stopTrackingCurrentTime(s)},a.disposeSourceHandler_=function(s){return a.disposeSourceHandler(s)},a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),yt.names.forEach(function(s){var o=yt[s];i&&i[o.getterName]&&(a[o.privateName]=i[o.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){i["native"+s+"Tracks"]===!1&&(a["featuresNative"+s+"Tracks"]=!1)}),i.nativeCaptions===!1||i.nativeTextTracks===!1?a.featuresNativeTextTracks=!1:(i.nativeCaptions===!0||i.nativeTextTracks===!0)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=i.preloadTextTracks!==!1,a.autoRemoteTextTracks_=new yt.text.ListClass,a.initTrackListeners(),i.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}var n=e.prototype;return n.triggerSourceset=function(r){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(r)},1)}),this.trigger({src:r,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(r){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Te(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(r){this.duration_=this.duration()},n.buffered=function(){return Wn(0,0)},n.bufferedPercent=function(){return t_(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Vt.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},n.clearTracks=function(r){var a=this;r=[].concat(r),r.forEach(function(s){for(var o=a[s+"Tracks"]()||[],u=o.length;u--;){var l=o[u];s==="text"&&a.removeRemoteTextTrack(l),o.removeTrack(l)}})},n.cleanupAutoTextTracks=function(){for(var r=this.autoRemoteTextTracks_||[],a=r.length;a--;){var s=r[a];this.removeRemoteTextTrack(s)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(r){return r!==void 0&&(this.error_=new vt(r),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?Wn(0,0):Wn()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var r=this;Vt.names.forEach(function(a){var s=Vt[a],o=function(){r.trigger(a+"trackchange")},u=r[s.getterName]();u.addEventListener("removetrack",o),u.addEventListener("addtrack",o),r.on("dispose",function(){u.removeEventListener("removetrack",o),u.removeEventListener("addtrack",o)})})},n.addWebVttScript_=function(){var r=this;if(!D.WebVTT)if(z.body.contains(this.el())){if(!this.options_["vtt.js"]&&As(o0)&&Object.keys(o0).length>0){this.trigger("vttjsloaded");return}var a=z.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){r.trigger("vttjsloaded")},a.onerror=function(){r.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),D.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var r=this,a=this.textTracks(),s=this.remoteTextTracks(),o=function(f){return a.addTrack(f.track)},u=function(f){return a.removeTrack(f.track)};s.on("addtrack",o),s.on("removetrack",u),this.addWebVttScript_();var l=function(){return r.trigger("texttrackchange")},c=function(){l();for(var f=0;f<a.length;f++){var _=a[f];_.removeEventListener("cuechange",l),_.mode==="showing"&&_.addEventListener("cuechange",l)}};c(),a.addEventListener("change",c),a.addEventListener("addtrack",c),a.addEventListener("removetrack",c),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",u),a.removeEventListener("change",c),a.removeEventListener("addtrack",c),a.removeEventListener("removetrack",c);for(var m=0;m<a.length;m++){var f=a[m];f.removeEventListener("cuechange",l)}})},n.addTextTrack=function(r,a,s){if(!r)throw new Error("TextTrack kind is required but was not provided");return lk(this,r,a,s)},n.createRemoteTextTrack=function(r){var a=we(r,{tech:this});return new Ji.remoteTextEl.TrackClass(a)},n.addRemoteTextTrack=function(r,a){var s=this;r===void 0&&(r={});var o=this.createRemoteTextTrack(r);return a!==!0&&a!==!1&&(ue.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),a!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},n.removeRemoteTextTrack=function(r){var a=this.remoteTextTrackEls().getTrackElementByTrack_(r);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(r),this.autoRemoteTextTracks_.removeTrack(r)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var r=this.options_.Promise||D.Promise;if(r)return r.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(r,a){return e.canPlayType(r.type)},e.isTech=function(r){return r.prototype instanceof e||r instanceof e||r===e},e.registerTech=function(r,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+r+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return r=Ne(r),e.techs_[r]=a,e.techs_[rl(r)]=a,r!=="Tech"&&e.defaultTechOrder_.push(r),a},e.getTech=function(r){if(!!r){if(e.techs_&&e.techs_[r])return e.techs_[r];if(r=Ne(r),D&&D.videojs&&D.videojs[r])return ue.warn("The "+r+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),D.videojs[r]}},e}(V);yt.names.forEach(function(t){var e=yt[t];Se.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Se.prototype.featuresVolumeControl=!0;Se.prototype.featuresMuteControl=!0;Se.prototype.featuresFullscreenResize=!1;Se.prototype.featuresPlaybackRate=!1;Se.prototype.featuresProgressEvents=!1;Se.prototype.featuresSourceset=!1;Se.prototype.featuresTimeupdateEvents=!1;Se.prototype.featuresNativeTextTracks=!1;Se.withSourceHandlers=function(t){t.registerSourceHandler=function(n,i){var r=t.sourceHandlers;r||(r=t.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,n)},t.canPlayType=function(n){for(var i=t.sourceHandlers||[],r,a=0;a<i.length;a++)if(r=i[a].canPlayType(n),r)return r;return""},t.selectSourceHandler=function(n,i){for(var r=t.sourceHandlers||[],a,s=0;s<r.length;s++)if(a=r[s].canHandleSource(n,i),a)return r[s];return null},t.canPlaySource=function(n,i){var r=t.selectSourceHandler(n,i);return r?r.canHandleSource(n,i):""};var e=["seekable","seeking","duration"];e.forEach(function(n){var i=this[n];typeof i=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(n){var i=t.selectSourceHandler(n,this.options_);i||(t.nativeSourceHandler?i=t.nativeSourceHandler:ue.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==t.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=i.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};V.registerComponent("Tech",Se);Se.registerTech("Tech",Se);Se.defaultTechOrder_=[];var zn={},sh={},il={};function dk(t,e){zn[t]=zn[t]||[],zn[t].push(e)}function ck(t,e,n){t.setTimeout(function(){return Gn(e,zn[e.type],n,t)},1)}function fk(t,e){t.forEach(function(n){return n.setTech&&n.setTech(e)})}function hk(t,e,n){return t.reduceRight(oh(n),e[n]())}function pk(t,e,n,i){return e[n](t.reduce(oh(n),i))}function h_(t,e,n,i){i===void 0&&(i=null);var r="call"+Ne(n),a=t.reduce(oh(r),i),s=a===il,o=s?null:e[n](a);return vk(t,n,o,s),o}var mk={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},gk={setCurrentTime:1,setMuted:1,setVolume:1},p_={play:1,pause:1};function oh(t){return function(e,n){return e===il?il:n[t]?n[t](e):e}}function vk(t,e,n,i){for(var r=t.length-1;r>=0;r--){var a=t[r];a[e]&&a[e](i,n)}}function yk(t){sh[t.id()]=null}function _k(t,e){var n=sh[t.id()],i=null;if(n==null)return i=e(t),sh[t.id()]=[[e,i]],i;for(var r=0;r<n.length;r++){var a=n[r],s=a[0],o=a[1];s===e&&(i=o)}return i===null&&(i=e(t),n.push([e,i])),i}function Gn(t,e,n,i,r,a){t===void 0&&(t={}),e===void 0&&(e=[]),r===void 0&&(r=[]),a===void 0&&(a=!1);var s=e,o=s[0],u=s.slice(1);if(typeof o=="string")Gn(t,zn[o],n,i,r,a);else if(o){var l=_k(i,o);if(!l.setSource)return r.push(l),Gn(t,u,n,i,r,a);l.setSource(Le({},t),function(c,m){if(c)return Gn(t,u,n,i,r,a);r.push(l),Gn(m,t.type===m.type?u:zn[m.type],n,i,r,a)})}else u.length?Gn(t,u,n,i,r,a):a?n(t,r):Gn(t,zn["*"],n,i,r,!0)}var Tk={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},al=function(e){e===void 0&&(e="");var n=ah(e),i=Tk[n.toLowerCase()];return i||""},Sk=function(e,n){if(!n)return"";if(e.cache_.source.src===n&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(o){return o.src===n});if(i.length)return i[0].type;for(var r=e.$$("source"),a=0;a<r.length;a++){var s=r[a];if(s.type&&s.src&&s.src===n)return s.type}return al(n)},xk=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(i){i=t(i),Array.isArray(i)?n=n.concat(i):Ar(i)&&n.push(i)}),e=n}else typeof e=="string"&&e.trim()?e=[m_({src:e})]:Ar(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[m_(e)]:e=[];return e};function m_(t){if(!t.type){var e=al(t.src);e&&(t.type=e)}return t}var bk=function(t){$(e,t);function e(n,i,r){var a,s=we({createEl:!1},i);if(a=t.call(this,n,s,r)||this,!i.playerOptions.sources||i.playerOptions.sources.length===0)for(var o=0,u=i.playerOptions.techOrder;o<u.length;o++){var l=Ne(u[o]),c=Se.getTech(l);if(l||(c=V.getComponent(l)),c&&c.isSupported()){n.loadTech_(l);break}}else n.src(i.playerOptions.sources);return a}return e}(V);V.registerComponent("MediaLoader",bk);var sl=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.handleMouseOver_=function(s){return a.handleMouseOver(s)},a.handleMouseOut_=function(s){return a.handleMouseOut(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.emitTapEvents(),a.enable(),a}var n=e.prototype;return n.createEl=function(r,a,s){r===void 0&&(r="div"),a===void 0&&(a={}),s===void 0&&(s={}),a=Le({className:this.buildCSSClass(),tabIndex:0},a),r==="button"&&ue.error("Creating a ClickableComponent with an HTML element of "+r+" is not supported; use a Button instead."),s=Le({role:"button"},s),this.tabIndex_=a.tabIndex;var o=fe(r,a,s);return o.appendChild(fe("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},n.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},n.createControlTextEl=function(r){return this.controlTextEl_=fe("span",{className:"vjs-control-text"},{"aria-live":"polite"}),r&&r.appendChild(this.controlTextEl_),this.controlText(this.controlText_,r),this.controlTextEl_},n.controlText=function(r,a){if(a===void 0&&(a=this.el()),r===void 0)return this.controlText_||"Need Text";var s=this.localize(r);this.controlText_=r,jn(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",s)},n.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_!="undefined"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_!="undefined"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(r){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(r){ae.isEventKey(r,"Space")||ae.isEventKey(r,"Enter")?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,r)},e}(V);V.registerComponent("ClickableComponent",sl);var Ek=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.update(),a.update_=function(s){return a.update(s)},i.on("posterchange",a.update_),a}var n=e.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),t.prototype.dispose.call(this)},n.createEl=function(){var r=fe("div",{className:"vjs-poster",tabIndex:-1});return r},n.update=function(r){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},n.setSrc=function(r){var a="";r&&(a='url("'+r+'")'),this.el_.style.backgroundImage=a},n.handleClick=function(r){if(!!this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((Os||Ls)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?dr(this.player_.play()):this.player_.pause()}},e}(sl);V.registerComponent("PosterImage",Ek);var Wt="#222",g_="#ccc",Ck={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function uh(t,e){var n;if(t.length===4)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else if(t.length===7)n=t.slice(1);else throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function lh(t,e,n){try{t.style[e]=n}catch{return}}var wk=function(t){$(e,t);function e(i,r,a){var s;s=t.call(this,i,r,a)||this;var o=function(l){return s.updateDisplay(l)};return i.on("loadstart",function(u){return s.toggleDisplay(u)}),i.on("texttrackchange",o),i.on("loadedmetadata",function(u){return s.preselectTrack(u)}),i.ready(Te(re(s),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks){this.hide();return}i.on("fullscreenchange",o),i.on("playerresize",o),D.addEventListener("orientationchange",o),i.on("dispose",function(){return D.removeEventListener("orientationchange",o)});for(var u=this.options_.playerOptions.tracks||[],l=0;l<u.length;l++)this.player_.addRemoteTextTrack(u[l],!0);this.preselectTrack()})),s}var n=e.prototype;return n.preselectTrack=function(){for(var r={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,u,l,c=0;c<a.length;c++){var m=a[c];s&&s.enabled&&s.language&&s.language===m.language&&m.kind in r?m.kind===s.kind?l=m:l||(l=m):s&&!s.enabled?(l=null,o=null,u=null):m.default&&(m.kind==="descriptions"&&!o?o=m:m.kind in r&&!u&&(u=m))}l?l.mode="showing":u?u.mode="showing":o&&(o.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){typeof D.WebVTT=="function"&&D.WebVTT.processCues(D,[],this.el_)},n.updateDisplay=function(){var r=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<r.length;++o){var u=r[o];u.mode==="showing"&&s.push(u)}this.updateForTrack(s);return}for(var l=null,c=null,m=r.length;m--;){var f=r[m];f.mode==="showing"&&(f.kind==="descriptions"?l=f:c=f)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):l&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(l))},n.updateDisplayState=function(r){for(var a=this.player_.textTrackSettings.getValues(),s=r.activeCues,o=s.length;o--;){var u=s[o];if(!!u){var l=u.displayState;if(a.color&&(l.firstChild.style.color=a.color),a.textOpacity&&lh(l.firstChild,"color",uh(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(l.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&lh(l.firstChild,"backgroundColor",uh(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?lh(l,"backgroundColor",uh(a.windowColor,a.windowOpacity)):l.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?l.firstChild.style.textShadow="2px 2px 3px "+Wt+", 2px 2px 4px "+Wt+", 2px 2px 5px "+Wt:a.edgeStyle==="raised"?l.firstChild.style.textShadow="1px 1px "+Wt+", 2px 2px "+Wt+", 3px 3px "+Wt:a.edgeStyle==="depressed"?l.firstChild.style.textShadow="1px 1px "+g_+", 0 1px "+g_+", -1px -1px "+Wt+", 0 -1px "+Wt:a.edgeStyle==="uniform"&&(l.firstChild.style.textShadow="0 0 4px "+Wt+", 0 0 4px "+Wt+", 0 0 4px "+Wt+", 0 0 4px "+Wt)),a.fontPercent&&a.fontPercent!==1){var c=D.parseFloat(l.style.fontSize);l.style.fontSize=c*a.fontPercent+"px",l.style.height="auto",l.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=Ck[a.fontFamily])}}},n.updateForTrack=function(r){if(Array.isArray(r)||(r=[r]),!(typeof D.WebVTT!="function"||r.every(function(_){return!_.activeCues}))){for(var a=[],s=0;s<r.length;++s)for(var o=r[s],u=0;u<o.activeCues.length;++u)a.push(o.activeCues[u]);D.WebVTT.processCues(D,a,this.el_);for(var l=0;l<r.length;++l){for(var c=r[l],m=0;m<c.activeCues.length;++m){var f=c.activeCues[m].displayState;Or(f,"vjs-text-track-cue"),Or(f,"vjs-text-track-cue-"+(c.language?c.language:l)),c.language&&Gi(f,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},e}(V);V.registerComponent("TextTrackDisplay",wk);var kk=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.createEl=function(){var r=this.player_.isAudio(),a=this.localize(r?"Audio Player":"Video Player"),s=fe("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(V);V.registerComponent("LoadingSpinner",kk);var Jt=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.createEl=function(r,a,s){a===void 0&&(a={}),s===void 0&&(s={}),r="button",a=Le({className:this.buildCSSClass()},a),s=Le({type:"button"},s);var o=fe(r,a,s);return o.appendChild(fe("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},n.addChild=function(r,a){a===void 0&&(a={});var s=this.constructor.name;return ue.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),V.prototype.addChild.call(this,r,a)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(r){if(ae.isEventKey(r,"Space")||ae.isEventKey(r,"Enter")){r.stopPropagation();return}t.prototype.handleKeyDown.call(this,r)},e}(sl);V.registerComponent("Button",Jt);var v_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.mouseused_=!1,a.on("mousedown",function(s){return a.handleMouseDown(s)}),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(r){var a=this.player_.play();if(this.mouseused_&&r.clientX&&r.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;dr(a),this.player_.tech(!0)&&!((Os||Ls)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),u=o&&o.getChild("playToggle");if(!u){this.player_.tech(!0).focus();return}var l=function(){return u.focus()};Us(a)?a.then(l,function(){}):this.setTimeout(l,1)},n.handleKeyDown=function(r){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,r)},n.handleMouseDown=function(r){this.mouseused_=!0},e}(Jt);v_.prototype.controlText_="Play Video";V.registerComponent("BigPlayButton",v_);var Pk=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.controlText(r&&r.controlText||a.localize("Close")),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(r){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(r){ae.isEventKey(r,"Esc")?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,r)},e}(Jt);V.registerComponent("CloseButton",Pk);var y_=function(t){$(e,t);function e(i,r){var a;return r===void 0&&(r={}),a=t.call(this,i,r)||this,r.replay=r.replay===void 0||r.replay,a.on(i,"play",function(s){return a.handlePlay(s)}),a.on(i,"pause",function(s){return a.handlePause(s)}),r.replay&&a.on(i,"ended",function(s){return a.handleEnded(s)}),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(r){this.player_.paused()?dr(this.player_.play()):this.player_.pause()},n.handleSeeked=function(r){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(r):this.handlePlay(r)},n.handlePlay=function(r){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(r){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(r){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},e}(Jt);y_.prototype.controlText_="Play";V.registerComponent("PlayToggle",y_);var __=function(e,n){e=e<0?0:e;var i=Math.floor(e%60),r=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(n/60%60),o=Math.floor(n/3600);return(isNaN(e)||e===1/0)&&(a=r=i="-"),a=a>0||o>0?a+":":"",r=((a||s>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,a+r+i},dh=__;function Ik(t){dh=t}function Ak(){dh=__}function Zi(t,e){return e===void 0&&(e=t),dh(t,e)}var ea=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.on(i,["timeupdate","ended"],function(s){return a.updateContent(s)}),a.updateTextNode_(),a}var n=e.prototype;return n.createEl=function(){var r=this.buildCSSClass(),a=t.prototype.createEl.call(this,"div",{className:r+" vjs-time-control vjs-control"}),s=fe("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return a.appendChild(s),this.contentEl_=fe("span",{className:r+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},n.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},n.updateTextNode_=function(r){var a=this;r===void 0&&(r=0),r=Zi(r),this.formattedTime_!==r&&(this.formattedTime_=r,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!!a.contentEl_){var s=a.textNode_;s&&a.contentEl_.firstChild!==s&&(s=null,ue.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=z.createTextNode(a.formattedTime_),!!a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_))}}))},n.updateContent=function(r){},e}(V);ea.prototype.labelText_="Time";ea.prototype.controlText_="Time";V.registerComponent("TimeDisplay",ea);var ch=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(r){var a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},e}(ea);ch.prototype.labelText_="Current Time";ch.prototype.controlText_="Current Time";V.registerComponent("CurrentTimeDisplay",ch);var fh=function(t){$(e,t);function e(i,r){var a;a=t.call(this,i,r)||this;var s=function(u){return a.updateContent(u)};return a.on(i,"durationchange",s),a.on(i,"loadstart",s),a.on(i,"loadedmetadata",s),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(r){var a=this.player_.duration();this.updateTextNode_(a)},e}(ea);fh.prototype.labelText_="Duration";fh.prototype.controlText_="Duration";V.registerComponent("DurationDisplay",fh);var Dk=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.createEl=function(){var r=t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=t.prototype.createEl.call(this,"div"),s=t.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(s),r.appendChild(a),r},e}(V);V.registerComponent("TimeDivider",Dk);var hh=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.on(i,"durationchange",function(s){return a.updateContent(s)}),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var r=t.prototype.createEl.call(this);return r.insertBefore(fe("span",{},{"aria-hidden":!0},"-"),this.contentEl_),r},n.updateContent=function(r){if(typeof this.player_.duration()=="number"){var a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}},e}(ea);hh.prototype.labelText_="Remaining Time";hh.prototype.controlText_="Remaining Time";V.registerComponent("RemainingTimeDisplay",hh);var Lk=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.updateShowing(),a.on(a.player(),"durationchange",function(s){return a.updateShowing(s)}),a}var n=e.prototype;return n.createEl=function(){var r=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=fe("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(fe("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(z.createTextNode(this.localize("LIVE"))),r.appendChild(this.contentEl_),r},n.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},n.updateShowing=function(r){this.player().duration()===1/0?this.show():this.hide()},e}(V);V.registerComponent("LiveDisplay",Lk);var T_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(s){return a.updateLiveEdgeStatus(s)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}var n=e.prototype;return n.createEl=function(){var r=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=fe("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),r.appendChild(this.textEl_),r},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,t.prototype.dispose.call(this)},e}(Jt);T_.prototype.controlText_="Seek to live, currently playing live";V.registerComponent("SeekToLive",T_);var ol=function(e,n,i){return e=Number(e),Math.min(i,Math.max(n,isNaN(e)?n:e))},ph=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.handleMouseDown_=function(s){return a.handleMouseDown(s)},a.handleMouseUp_=function(s){return a.handleMouseUp(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleMouseMove_=function(s){return a.handleMouseMove(s)},a.update_=function(s){return a.update(s)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}var n=e.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(!!this.enabled()){var r=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(r,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),a.className=a.className+" vjs-slider",a=Le({tabIndex:0},a),s=Le({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),t.prototype.createEl.call(this,r,a,s)},n.handleMouseDown=function(r){var a=this.bar.el_.ownerDocument;r.type==="mousedown"&&r.preventDefault(),r.type==="touchstart"&&!Lr&&r.preventDefault(),Uy(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(r)},n.handleMouseMove=function(r){},n.handleMouseUp=function(){var r=this.bar.el_.ownerDocument;By(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var r=this;if(!(!this.el_||!this.bar)){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=r.vertical()?"height":"width";r.bar.el().style[s]=(a*100).toFixed(2)+"%"})),a}},n.getProgress=function(){return Number(ol(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(r){var a=Qu(this.el_,r);return this.vertical()?a.y:a.x},n.handleKeyDown=function(r){ae.isEventKey(r,"Left")||ae.isEventKey(r,"Down")?(r.preventDefault(),r.stopPropagation(),this.stepBack()):ae.isEventKey(r,"Right")||ae.isEventKey(r,"Up")?(r.preventDefault(),r.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,r)},n.handleClick=function(r){r.stopPropagation(),r.preventDefault()},n.vertical=function(r){if(r===void 0)return this.vertical_||!1;this.vertical_=!!r,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(V);V.registerComponent("Slider",ph);var mh=function(e,n){return ol(e/n*100,0,100).toFixed(2)+"%"},Ok=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.partEls_=[],a.on(i,"progress",function(s){return a.update(s)}),a}var n=e.prototype;return n.createEl=function(){var r=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=fe("span",{className:"vjs-control-text"}),s=fe("span",{textContent:this.localize("Loaded")}),o=z.createTextNode(": ");return this.percentageEl_=fe("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),r.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),r},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},n.update=function(r){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=a.player_.liveTracker,o=a.player_.buffered(),u=s&&s.isLive()?s.seekableEnd():a.player_.duration(),l=a.player_.bufferedEnd(),c=a.partEls_,m=mh(l,u);a.percent_!==m&&(a.el_.style.width=m,jn(a.percentageEl_,m),a.percent_=m);for(var f=0;f<o.length;f++){var _=o.start(f),b=o.end(f),S=c[f];S||(S=a.el_.appendChild(fe()),c[f]=S),!(S.dataset.start===_&&S.dataset.end===b)&&(S.dataset.start=_,S.dataset.end=b,S.style.left=mh(_,l),S.style.width=mh(b-_,l))}for(var v=c.length;v>o.length;v--)a.el_.removeChild(c[v-1]);c.length=o.length})},e}(V);V.registerComponent("LoadProgressBar",Ok);var Rk=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.update=Mr(Te(re(a),a.update),Yt),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(r,a,s){var o=Ms(this.el_),u=$i(this.player_.el()),l=r.width*a;if(!(!u||!o)){var c=r.left-u.left+l,m=r.width-l+(u.right-r.right),f=o.width/2;c<f?f+=f-c:m<f&&(f=m),f<0?f=0:f>o.width&&(f=o.width),f=Math.round(f),this.el_.style.right="-"+f+"px",this.write(s)}},n.write=function(r){jn(this.el_,r)},n.updateTime=function(r,a,s,o){var u=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var l,c=u.player_.duration();if(u.player_.liveTracker&&u.player_.liveTracker.isLive()){var m=u.player_.liveTracker.liveWindow(),f=m-a*m;l=(f<1?"":"-")+Zi(f,m)}else l=Zi(s,c);u.update(r,a,l),o&&o()})},e}(V);V.registerComponent("TimeTooltip",Rk);var gh=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.update=Mr(Te(re(a),a.update),Yt),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(r,a){var s=this.getChild("timeTooltip");if(!!s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(r,a,o)}},e}(V);gh.prototype.options_={children:[]};!wt&&!Dr&&gh.prototype.options_.children.push("timeTooltip");V.registerComponent("PlayProgressBar",gh);var S_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.update=Mr(Te(re(a),a.update),Yt),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(r,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(r,a,o,function(){s.el_.style.left=r.width*a+"px"})},e}(V);S_.prototype.options_={children:["timeTooltip"]};V.registerComponent("MouseTimeDisplay",S_);var ul=5,x_=12,vh=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.setEventHandlers_(),a}var n=e.prototype;return n.setEventHandlers_=function(){var r=this;this.update_=Te(this,this.update),this.update=Mr(this.update_,Yt),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return r.enableInterval_(a)},this.disableIntervalHandler_=function(a){return r.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in z&&"visibilityState"in z&&this.on(z,"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(r){z.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(r)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Yt))},n.disableInterval_=function(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&r&&r.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(r){var a=this;if(z.visibilityState!=="hidden"){var s=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),u=a.player_.liveTracker,l=a.player_.duration();u&&u.isLive()&&(l=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),a.percent_=s),(a.currentTime_!==o||a.duration_!==l)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Zi(o,l),Zi(l,l)],"{1} of {2}")),a.currentTime_=o,a.duration_=l),a.bar&&a.bar.update($i(a.el()),a.getProgress())}),s}},n.userSeek_=function(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(r)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var r=this.getCurrentTime_(),a,s=this.player_.liveTracker;return s&&s.isLive()?(a=(r-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=r/this.player_.duration(),a},n.handleMouseDown=function(r){!Ns(r)||(r.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,r))},n.handleMouseMove=function(r){if(!!Ns(r)){var a,s=this.calculateDistance(r),o=this.player_.liveTracker;if(!o||!o.isLive())a=s*this.player_.duration(),a===this.player_.duration()&&(a=a-.1);else{if(s>=.99){o.seekToLiveEdge();return}var u=o.seekableStart(),l=o.liveCurrentTime();if(a=u+s*o.liveWindow(),a>=l&&(a=l),a<=u&&(a=u+.1),a===1/0)return}this.userSeek_(a)}},n.enable=function(){t.prototype.enable.call(this);var r=this.getChild("mouseTimeDisplay");!r||r.show()},n.disable=function(){t.prototype.disable.call(this);var r=this.getChild("mouseTimeDisplay");!r||r.hide()},n.handleMouseUp=function(r){t.prototype.handleMouseUp.call(this,r),r&&r.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?dr(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+ul)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-ul)},n.handleAction=function(r){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(r){var a=this.player_.liveTracker;if(ae.isEventKey(r,"Space")||ae.isEventKey(r,"Enter"))r.preventDefault(),r.stopPropagation(),this.handleAction(r);else if(ae.isEventKey(r,"Home"))r.preventDefault(),r.stopPropagation(),this.userSeek_(0);else if(ae.isEventKey(r,"End"))r.preventDefault(),r.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(ae(r))){r.preventDefault(),r.stopPropagation();var s=(ae.codes[ae(r)]-ae.codes["0"])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else ae.isEventKey(r,"PgDn")?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()-ul*x_)):ae.isEventKey(r,"PgUp")?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()+ul*x_)):t.prototype.handleKeyDown.call(this,r)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in z&&"visibilityState"in z&&this.off(z,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(ph);vh.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!wt&&!Dr&&vh.prototype.options_.children.splice(1,0,"mouseTimeDisplay");V.registerComponent("SeekBar",vh);var b_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.handleMouseMove=Mr(Te(re(a),a.handleMouseMove),Yt),a.throttledHandleMouseSeek=Mr(Te(re(a),a.handleMouseSeek),Yt),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.handleMouseDownHandler_=function(s){return a.handleMouseDown(s)},a.enable(),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(r){var a=this.getChild("seekBar");if(!!a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!(!s&&!o)){var u=a.el(),l=Ms(u),c=Qu(u,r).x;c=ol(c,0,1),o&&o.update(l,c),s&&s.update(l,a.getProgress())}}},n.handleMouseSeek=function(r){var a=this.getChild("seekBar");a&&a.handleMouseMove(r)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var r=this.getChild("seekBar");this.player_.scrubbing(!1),r.videoWasPlaying&&dr(this.player_.play())}},n.enable=function(){this.children().forEach(function(r){return r.enable&&r.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var r=this.el_.ownerDocument;this.off(r,"mousemove",this.throttledHandleMouseSeek),this.off(r,"touchmove",this.throttledHandleMouseSeek),this.off(r,"mouseup",this.handleMouseUpHandler_),this.off(r,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(r){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(r),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(r){var a=this.getChild("seekBar");a&&a.handleMouseUp(r),this.removeListenersAddedOnMousedownAndTouchstart()},e}(V);b_.prototype.options_={children:["seekBar"]};V.registerComponent("ProgressControl",b_);var E_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.on(i,["enterpictureinpicture","leavepictureinpicture"],function(s){return a.handlePictureInPictureChange(s)}),a.on(i,["disablepictureinpicturechanged","loadedmetadata"],function(s){return a.handlePictureInPictureEnabledChange(s)}),a.disable(),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){z.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},n.handlePictureInPictureChange=function(r){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(r){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Jt);E_.prototype.controlText_="Picture-in-Picture";V.registerComponent("PictureInPictureToggle",E_);var C_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.on(i,"fullscreenchange",function(s){return a.handleFullscreenChange(s)}),z[i.fsApi_.fullscreenEnabled]===!1&&a.disable(),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(r){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(r){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Jt);C_.prototype.controlText_="Fullscreen";V.registerComponent("FullscreenToggle",C_);var Mk=function(e,n){n.tech_&&!n.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(n,"loadstart",function(){n.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Nk=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.createEl=function(){var r=t.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return r.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),r},e}(V);V.registerComponent("VolumeLevel",Nk);var Fk=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.update=Mr(Te(re(a),a.update),Yt),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(r,a,s,o){if(!s){var u=$i(this.el_),l=$i(this.player_.el()),c=r.width*a;if(!l||!u)return;var m=r.left-l.left+c,f=r.width-c+(l.right-r.right),_=u.width/2;m<_?_+=_-m:f<_&&(_=f),_<0?_=0:_>u.width&&(_=u.width),this.el_.style.right="-"+_+"px"}this.write(o+"%")},n.write=function(r){jn(this.el_,r)},n.updateVolume=function(r,a,s,o,u){var l=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){l.update(r,a,s,o.toFixed(0)),u&&u()})},e}(V);V.registerComponent("VolumeLevelTooltip",Fk);var w_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.update=Mr(Te(re(a),a.update),Yt),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(r,a,s){var o=this,u=100*a;this.getChild("volumeLevelTooltip").updateVolume(r,a,s,u,function(){s?o.el_.style.bottom=r.height*a+"px":o.el_.style.left=r.width*a+"px"})},e}(V);w_.prototype.options_={children:["volumeLevelTooltip"]};V.registerComponent("MouseVolumeLevelDisplay",w_);var ll=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.on("slideractive",function(s){return a.updateLastVolume_(s)}),a.on(i,"volumechange",function(s){return a.updateARIAAttributes(s)}),i.ready(function(){return a.updateARIAAttributes()}),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(r){!Ns(r)||t.prototype.handleMouseDown.call(this,r)},n.handleMouseMove=function(r){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=$i(s),u=this.vertical(),l=Qu(s,r);l=u?l.y:l.x,l=ol(l,0,1),a.update(o,l,u)}!Ns(r)||(this.checkMuted(),this.player_.volume(this.calculateDistance(r)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(r){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},n.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},n.updateLastVolume_=function(){var r=this,a=this.player_.volume();this.one("sliderinactive",function(){r.player_.volume()===0&&r.player_.lastVolume_(a)})},e}(ph);ll.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!wt&&!Dr&&ll.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");ll.prototype.playerEvent="volumechange";V.registerComponent("VolumeBar",ll);var k_=function(t){$(e,t);function e(i,r){var a;return r===void 0&&(r={}),r.vertical=r.vertical||!1,(typeof r.volumeBar=="undefined"||As(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical),a=t.call(this,i,r)||this,Mk(re(a),i),a.throttledHandleMouseMove=Mr(Te(re(a),a.handleMouseMove),Yt),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.on("mousedown",function(s){return a.handleMouseDown(s)}),a.on("touchstart",function(s){return a.handleMouseDown(s)}),a.on("mousemove",function(s){return a.handleMouseMove(s)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}var n=e.prototype;return n.createEl=function(){var r="vjs-volume-horizontal";return this.options_.vertical&&(r="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+r})},n.handleMouseDown=function(r){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(r){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(r){this.volumeBar.handleMouseMove(r)},e}(V);k_.prototype.options_={children:["volumeBar"]};V.registerComponent("VolumeControl",k_);var Uk=function(e,n){n.tech_&&!n.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(n,"loadstart",function(){n.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},P_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,Uk(re(a),i),a.on(i,["loadstart","volumechange"],function(s){return a.update(s)}),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(r){var a=this.player_.volume(),s=this.player_.lastVolume_();if(a===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(r){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var r=this.player_.volume(),a=3;wt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),r===0||this.player_.muted()?a=0:r<.33?a=1:r<.67&&(a=2);for(var s=0;s<4;s++)Rs(this.el_,"vjs-vol-"+s);Or(this.el_,"vjs-vol-"+a)},n.updateControlText_=function(){var r=this.player_.muted()||this.player_.volume()===0,a=r?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},e}(Jt);P_.prototype.controlText_="Mute";V.registerComponent("MuteToggle",P_);var I_=function(t){$(e,t);function e(i,r){var a;return r===void 0&&(r={}),typeof r.inline!="undefined"?r.inline=r.inline:r.inline=!0,(typeof r.volumeControl=="undefined"||As(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline),a=t.call(this,i,r)||this,a.handleKeyPressHandler_=function(s){return a.handleKeyPress(s)},a.on(i,["loadstart"],function(s){return a.volumePanelState_(s)}),a.on(a.muteToggle,"keyup",function(s){return a.handleKeyPress(s)}),a.on(a.volumeControl,"keyup",function(s){return a.handleVolumeControlKeyUp(s)}),a.on("keydown",function(s){return a.handleKeyPress(s)}),a.on("mouseover",function(s){return a.handleMouseOver(s)}),a.on("mouseout",function(s){return a.handleMouseOut(s)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}var n=e.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var r="vjs-volume-panel-horizontal";return this.options_.inline||(r="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+r})},n.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(r){ae.isEventKey(r,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(r){this.addClass("vjs-hover"),Lt(z,"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(r){this.removeClass("vjs-hover"),ut(z,"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(r){ae.isEventKey(r,"Esc")&&this.handleMouseOut()},e}(V);I_.prototype.options_={children:["muteToggle","volumeControl"]};V.registerComponent("VolumePanel",I_);var A_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,r&&(a.menuButton_=r.menuButton),a.focusedChild_=-1,a.on("keydown",function(s){return a.handleKeyDown(s)}),a.boundHandleBlur_=function(s){return a.handleBlur(s)},a.boundHandleTapClick_=function(s){return a.handleTapClick(s)},a}var n=e.prototype;return n.addEventListenerForItem=function(r){r instanceof V&&(this.on(r,"blur",this.boundHandleBlur_),this.on(r,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(r){r instanceof V&&(this.off(r,"blur",this.boundHandleBlur_),this.off(r,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(r){typeof r=="string"&&(r=this.getChild(r)),this.removeEventListenerForItem(r),t.prototype.removeChild.call(this,r)},n.addItem=function(r){var a=this.addChild(r);a&&this.addEventListenerForItem(a)},n.createEl=function(){var r=this.options_.contentElType||"ul";this.contentEl_=fe(r,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),Lt(a,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),a},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},n.handleBlur=function(r){var a=r.relatedTarget||z.activeElement;if(!this.children().some(function(o){return o.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},n.handleTapClick=function(r){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(o){return o.el()===r.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},n.handleKeyDown=function(r){ae.isEventKey(r,"Left")||ae.isEventKey(r,"Down")?(r.preventDefault(),r.stopPropagation(),this.stepForward()):(ae.isEventKey(r,"Right")||ae.isEventKey(r,"Up"))&&(r.preventDefault(),r.stopPropagation(),this.stepBack())},n.stepForward=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_+1),this.focus(r)},n.stepBack=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_-1),this.focus(r)},n.focus=function(r){r===void 0&&(r=0);var a=this.children().slice(),s=a.length&&a[0].hasClass("vjs-menu-title");s&&a.shift(),a.length>0&&(r<0?r=0:r>=a.length&&(r=a.length-1),this.focusedChild_=r,a[r].el_.focus())},e}(V);V.registerComponent("Menu",A_);var yh=function(t){$(e,t);function e(i,r){var a;r===void 0&&(r={}),a=t.call(this,i,r)||this,a.menuButton_=new Jt(i,r),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Jt.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+s,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var o=function(l){return a.handleClick(l)};return a.handleMenuKeyUp_=function(u){return a.handleMenuKeyUp(u)},a.on(a.menuButton_,"tap",o),a.on(a.menuButton_,"click",o),a.on(a.menuButton_,"keydown",function(u){return a.handleKeyDown(u)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),Lt(z,"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(u){return a.handleMouseLeave(u)}),a.on("keydown",function(u){return a.handleSubmenuKeyDown(u)}),a}var n=e.prototype;return n.update=function(){var r=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=r,this.addChild(r),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var r=new A_(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=fe("li",{className:"vjs-menu-title",textContent:Ne(this.options_.title),tabIndex:-1}),s=new V(this.player_,{el:a});r.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)r.addItem(this.items[o]);return r},n.createItems=function(){},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var r="vjs-menu-button";this.options_.inline===!0?r+="-inline":r+="-popup";var a=Jt.prototype.buildCSSClass();return"vjs-menu-button "+r+" "+a+" "+t.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var r="vjs-menu-button";return this.options_.inline===!0?r+="-inline":r+="-popup","vjs-menu-button "+r+" "+t.prototype.buildCSSClass.call(this)},n.controlText=function(r,a){return a===void 0&&(a=this.menuButton_.el()),this.menuButton_.controlText(r,a)},n.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},n.handleClick=function(r){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(r){this.removeClass("vjs-hover"),ut(z,"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(r){ae.isEventKey(r,"Esc")||ae.isEventKey(r,"Tab")?(this.buttonPressed_&&this.unpressButton(),ae.isEventKey(r,"Tab")||(r.preventDefault(),this.menuButton_.focus())):(ae.isEventKey(r,"Up")||ae.isEventKey(r,"Down"))&&(this.buttonPressed_||(r.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(r){(ae.isEventKey(r,"Esc")||ae.isEventKey(r,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(r){this.handleSubmenuKeyDown(r)},n.handleSubmenuKeyDown=function(r){(ae.isEventKey(r,"Esc")||ae.isEventKey(r,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),ae.isEventKey(r,"Tab")||(r.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),wt&&Oy())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(V);V.registerComponent("MenuButton",yh);var _h=function(t){$(e,t);function e(n,i){var r,a=i.tracks;if(r=t.call(this,n,i)||this,r.items.length<=1&&r.hide(),!a)return re(r);var s=Te(re(r),r.update);return a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),a.addEventListener("labelchange",s),r.player_.on("ready",s),r.player_.on("dispose",function(){a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s),a.removeEventListener("labelchange",s)}),r}return e}(yh);V.registerComponent("TrackButton",_h);var Bk=["Tab","Esc","Up","Down","Right","Left"],js=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.selectable=r.selectable,a.isSelected_=r.selected||!1,a.multiSelectable=r.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}var n=e.prototype;return n.createEl=function(r,a,s){this.nonIconControl=!0;var o=t.prototype.createEl.call(this,"li",Le({className:"vjs-menu-item",tabIndex:-1},a),s);return o.replaceChild(fe("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},n.handleKeyDown=function(r){Bk.some(function(a){return ae.isEventKey(r,a)})||t.prototype.handleKeyDown.call(this,r)},n.handleClick=function(r){this.selected(!0)},n.selected=function(r){this.selectable&&(r?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(sl);V.registerComponent("MenuItem",js);var Hs=function(t){$(e,t);function e(i,r){var a,s=r.track,o=i.textTracks();r.label=s.label||s.language||"Unknown",r.selected=s.mode==="showing",a=t.call(this,i,r)||this,a.track=s,a.kinds=(r.kinds||[r.kind||a.track.kind]).filter(Boolean);var u=function(){for(var f=arguments.length,_=new Array(f),b=0;b<f;b++)_[b]=arguments[b];a.handleTracksChange.apply(re(a),_)},l=function(){for(var f=arguments.length,_=new Array(f),b=0;b<f;b++)_[b]=arguments[b];a.handleSelectedLanguageChange.apply(re(a),_)};if(i.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",l),a.on("dispose",function(){i.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",l)}),o.onchange===void 0){var c;a.on(["tap","click"],function(){if(typeof D.Event!="object")try{c=new D.Event("change")}catch{}c||(c=z.createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return a.handleTracksChange(),a}var n=e.prototype;return n.handleClick=function(r){var a=this.track,s=this.player_.textTracks();if(t.prototype.handleClick.call(this,r),!!s)for(var o=0;o<s.length;o++){var u=s[o];this.kinds.indexOf(u.kind)!==-1&&(u===a?u.mode!=="showing"&&(u.mode="showing"):u.mode!=="disabled"&&(u.mode="disabled"))}},n.handleTracksChange=function(r){var a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)},n.handleSelectedLanguageChange=function(r){if(this.track.mode==="showing"){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(js);V.registerComponent("TextTrackMenuItem",Hs);var D_=function(t){$(e,t);function e(i,r){return r.track={player:i,kind:r.kind,kinds:r.kinds,default:!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.label?r.track.label=r.label:r.track.label=r.kinds.join(" and ")+" off",r.selectable=!0,r.multiSelectable=!1,t.call(this,i,r)||this}var n=e.prototype;return n.handleTracksChange=function(r){for(var a=this.player().textTracks(),s=!0,o=0,u=a.length;o<u;o++){var l=a[o];if(this.options_.kinds.indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},n.handleSelectedLanguageChange=function(r){for(var a=this.player().textTracks(),s=!0,o=0,u=a.length;o<u;o++){var l=a[o];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Hs);V.registerComponent("OffTextTrackMenuItem",D_);var ta=function(t){$(e,t);function e(i,r){return r===void 0&&(r={}),r.tracks=i.textTracks(),t.call(this,i,r)||this}var n=e.prototype;return n.createItems=function(r,a){r===void 0&&(r=[]),a===void 0&&(a=Hs);var s;this.label_&&(s=this.label_+" off"),r.push(new D_(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var u=0;u<o.length;u++){var l=o[u];if(this.kinds_.indexOf(l.kind)>-1){var c=new a(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+l.kind+"-menu-item"),r.push(c)}}return r},e}(_h);V.registerComponent("TextTrackButton",ta);var L_=function(t){$(e,t);function e(i,r){var a,s=r.track,o=r.cue,u=i.currentTime();return r.selectable=!0,r.multiSelectable=!1,r.label=o.text,r.selected=o.startTime<=u&&u<o.endTime,a=t.call(this,i,r)||this,a.track=s,a.cue=o,s.addEventListener("cuechange",Te(re(a),a.update)),a}var n=e.prototype;return n.handleClick=function(r){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(r){var a=this.cue,s=this.player_.currentTime();this.selected(a.startTime<=s&&s<a.endTime)},e}(js);V.registerComponent("ChaptersTrackMenuItem",L_);var Th=function(t){$(e,t);function e(i,r,a){return t.call(this,i,r,a)||this}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},n.update=function(r){(!this.track_||r&&(r.type==="addtrack"||r.type==="removetrack"))&&this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},n.setTrack=function(r){if(this.track_!==r){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=r,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var r=this.player_.textTracks()||[],a=r.length-1;a>=0;a--){var s=r[a];if(s.kind===this.kind_)return s}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ne(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},n.createItems=function(){var r=[];if(!this.track_)return r;var a=this.track_.cues;if(!a)return r;for(var s=0,o=a.length;s<o;s++){var u=a[s],l=new L_(this.player_,{track:this.track_,cue:u});r.push(l)}return r},e}(ta);Th.prototype.kind_="chapters";Th.prototype.controlText_="Chapters";V.registerComponent("ChaptersButton",Th);var Sh=function(t){$(e,t);function e(i,r,a){var s;s=t.call(this,i,r,a)||this;var o=i.textTracks(),u=Te(re(s),s.handleTracksChange);return o.addEventListener("change",u),s.on("dispose",function(){o.removeEventListener("change",u)}),s}var n=e.prototype;return n.handleTracksChange=function(r){for(var a=this.player().textTracks(),s=!1,o=0,u=a.length;o<u;o++){var l=a[o];if(l.kind!==this.kind_&&l.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(ta);Sh.prototype.kind_="descriptions";Sh.prototype.controlText_="Descriptions";V.registerComponent("DescriptionsButton",Sh);var xh=function(t){$(e,t);function e(i,r,a){return t.call(this,i,r,a)||this}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(ta);xh.prototype.kind_="subtitles";xh.prototype.controlText_="Subtitles";V.registerComponent("SubtitlesButton",xh);var bh=function(t){$(e,t);function e(i,r){var a;return r.track={player:i,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1,r.name="CaptionSettingsMenuItem",a=t.call(this,i,r)||this,a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+r.kind+" settings dialog"),a}var n=e.prototype;return n.handleClick=function(r){this.player().getChild("textTrackSettings").open()},e}(Hs);V.registerComponent("CaptionSettingsMenuItem",bh);var Eh=function(t){$(e,t);function e(i,r,a){return t.call(this,i,r,a)||this}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new bh(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,r)},e}(ta);Eh.prototype.kind_="captions";Eh.prototype.controlText_="Captions";V.registerComponent("CaptionsButton",Eh);var O_=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.createEl=function(r,a,s){var o=t.prototype.createEl.call(this,r,a,s),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(u.appendChild(fe("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(fe("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(Hs);V.registerComponent("SubsCapsMenuItem",O_);var Ch=function(t){$(e,t);function e(i,r){var a;return r===void 0&&(r={}),a=t.call(this,i,r)||this,a.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(Ne(a.label_)),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new bh(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r=t.prototype.createItems.call(this,r,O_),r},e}(ta);Ch.prototype.kinds_=["captions","subtitles"];Ch.prototype.controlText_="Subtitles";V.registerComponent("SubsCapsButton",Ch);var R_=function(t){$(e,t);function e(i,r){var a,s=r.track,o=i.audioTracks();r.label=s.label||s.language||"Unknown",r.selected=s.enabled,a=t.call(this,i,r)||this,a.track=s,a.addClass("vjs-"+s.kind+"-menu-item");var u=function(){for(var c=arguments.length,m=new Array(c),f=0;f<c;f++)m[f]=arguments[f];a.handleTracksChange.apply(re(a),m)};return o.addEventListener("change",u),a.on("dispose",function(){o.removeEventListener("change",u)}),a}var n=e.prototype;return n.createEl=function(r,a,s){var o=t.prototype.createEl.call(this,r,a,s),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(u.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),o},n.handleClick=function(r){t.prototype.handleClick.call(this,r),this.track.enabled=!0},n.handleTracksChange=function(r){this.selected(this.track.enabled)},e}(js);V.registerComponent("AudioTrackMenuItem",R_);var M_=function(t){$(e,t);function e(i,r){return r===void 0&&(r={}),r.tracks=i.audioTracks(),t.call(this,i,r)||this}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(r){r===void 0&&(r=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];r.push(new R_(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return r},e}(_h);M_.prototype.controlText_="Audio Track";V.registerComponent("AudioTrackButton",M_);var wh=function(t){$(e,t);function e(i,r){var a,s=r.rate,o=parseFloat(s,10);return r.label=s,r.selected=o===i.playbackRate(),r.selectable=!0,r.multiSelectable=!1,a=t.call(this,i,r)||this,a.label=s,a.rate=o,a.on(i,"ratechange",function(u){return a.update(u)}),a}var n=e.prototype;return n.handleClick=function(r){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(r){this.selected(this.player().playbackRate()===this.rate)},e}(js);wh.prototype.contentElType="button";V.registerComponent("PlaybackRateMenuItem",wh);var N_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(i,"loadstart",function(s){return a.updateVisibility(s)}),a.on(i,"ratechange",function(s){return a.updateLabel(s)}),a.on(i,"playbackrateschange",function(s){return a.handlePlaybackRateschange(s)}),a}var n=e.prototype;return n.createEl=function(){var r=t.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=fe("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),r.appendChild(this.labelEl_),r},n.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var r=this.playbackRates(),a=[],s=r.length-1;s>=0;s--)a.push(new wh(this.player(),{rate:r[s]+"x"}));return a},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(r){for(var a=this.player().playbackRate(),s=this.playbackRates(),o=s[0],u=0;u<s.length;u++)if(s[u]>a){o=s[u];break}this.player().playbackRate(o)},n.handlePlaybackRateschange=function(r){this.update()},n.playbackRates=function(){var r=this.player();return r.playbackRates&&r.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(r){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(r){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(yh);N_.prototype.controlText_="Playback Rate";V.registerComponent("PlaybackRateMenuButton",N_);var F_=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(r,a,s){return r===void 0&&(r="div"),a===void 0&&(a={}),s===void 0&&(s={}),a.className||(a.className=this.buildCSSClass()),t.prototype.createEl.call(this,r,a,s)},e}(V);V.registerComponent("Spacer",F_);var jk=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},e}(F_);V.registerComponent("CustomControlSpacer",jk);var dl=function(t){$(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(V);dl.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in z&&dl.prototype.options_.children.splice(dl.prototype.options_.children.length-1,0,"pictureInPictureToggle");V.registerComponent("ControlBar",dl);var U_=function(t){$(e,t);function e(i,r){var a;return a=t.call(this,i,r)||this,a.on(i,"error",function(s){return a.open(s)}),a}var n=e.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},n.content=function(){var r=this.player().error();return r?this.localize(r.message):""},e}(Xi);U_.prototype.options_=Ht({},Xi.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});V.registerComponent("ErrorDisplay",U_);var kh="vjs-text-track-settings",B_=["#000","Black"],j_=["#00F","Blue"],H_=["#0FF","Cyan"],V_=["#0F0","Green"],W_=["#F0F","Magenta"],z_=["#F00","Red"],G_=["#FFF","White"],$_=["#FF0","Yellow"],Ph=["1","Opaque"],Ih=["0.5","Semi-Transparent"],q_=["0","Transparent"],$n={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[B_,G_,z_,V_,j_,$_,W_,H_]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ph,Ih,q_]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[G_,B_,z_,V_,j_,$_,W_,H_]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ph,Ih]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[q_,Ih,Ph]}};$n.windowColor.options=$n.backgroundColor.options;function K_(t,e){if(e&&(t=e(t)),t&&t!=="none")return t}function Hk(t,e){var n=t.options[t.options.selectedIndex].value;return K_(n,e)}function Vk(t,e,n){if(!!e){for(var i=0;i<t.options.length;i++)if(K_(t.options[i].value,n)===e){t.selectedIndex=i;break}}}var Wk=function(t){$(e,t);function e(i,r){var a;return r.temporary=!1,a=t.call(this,i,r)||this,a.updateDisplay=a.updateDisplay.bind(re(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=fe("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),r.persistTextTrackSettings===void 0&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),Hi($n,function(s){a.on(a.$(s.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}var n=e.prototype;return n.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},n.createElSelect_=function(r,a,s){var o=this;a===void 0&&(a=""),s===void 0&&(s="label");var u=$n[r],l=u.id.replace("%s",this.id_),c=[a,l].join(" ").trim();return["<"+s+' id="'+l+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(u.label),"</"+s+">",'<select aria-labelledby="'+c+'">'].concat(u.options.map(function(m){var f=l+"-"+m[1].replace(/\W+/g,"");return['<option id="'+f+'" value="'+m[0]+'" ','aria-labelledby="'+c+" "+f+'">',o.localize(m[1]),"</option>"].join("")})).concat("</select>").join("")},n.createElFgColor_=function(){var r="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",r),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",r),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var r="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",r),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",r),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var r="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",r),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",r),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return fe("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return fe("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var r=this.localize("restore all settings to the default values");return fe("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+r+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+r+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var r=this;return Dw($n,function(a,s,o){var u=Hk(r.$(s.selector),s.parser);return u!==void 0&&(a[o]=u),a},{})},n.setValues=function(r){var a=this;Hi($n,function(s,o){Vk(a.$(s.selector),r[o],s.parser)})},n.setDefaults=function(){var r=this;Hi($n,function(a){var s=a.hasOwnProperty("default")?a.default:0;r.$(a.selector).selectedIndex=s})},n.restoreSettings=function(){var r;try{r=JSON.parse(D.localStorage.getItem(kh))}catch(a){ue.warn(a)}r&&this.setValues(r)},n.saveSettings=function(){if(!!this.options_.persistTextTrackSettings){var r=this.getValues();try{Object.keys(r).length?D.localStorage.setItem(kh,JSON.stringify(r)):D.localStorage.removeItem(kh)}catch(a){ue.warn(a)}}},n.updateDisplay=function(){var r=this.player_.getChild("textTrackDisplay");r&&r.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var r=this.player_.controlBar,a=r&&r.subsCapsButton,s=r&&r.captionsButton;a?a.focus():s&&s.focus()},e}(Xi);V.registerComponent("TextTrackSettings",Wk);var zk=function(t){$(e,t);function e(i,r){var a,s=r.ResizeObserver||D.ResizeObserver;r.ResizeObserver===null&&(s=!1);var o=we({createEl:!s,reportTouchActivity:!1},r);return a=t.call(this,i,o)||this,a.ResizeObserver=r.ResizeObserver||D.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=Vw(function(){a.resizeHandler()},100,!1,re(a)),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(i.el())):(a.loadListener_=function(){if(!(!a.el_||!a.el_.contentWindow)){var u=a.debouncedHandler_,l=a.unloadListener_=function(){ut(this,"resize",u),ut(this,"unload",l),l=null};Lt(a.el_.contentWindow,"unload",l),Lt(a.el_.contentWindow,"resize",u)}},a.one("load",a.loadListener_)),a}var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(V);V.registerComponent("ResizeManager",zk);var Gk={trackingThreshold:20,liveTolerance:15},$k=function(t){$(e,t);function e(i,r){var a,s=we(Gk,r,{createEl:!1});return a=t.call(this,i,s)||this,a.handleVisibilityChange_=function(o){return a.handleVisibilityChange(o)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(o){return a.handlePlay(o)},a.handleFirstTimeupdate_=function(o){return a.handleFirstTimeupdate(o)},a.handleSeeked_=function(o){return a.handleSeeked(o)},a.seekToLiveEdge_=function(o){return a.seekToLiveEdge(o)},a.reset_(),a.on(a.player_,"durationchange",function(o){return a.handleDurationchange(o)}),a.one(a.player_,"canplay",function(){return a.toggleTracking()}),Os&&"hidden"in z&&"visibilityState"in z&&a.on(z,"visibilitychange",a.handleVisibilityChange_),a}var n=e.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(z.hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var r=this.player_.seekable();if(!(!r||!r.length)){var a=Number(D.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),u=this.player_.currentTime(),l=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-u)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Yt),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var r=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&r>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var r=this.player_.seekable(),a=[],s=r?r.length:0;s--;)a.push(r.end(s));return a.length?a.sort()[a.length-1]:1/0},n.seekableStart=function(){for(var r=this.player_.seekable(),a=[],s=r?r.length:0;s--;)a.push(r.start(s));return a.length?a.sort()[0]:0},n.liveWindow=function(){var r=this.liveCurrentTime();return r===1/0?0:r-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var r=this.seekableEnd();return this.lastSeekEnd_!==-1&&r!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=r,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return typeof this.trackingInterval_=="number"},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(z,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),t.prototype.dispose.call(this)},e}(V);V.registerComponent("LiveTracker",$k);var Ah=function(e){var n=e.el();if(n.hasAttribute("src"))return e.triggerSourceset(n.src),!0;var i=e.$$("source"),r=[],a="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var o=i[s].src;o&&r.indexOf(o)===-1&&r.push(o)}return r.length?(r.length===1&&(a=r[0]),e.triggerSourceset(a),!0):!1},qk=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var n=z.createElement(this.nodeName.toLowerCase());n.innerHTML=e;for(var i=z.createDocumentFragment();n.childNodes.length;)i.appendChild(n.childNodes[0]);return this.innerText="",D.Element.prototype.appendChild.call(this,i),this.innerHTML}}),X_=function(e,n){for(var i={},r=0;r<e.length&&(i=Object.getOwnPropertyDescriptor(e[r],n),!(i&&i.set&&i.get));r++);return i.enumerable=!0,i.configurable=!0,i},Kk=function(e){return X_([e.el(),D.HTMLMediaElement.prototype,D.Element.prototype,qk],"innerHTML")},Q_=function(e){var n=e.el();if(!n.resetSourceWatch_){var i={},r=Kk(e),a=function(o){return function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var m=o.apply(n,l);return Ah(e),m}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){!n[s]||(i[s]=n[s],n[s]=a(i[s]))}),Object.defineProperty(n,"innerHTML",we(r,{set:a(r.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(i).forEach(function(s){n[s]=i[s]}),Object.defineProperty(n,"innerHTML",r)},e.one("sourceset",n.resetSourceWatch_)}},Xk=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?s_(D.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return D.Element.prototype.setAttribute.call(this,"src",e),e}}),Qk=function(e){return X_([e.el(),D.HTMLMediaElement.prototype,Xk],"src")},Yk=function(e){if(!!e.featuresSourceset){var n=e.el();if(!n.resetSourceset_){var i=Qk(e),r=n.setAttribute,a=n.load;Object.defineProperty(n,"src",we(i,{set:function(o){var u=i.set.call(n,o);return e.triggerSourceset(n.src),u}})),n.setAttribute=function(s,o){var u=r.call(n,s,o);return/src/i.test(s)&&e.triggerSourceset(n.src),u},n.load=function(){var s=a.call(n);return Ah(e)||(e.triggerSourceset(""),Q_(e)),s},n.currentSrc?e.triggerSourceset(n.currentSrc):Ah(e)||Q_(e),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=a,n.setAttribute=r,Object.defineProperty(n,"src",i),n.resetSourceWatch_&&n.resetSourceWatch_()}}}},Dh=function(e,n,i,r){r===void 0&&(r=!0);var a=function(u){return Object.defineProperty(e,n,{value:u,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var u=i();return a(u),u}};return r&&(s.set=a),Object.defineProperty(e,n,s)},X=function(t){$(e,t);function e(i,r){var a;a=t.call(this,i,r)||this;var s=i.source,o=!1;if(s&&(a.el_.currentSrc!==s.src||i.tag&&i.tag.initNetworkState_===3)?a.setSource(s):a.handleLateInit_(a.el_),i.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var u=a.el_.childNodes,l=u.length,c=[];l--;){var m=u[l],f=m.nodeName.toLowerCase();f==="track"&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(m),a.remoteTextTracks().addTrack(m.track),a.textTracks().addTrack(m.track),!o&&!a.el_.hasAttribute("crossorigin")&&nl(m.src)&&(o=!0)):c.push(m))}for(var _=0;_<c.length;_++)a.el_.removeChild(c[_])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&o&&ue.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),a.restoreMetadataTracksInIOSNativePlayer_(),(Vi||jf||ky)&&i.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}var n=e.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Yk(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var r=this.textTracks(),a,s=function(){a=[];for(var l=0;l<r.length;l++){var c=r[l];c.kind==="metadata"&&a.push({track:c,storedMode:c.mode})}};s(),r.addEventListener("change",s),this.on("dispose",function(){return r.removeEventListener("change",s)});var o=function u(){for(var l=0;l<a.length;l++){var c=a[l];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}r.removeEventListener("change",u)};this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",s),r.removeEventListener("change",o),r.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",s),r.addEventListener("change",s),r.removeEventListener("change",o)})},n.overrideNative_=function(r,a){var s=this;if(a===this["featuresNative"+r+"Tracks"]){var o=r.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(u){var l=s.el()[o+"Tracks"];l.removeEventListener(u,s[o+"TracksListeners_"][u])}),this["featuresNative"+r+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},n.overrideNativeAudioTracks=function(r){this.overrideNative_("Audio",r)},n.overrideNativeVideoTracks=function(r){this.overrideNative_("Video",r)},n.proxyNativeTracksForType_=function(r){var a=this,s=Vt[r],o=this.el()[s.getterName],u=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var l={change:function(f){var _={type:"change",target:u,currentTarget:u,srcElement:u};u.trigger(_),r==="text"&&a[Ji.remoteText.getterName]().trigger(_)},addtrack:function(f){u.addTrack(f.track)},removetrack:function(f){u.removeTrack(f.track)}},c=function(){for(var f=[],_=0;_<u.length;_++){for(var b=!1,S=0;S<o.length;S++)if(o[S]===u[_]){b=!0;break}b||f.push(u[_])}for(;f.length;)u.removeTrack(f.shift())};this[s.getterName+"Listeners_"]=l,Object.keys(l).forEach(function(m){var f=l[m];o.addEventListener(m,f),a.on("dispose",function(_){return o.removeEventListener(m,f)})}),this.on("loadstart",c),this.on("dispose",function(m){return a.off("loadstart",c)})}},n.proxyNativeTracks_=function(){var r=this;Vt.names.forEach(function(a){r.proxyNativeTracksForType_(a)})},n.createEl=function(){var r=this.options_.tag;if(!r||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(r){var a=r.cloneNode(!0);r.parentNode&&r.parentNode.insertBefore(a,r),e.disposeMediaElement(r),r=a}else{r=z.createElement("video");var s=this.options_.tag&&Rr(this.options_.tag),o=we({},s);(!Vi||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,Ny(r,Le(o,{id:this.options_.techId,class:"vjs-tech"}))}r.playerId=this.options_.playerId}typeof this.options_.preload!="undefined"&&Gi(r,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(r.disablePictureInPicture=this.options_.disablePictureInPicture);for(var u=["loop","muted","playsinline","autoplay"],l=0;l<u.length;l++){var c=u[l],m=this.options_[c];typeof m!="undefined"&&(m?Gi(r,c,c):Xu(r,c),r[c]=m)}return r},n.handleLateInit_=function(r){if(!(r.networkState===0||r.networkState===3)){if(r.readyState===0){var a=!1,s=function(){a=!0};this.on("loadstart",s);var o=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")});return}var u=["loadstart"];u.push("loadedmetadata"),r.readyState>=2&&u.push("loadeddata"),r.readyState>=3&&u.push("canplay"),r.readyState>=4&&u.push("canplaythrough"),this.ready(function(){u.forEach(function(l){this.trigger(l)},this)})}},n.setScrubbing=function(r){this.isScrubbing_=r},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(r){try{this.isScrubbing_&&this.el_.fastSeek&&Ku?this.el_.fastSeek(r):this.el_.currentTime=r}catch(a){ue(a,"Video is not ready. (Video.js)")}},n.duration=function(){var r=this;if(this.el_.duration===1/0&&Dr&&Lr&&this.el_.currentTime===0){var a=function s(){r.el_.currentTime>0&&(r.el_.duration===1/0&&r.trigger("durationchange"),r.off("timeupdate",s))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var r=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){r.off("webkitbeginfullscreen",s),r.off("webkitendfullscreen",a)})}},n.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var r=D.navigator&&D.navigator.userAgent||"";if(/Android/.test(r)||!/Chrome|Mac OS X 10.5/.test(r))return!0}return!1},n.enterFullScreen=function(){var r=this.el_;if(r.paused&&r.networkState<=r.HAVE_METADATA)dr(this.el_.play()),this.setTimeout(function(){r.pause();try{r.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{r.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},n.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.src=function(r){if(r===void 0)return this.el_.src;this.setSrc(r)},n.reset=function(){e.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(r){this.el_.controls=!!r},n.addTextTrack=function(r,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(r,a,s):t.prototype.addTextTrack.call(this,r,a,s)},n.createRemoteTextTrack=function(r){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,r);var a=z.createElement("track");return r.kind&&(a.kind=r.kind),r.label&&(a.label=r.label),(r.language||r.srclang)&&(a.srclang=r.language||r.srclang),r.default&&(a.default=r.default),r.id&&(a.id=r.id),r.src&&(a.src=r.src),a},n.addRemoteTextTrack=function(r,a){var s=t.prototype.addRemoteTextTrack.call(this,r,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},n.removeRemoteTextTrack=function(r){if(t.prototype.removeRemoteTextTrack.call(this,r),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)(r===a[s]||r===a[s].track)&&this.el().removeChild(a[s])},n.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var r={};return typeof this.el().webkitDroppedFrameCount!="undefined"&&typeof this.el().webkitDecodedFrameCount!="undefined"&&(r.droppedVideoFrames=this.el().webkitDroppedFrameCount,r.totalVideoFrames=this.el().webkitDecodedFrameCount),D.performance&&typeof D.performance.now=="function"?r.creationTime=D.performance.now():D.performance&&D.performance.timing&&typeof D.performance.timing.navigationStart=="number"&&(r.creationTime=D.Date.now()-D.performance.timing.navigationStart),r},e}(Se);Dh(X,"TEST_VID",function(){if(!!Wi()){var t=z.createElement("video"),e=z.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}});X.isSupported=function(){try{X.TEST_VID.volume=.5}catch{return!1}return!!(X.TEST_VID&&X.TEST_VID.canPlayType)};X.canPlayType=function(t){return X.TEST_VID.canPlayType(t)};X.canPlaySource=function(t,e){return X.canPlayType(t.type)};X.canControlVolume=function(){try{var t=X.TEST_VID.volume;return X.TEST_VID.volume=t/2+.1,t!==X.TEST_VID.volume}catch{return!1}};X.canMuteVolume=function(){try{var t=X.TEST_VID.muted;return X.TEST_VID.muted=!t,X.TEST_VID.muted?Gi(X.TEST_VID,"muted","muted"):Xu(X.TEST_VID,"muted","muted"),t!==X.TEST_VID.muted}catch{return!1}};X.canControlPlaybackRate=function(){if(Dr&&Lr&&Iy<58)return!1;try{var t=X.TEST_VID.playbackRate;return X.TEST_VID.playbackRate=t/2+.1,t!==X.TEST_VID.playbackRate}catch{return!1}};X.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(z.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(z.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(z.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(z.createElement("audio"),"innerHTML",{get:t,set:t})}catch{return!1}return!0};X.supportsNativeTextTracks=function(){return Ku||wt&&Lr};X.supportsNativeVideoTracks=function(){return!!(X.TEST_VID&&X.TEST_VID.videoTracks)};X.supportsNativeAudioTracks=function(){return!!(X.TEST_VID&&X.TEST_VID.audioTracks)};X.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(t){var e=t[0],n=t[1];Dh(X.prototype,e,function(){return X[n]()},!0)});X.prototype.movingMediaElementInDOM=!wt;X.prototype.featuresFullscreenResize=!0;X.prototype.featuresProgressEvents=!0;X.prototype.featuresTimeupdateEvents=!0;var cl;X.patchCanPlayType=function(){Ff>=4&&!Py&&!Lr&&(cl=X.TEST_VID&&X.TEST_VID.constructor.prototype.canPlayType,X.TEST_VID.constructor.prototype.canPlayType=function(t){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return t&&e.test(t)?"maybe":cl.call(this,t)})};X.unpatchCanPlayType=function(){var t=X.TEST_VID.constructor.prototype.canPlayType;return cl&&(X.TEST_VID.constructor.prototype.canPlayType=cl),t};X.patchCanPlayType();X.disposeMediaElement=function(t){if(!!t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};X.resetMediaElement=function(t){if(!!t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),typeof t.load=="function"&&function(){try{t.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){X.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){X.prototype["set"+Ne(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(t){X.prototype[t]=function(){return this.el_[t]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(t){X.prototype["set"+Ne(t)]=function(e){this.el_[t]=e}});["pause","load","play"].forEach(function(t){X.prototype[t]=function(){return this.el_[t]()}});Se.withSourceHandlers(X);X.nativeSourceHandler={};X.nativeSourceHandler.canPlayType=function(t){try{return X.TEST_VID.canPlayType(t)}catch{return""}};X.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return X.nativeSourceHandler.canPlayType(t.type);if(t.src){var n=ah(t.src);return X.nativeSourceHandler.canPlayType("video/"+n)}return""};X.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)};X.nativeSourceHandler.dispose=function(){};X.registerSourceHandler(X.nativeSourceHandler);Se.registerTech("Html5",X);var Y_=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Lh={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Oh=["tiny","xsmall","small","medium","large","xlarge","huge"],fl={};Oh.forEach(function(t){var e=t.charAt(0)==="x"?"x-"+t.substring(1):t;fl[t]="vjs-layout-"+e});var Jk={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Fe=function(t){$(e,t);function e(i,r,a){var s;if(i.id=i.id||r.id||"vjs_video_"+hn(),r=Le(e.getTagSettings(i),r),r.initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if(typeof i.closest=="function"){var o=i.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var u=i;u&&u.nodeType===1;){if(Rr(u).hasOwnProperty("lang")){r.language=u.getAttribute("lang");break}u=u.parentNode}if(s=t.call(this,null,r,a)||this,s.boundDocumentFullscreenChange_=function(f){return s.documentFullscreenChange_(f)},s.boundFullWindowOnEscKey_=function(f){return s.fullWindowOnEscKey(f)},s.boundUpdateStyleEl_=function(f){return s.updateStyleEl_(f)},s.boundApplyInitTime_=function(f){return s.applyInitTime_(f)},s.boundUpdateCurrentBreakpoint_=function(f){return s.updateCurrentBreakpoint_(f)},s.boundHandleTechClick_=function(f){return s.handleTechClick_(f)},s.boundHandleTechDoubleClick_=function(f){return s.handleTechDoubleClick_(f)},s.boundHandleTechTouchStart_=function(f){return s.handleTechTouchStart_(f)},s.boundHandleTechTouchMove_=function(f){return s.handleTechTouchMove_(f)},s.boundHandleTechTouchEnd_=function(f){return s.handleTechTouchEnd_(f)},s.boundHandleTechTap_=function(f){return s.handleTechTap_(f)},s.isFullscreen_=!1,s.log=by(s.id_),s.fsApi_=zu,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=i,s.tagAttributes=i&&Rr(i),s.language(s.options_.language),r.languages){var l={};Object.getOwnPropertyNames(r.languages).forEach(function(f){l[f.toLowerCase()]=r.languages[f]}),s.languages_=l}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=r.poster||"",s.controls_=!!r.controls,i.controls=!1,i.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],i.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(f){if(typeof s[f]!="function")throw new Error('plugin "'+f+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),Qf(re(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(Lt(z,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var c=we(s.options_);r.plugins&&Object.keys(r.plugins).forEach(function(f){s[f](r.plugins[f])}),r.debug&&s.debug(!0),s.options_.playerOptions=c,s.middleware_=[],s.playbackRates(r.playbackRates),s.initChildren(),s.isAudio(i.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),Vi&&s.addClass("vjs-touch-enabled"),wt||s.addClass("vjs-workinghover"),e.players[s.id_]=re(s);var m=_y.split(".")[0];return s.addClass("vjs-v"+m),s.userActive(!0),s.reportUserActivity(),s.one("play",function(f){return s.listenForUserActivity_(f)}),s.on("stageclick",function(f){return s.handleStageClick_(f)}),s.on("keydown",function(f){return s.handleKeyDown(f)}),s.on("languagechange",function(f){return s.handleLanguagechange(f)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s}var n=e.prototype;return n.dispose=function(){var r=this;this.trigger("dispose"),this.off("dispose"),ut(z,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),ut(z,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),yk(this),yt.names.forEach(function(a){var s=yt[a],o=r[s.getterName]();o&&o.off&&o.off()}),t.prototype.dispose.call(this)},n.createEl=function(){var r=this.tag,a,s=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?a=this.el_=r.parentNode:o||(a=this.el_=t.prototype.createEl.call(this,"div"));var u=Rr(r);if(o){for(a=this.el_=r,r=this.tag=z.createElement("video");a.children.length;)r.appendChild(a.firstChild);Hn(a,"video-js")||Or(a,"video-js"),a.appendChild(r),s=this.playerElIngest_=a,Object.keys(a).forEach(function(b){try{r[b]=a[b]}catch{}})}if(r.setAttribute("tabindex","-1"),u.tabindex="-1",(Os||Lr&&Ay)&&(r.setAttribute("role","application"),u.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in u&&delete u.width,"height"in u&&delete u.height,Object.getOwnPropertyNames(u).forEach(function(b){o&&b==="class"||a.setAttribute(b,u[b]),o&&r.setAttribute(b,u[b])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=a.player=this,this.addClass("vjs-paused"),D.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=$y("vjs-styles-dimensions");var l=fn(".vjs-styles-defaults"),c=fn("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var m=r.getElementsByTagName("a"),f=0;f<m.length;f++){var _=m.item(f);Or(_,"vjs-hidden"),_.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!s&&r.parentNode.insertBefore(a,r),Hf(r,a),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},n.crossOrigin=function(r){if(!r)return this.techGet_("crossOrigin");if(r!=="anonymous"&&r!=="use-credentials"){ue.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+r+'"');return}this.techCall_("setCrossOrigin",r)},n.width=function(r){return this.dimension("width",r)},n.height=function(r){return this.dimension("height",r)},n.dimension=function(r,a){var s=r+"_";if(a===void 0)return this[s]||0;if(a===""||a==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(a);if(isNaN(o)){ue.error('Improper value "'+a+'" supplied for for '+r);return}this[s]=o,this.updateStyleEl_()},n.fluid=function(r){var a=this;if(r===void 0)return!!this.fluid_;this.fluid_=!!r,Nr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),r?(this.addClass("vjs-fluid"),this.fill(!1),Ww(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(r){if(r===void 0)return!!this.fill_;this.fill_=!!r,r?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(r){if(r===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(r))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=r,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(D.VIDEOJS_NO_DYNAMIC_STYLE===!0){var r=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(r>=0&&(s.width=r),a>=0&&(s.height=a));return}var o,u,l,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?l=this.aspectRatio_:this.videoWidth()>0?l=this.videoWidth()+":"+this.videoHeight():l="16:9";var m=l.split(":"),f=m[1]/m[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/f:o=this.videoWidth()||300,this.height_!==void 0?u=this.height_:u=o*f,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),qy(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+u+`px;
      }

      .`+c+`.vjs-fluid {
        padding-top: `+f*100+`%;
      }
    `)},n.loadTech_=function(r,a){var s=this;this.tech_&&this.unloadTech_();var o=Ne(r),u=r.charAt(0).toLowerCase()+r.slice(1);o!=="Html5"&&this.tag&&(Se.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var l=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(l=!1);var c={source:a,autoplay:l,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+u+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};yt.names.forEach(function(f){var _=yt[f];c[_.getterName]=s[_.privateName]}),Le(c,this.options_[o]),Le(c,this.options_[u]),Le(c,this.options_[r.toLowerCase()]),this.tag&&(c.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var m=Se.getTech(r);if(!m)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new m(c),this.tech_.ready(Te(this,this.handleTechReady_),!0),r_.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Y_.forEach(function(f){s.on(s.tech_,f,function(_){return s["handleTech"+Ne(f)+"_"](_)})}),Object.keys(Lh).forEach(function(f){s.on(s.tech_,f,function(_){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+Lh[f]+"_"].bind(s),event:_});return}s["handleTech"+Lh[f]+"_"](_)})}),this.on(this.tech_,"loadstart",function(f){return s.handleTechLoadStart_(f)}),this.on(this.tech_,"sourceset",function(f){return s.handleTechSourceset_(f)}),this.on(this.tech_,"waiting",function(f){return s.handleTechWaiting_(f)}),this.on(this.tech_,"ended",function(f){return s.handleTechEnded_(f)}),this.on(this.tech_,"seeking",function(f){return s.handleTechSeeking_(f)}),this.on(this.tech_,"play",function(f){return s.handleTechPlay_(f)}),this.on(this.tech_,"firstplay",function(f){return s.handleTechFirstPlay_(f)}),this.on(this.tech_,"pause",function(f){return s.handleTechPause_(f)}),this.on(this.tech_,"durationchange",function(f){return s.handleTechDurationChange_(f)}),this.on(this.tech_,"fullscreenchange",function(f,_){return s.handleTechFullscreenChange_(f,_)}),this.on(this.tech_,"fullscreenerror",function(f,_){return s.handleTechFullscreenError_(f,_)}),this.on(this.tech_,"enterpictureinpicture",function(f){return s.handleTechEnterPictureInPicture_(f)}),this.on(this.tech_,"leavepictureinpicture",function(f){return s.handleTechLeavePictureInPicture_(f)}),this.on(this.tech_,"error",function(f){return s.handleTechError_(f)}),this.on(this.tech_,"posterchange",function(f){return s.handleTechPosterChange_(f)}),this.on(this.tech_,"textdata",function(f){return s.handleTechTextData_(f)}),this.on(this.tech_,"ratechange",function(f){return s.handleTechRateChange_(f)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&Hf(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var r=this;yt.names.forEach(function(a){var s=yt[a];r[s.privateName]=r[s.getterName]()}),this.textTracksJson_=r_.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(r){return r===void 0&&ue.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(r){var a=this;if(!(!this.tech_||typeof r!="string")){var s=function(){var l=a.muted();a.muted(!0);var c=function(){a.muted(l)};a.playTerminatedQueue_.push(c);var m=a.play();if(!!Us(m))return m.catch(function(f){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(f||""))})},o;if(r==="any"&&!this.muted()?(o=this.play(),Us(o)&&(o=o.catch(s))):r==="muted"&&!this.muted()?o=s():o=this.play(),!!Us(o))return o.then(function(){a.trigger({type:"autoplay-success",autoplay:r})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:r})})}},n.updateSourceCaches_=function(r){r===void 0&&(r="");var a=r,s="";typeof a!="string"&&(a=r.src,s=r.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=Sk(this,a)),this.cache_.source=we({},r,{src:a,type:s});for(var o=this.cache_.sources.filter(function(_){return _.src&&_.src===a}),u=[],l=this.$$("source"),c=[],m=0;m<l.length;m++){var f=Rr(l[m]);u.push(f),f.src&&f.src===a&&c.push(f.src)}c.length&&!o.length?this.cache_.sources=u:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},n.handleTechSourceset_=function(r){var a=this;if(!this.changingSrc_){var s=function(c){return a.updateSourceCaches_(c)},o=this.currentSource().src,u=r.src;o&&!/^blob:/.test(o)&&/^blob:/.test(u)&&(!this.lastSource_||this.lastSource_.tech!==u&&this.lastSource_.player!==o)&&(s=function(){}),s(u),r.src||this.tech_.any(["sourceset","loadstart"],function(l){if(l.type!=="sourceset"){var c=a.techGet("currentSrc");a.lastSource_.tech=c,a.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:r.src},this.trigger({src:r.src,type:"sourceset"})},n.hasStarted=function(r){if(r===void 0)return this.hasStarted_;r!==this.hasStarted_&&(this.hasStarted_=r,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(r){return r.callback(r.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var r=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=function o(){a!==r.currentTime()&&(r.removeClass("vjs-waiting"),r.off("timeupdate",o))};this.on("timeupdate",s)},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(ue.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(r){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,r):this.paused()?dr(this.play()):this.pause())},n.handleTechDoubleClick_=function(r){if(!!this.controls_){var a=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(r.target)});a||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,r):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(r){r.cancelable&&r.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(r){var a=r.target.player;if(!(a&&a!==this)){var s=this.el(),o=z[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},n.handleTechFullscreenChange_=function(r,a){a&&(a.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(a.isFullscreen))},n.handleTechFullscreenError_=function(r,a){this.trigger("fullscreenerror",a)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(r){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(r){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var r=this.tech_.error();this.error(r)},n.handleTechTextData_=function(){var r=null;arguments.length>1&&(r=arguments[1]),this.trigger("textdata",r)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(r,a){this.ready(function(){if(r in gk)return pk(this.middleware_,this.tech_,r,a);if(r in p_)return h_(this.middleware_,this.tech_,r,a);try{this.tech_&&this.tech_[r](a)}catch(s){throw ue(s),s}},!0)},n.techGet_=function(r){if(!(!this.tech_||!this.tech_.isReady_)){if(r in mk)return hk(this.middleware_,this.tech_,r);if(r in p_)return h_(this.middleware_,this.tech_,r);try{return this.tech_[r]()}catch(a){throw this.tech_[r]===void 0?(ue("Video.js: "+r+" method not defined for "+this.techName_+" playback technology.",a),a):a.name==="TypeError"?(ue("Video.js: "+r+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(ue(a),a)}}},n.play=function(){var r=this,a=this.options_.Promise||D.Promise;return a?new a(function(s){r.play_(s)}):this.play_()},n.play_=function(r){var a=this;r===void 0&&(r=dr),this.playCallbacks_.push(r);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(u){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(Ku||wt)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},n.runPlayTerminatedQueue_=function(){var r=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],r.forEach(function(a){a()})},n.runPlayCallbacks_=function(r){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(r)})},n.pause=function(){this.techCall_("pause")},n.paused=function(){return this.techGet_("paused")!==!1},n.played=function(){return this.techGet_("played")||Wn(0,0)},n.scrubbing=function(r){if(typeof r=="undefined")return this.scrubbing_;this.scrubbing_=!!r,this.techCall_("setScrubbing",this.scrubbing_),r?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(r){if(typeof r!="undefined"){if(r<0&&(r=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=r,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",r),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(r){if(r===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;r=parseFloat(r),r<0&&(r=1/0),r!==this.cache_.duration&&(this.cache_.duration=r,r===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(r)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var r=this.techGet_("buffered");return(!r||!r.length)&&(r=Wn(0,0)),r},n.bufferedPercent=function(){return t_(this.buffered(),this.duration())},n.bufferedEnd=function(){var r=this.buffered(),a=this.duration(),s=r.end(r.length-1);return s>a&&(s=a),s},n.volume=function(r){var a;if(r!==void 0){a=Math.max(0,Math.min(1,parseFloat(r))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a},n.muted=function(r){if(r!==void 0){this.techCall_("setMuted",r);return}return this.techGet_("muted")||!1},n.defaultMuted=function(r){return r!==void 0?this.techCall_("setDefaultMuted",r):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(r){if(r!==void 0&&r!==0){this.cache_.lastVolume=r;return}return this.cache_.lastVolume},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(r){if(r!==void 0){var a=this.isFullscreen_;this.isFullscreen_=Boolean(r),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},n.requestFullscreen=function(r){var a=this.options_.Promise||D.Promise;if(a){var s=this;return new a(function(o,u){function l(){s.off("fullscreenerror",m),s.off("fullscreenchange",c)}function c(){l(),o()}function m(_,b){l(),u(b)}s.one("fullscreenchange",c),s.one("fullscreenerror",m);var f=s.requestFullscreenHelper_(r);f&&(f.then(l,l),f.then(o,u))})}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(r){var a=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},r!==void 0&&(s=r)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var r=this.options_.Promise||D.Promise;if(r){var a=this;return new r(function(s,o){function u(){a.off("fullscreenerror",c),a.off("fullscreenchange",l)}function l(){u(),s()}function c(f,_){u(),o(_)}a.one("fullscreenchange",l),a.one("fullscreenerror",c);var m=a.exitFullscreenHelper_();m&&(m.then(u,u),m.then(s,o))})}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var r=this;if(this.fsApi_.requestFullscreen){var a=z[this.fsApi_.exitFullscreen]();return a&&dr(a.then(function(){return r.isFullscreen(!1)})),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=z.documentElement.style.overflow,Lt(z,"keydown",this.boundFullWindowOnEscKey_),z.documentElement.style.overflow="hidden",Or(z.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(r){ae.isEventKey(r,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,ut(z,"keydown",this.boundFullWindowOnEscKey_),z.documentElement.style.overflow=this.docOrigOverflow,Rs(z.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(r){if(r===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",r),this.options_.disablePictureInPicture=r,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(r){if(r!==void 0){this.isInPictureInPicture_=!!r,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in z&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in z)return z.exitPictureInPicture()},n.handleKeyDown=function(r){var a=this.options_.userActions;if(!(!a||!a.hotkeys)){var s=function(u){var l=u.tagName.toLowerCase();if(u.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(l==="input")return c.indexOf(u.type)===-1;var m=["textarea"];return m.indexOf(l)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,r):this.handleHotkeys(r))}},n.handleHotkeys=function(r){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=s===void 0?function(S){return ae.isEventKey(S,"f")}:s,u=a.muteKey,l=u===void 0?function(S){return ae.isEventKey(S,"m")}:u,c=a.playPauseKey,m=c===void 0?function(S){return ae.isEventKey(S,"k")||ae.isEventKey(S,"Space")}:c;if(o.call(this,r)){r.preventDefault(),r.stopPropagation();var f=V.getComponent("FullscreenToggle");z[this.fsApi_.fullscreenEnabled]!==!1&&f.prototype.handleClick.call(this,r)}else if(l.call(this,r)){r.preventDefault(),r.stopPropagation();var _=V.getComponent("MuteToggle");_.prototype.handleClick.call(this,r)}else if(m.call(this,r)){r.preventDefault(),r.stopPropagation();var b=V.getComponent("PlayToggle");b.prototype.handleClick.call(this,r)}},n.canPlayType=function(r){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var u=o[s],l=Se.getTech(u);if(l||(l=V.getComponent(u)),!l){ue.error('The "'+u+'" tech is undefined. Skipped browser support check for that tech.');continue}if(l.isSupported()&&(a=l.canPlayType(r),a))return a}return""},n.selectSource=function(r){var a=this,s=this.options_.techOrder.map(function(m){return[m,Se.getTech(m)]}).filter(function(m){var f=m[0],_=m[1];return _?_.isSupported():(ue.error('The "'+f+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(f,_,b){var S;return f.some(function(v){return _.some(function(x){if(S=b(v,x),S)return!0})}),S},u,l=function(f){return function(_,b){return f(b,_)}},c=function(f,_){var b=f[0],S=f[1];if(S.canPlaySource(_,a.options_[b.toLowerCase()]))return{source:_,tech:b}};return this.options_.sourceOrder?u=o(r,s,l(c)):u=o(s,r,c),u||!1},n.handleSrc_=function(r,a){var s=this;if(typeof r=="undefined")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=xk(r);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),ck(this,o[0],function(c,m){s.middleware_=m,a||(s.cache_.sources=o),s.updateSourceCaches_(c);var f=s.src_(c);if(f){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),s.triggerReady();return}fk(m,s.tech_)}),this.options_.retryOnError&&o.length>1){var u=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},l=function(){s.off("error",u)};this.one("error",u),this.one("playing",l),this.resetRetryOnError_=function(){s.off("error",u),s.off("playing",l)}}},n.src=function(r){return this.handleSrc_(r,!1)},n.src_=function(r){var a=this,s=this.selectSource([r]);return s?$w(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",r):this.techCall_("src",r.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1):!0},n.load=function(){this.techCall_("load")},n.reset=function(){var r=this,a=this.options_.Promise||D.Promise;if(this.paused()||!a)this.doReset_();else{var s=this.play();dr(s.then(function(){return r.doReset_()}))}},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Nr(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var r=this.controlBar,a=r.durationDisplay,s=r.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var r=this.currentSource(),a=[];return Object.keys(r).length!==0&&a.push(r),this.cache_.sources||a},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(r){if(r!==void 0){this.techCall_("setPreload",r),this.options_.preload=r;return}return this.techGet_("preload")},n.autoplay=function(r){if(r===void 0)return this.options_.autoplay||!1;var a;typeof r=="string"&&/(any|play|muted)/.test(r)||r===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=r,this.manualAutoplay_(typeof r=="string"?r:"play"),a=!1):r?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a=="undefined"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},n.playsinline=function(r){return r!==void 0?(this.techCall_("setPlaysinline",r),this.options_.playsinline=r,this):this.techGet_("playsinline")},n.loop=function(r){if(r!==void 0){this.techCall_("setLoop",r),this.options_.loop=r;return}return this.techGet_("loop")},n.poster=function(r){if(r===void 0)return this.poster_;r||(r=""),r!==this.poster_&&(this.poster_=r,this.techCall_("setPoster",r),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var r=this.tech_.poster()||"";r!==this.poster_&&(this.poster_=r,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(r){if(r===void 0)return!!this.controls_;r=!!r,this.controls_!==r&&(this.controls_=r,this.usingNativeControls()&&this.techCall_("setControls",r),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(r){if(r===void 0)return!!this.usingNativeControls_;r=!!r,this.usingNativeControls_!==r&&(this.usingNativeControls_=r,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(r){var a=this;if(r===void 0)return this.error_||null;if(cn("beforeerror").forEach(function(o){var u=o(a,r);if(!(Ar(u)&&!Array.isArray(u)||typeof u=="string"||typeof u=="number"||u===null)){a.log.error("please return a value that MediaError expects in beforeerror hooks");return}r=u}),this.options_.suppressNotSupportedError&&r&&r.code===4){var s=function(){this.error(r)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(r===null){this.error_=r,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new vt(r),this.addClass("vjs-error"),ue.error("(CODE:"+this.error_.code+" "+vt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),cn("error").forEach(function(o){return o(a,a.error_)})},n.reportUserActivity=function(r){this.userActivity_=!0},n.userActive=function(r){if(r===void 0)return this.userActive_;if(r=!!r,r!==this.userActive_){if(this.userActive_=r,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var r,a,s,o=Te(this,this.reportUserActivity),u=function(b){(b.screenX!==a||b.screenY!==s)&&(a=b.screenX,s=b.screenY,o())},l=function(){o(),this.clearInterval(r),r=this.setInterval(o,250)},c=function(b){o(),this.clearInterval(r)};this.on("mousedown",l),this.on("mousemove",u),this.on("mouseup",c),this.on("mouseleave",c);var m=this.getChild("controlBar");m&&!wt&&!Dr&&(m.on("mouseenter",function(_){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),m.on("mouseleave",function(_){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var f;this.setInterval(function(){if(!!this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(f);var _=this.options_.inactivityTimeout;_<=0||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},_))}},250)},n.playbackRate=function(r){if(r!==void 0){this.techCall_("setPlaybackRate",r);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},n.defaultPlaybackRate=function(r){return r!==void 0?this.techCall_("setDefaultPlaybackRate",r):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(r){if(r!==void 0){this.isAudio_=!!r;return}return!!this.isAudio_},n.addTextTrack=function(r,a,s){if(this.tech_)return this.tech_.addTextTrack(r,a,s)},n.addRemoteTextTrack=function(r,a){if(this.tech_)return this.tech_.addRemoteTextTrack(r,a)},n.removeRemoteTextTrack=function(r){r===void 0&&(r={});var a=r,s=a.track;if(s||(s=r),this.tech_)return this.tech_.removeRemoteTextTrack(s)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(r){if(r===void 0)return this.language_;this.language_!==String(r).toLowerCase()&&(this.language_=String(r).toLowerCase(),Nr(this)&&this.trigger("languagechange"))},n.languages=function(){return we(e.prototype.options_.languages,this.languages_)},n.toJSON=function(){var r=we(this.options_),a=r.tracks;r.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];o=we(o),o.player=void 0,r.tracks[s]=o}return r},n.createModal=function(r,a){var s=this;a=a||{},a.content=r||"";var o=new Xi(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},n.updateCurrentBreakpoint_=function(){if(!!this.responsive())for(var r=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<Oh.length;s++){var o=Oh[s],u=this.breakpoints_[o];if(a<=u){if(r===o)return;r&&this.removeClass(fl[r]),this.addClass(fl[o]),this.breakpoint_=o;break}}},n.removeCurrentBreakpoint_=function(){var r=this.currentBreakpointClass();this.breakpoint_="",r&&this.removeClass(r)},n.breakpoints=function(r){return r===void 0?Le(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Le({},Jk,r),this.updateCurrentBreakpoint_(),Le(this.breakpoints_))},n.responsive=function(r){if(r===void 0)return this.responsive_;r=Boolean(r);var a=this.responsive_;if(r!==a)return this.responsive_=r,r?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),r},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return fl[this.breakpoint_]||""},n.loadMedia=function(r,a){var s=this;if(!(!r||typeof r!="object")){this.reset(),this.cache_.media=we(r);var o=this.cache_.media,u=o.artwork,l=o.poster,c=o.src,m=o.textTracks;!u&&l&&(this.cache_.media.artwork=[{src:l,type:al(l)}]),c&&this.src(c),l&&this.poster(l),Array.isArray(m)&&m.forEach(function(f){return s.addRemoteTextTrack(f,!1)}),this.ready(a)}},n.getMedia=function(){if(!this.cache_.media){var r=this.poster(),a=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(u){return{kind:u.kind,label:u.label,language:u.language,src:u.src}}),o={src:a,textTracks:s};return r&&(o.poster=r,o.artwork=[{src:o.poster,type:al(o.poster)}]),o}return we(this.cache_.media)},e.getTagSettings=function(r){var a={sources:[],tracks:[]},s=Rr(r),o=s["data-setup"];if(Hn(r,"vjs-fill")&&(s.fill=!0),Hn(r,"vjs-fluid")&&(s.fluid=!0),o!==null){var u=KE(o||"{}"),l=u[0],c=u[1];l&&ue.error(l),Le(s,c)}if(Le(a,s),r.hasChildNodes())for(var m=r.childNodes,f=0,_=m.length;f<_;f++){var b=m[f],S=b.nodeName.toLowerCase();S==="source"?a.sources.push(Rr(b)):S==="track"&&a.tracks.push(Rr(b))}return a},n.flexNotSupported_=function(){var r=z.createElement("i");return!("flexBasis"in r.style||"webkitFlexBasis"in r.style||"mozFlexBasis"in r.style||"msFlexBasis"in r.style||"msFlexOrder"in r.style)},n.debug=function(r){if(r===void 0)return this.debugEnabled_;r?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(r){if(r===void 0)return this.cache_.playbackRates;!Array.isArray(r)||!r.every(function(a){return typeof a=="number"})||(this.cache_.playbackRates=r,this.trigger("playbackrateschange"))},e}(V);yt.names.forEach(function(t){var e=yt[t];Fe.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Fe.prototype.crossorigin=Fe.prototype.crossOrigin;Fe.players={};var Vs=D.navigator;Fe.prototype.options_={techOrder:Se.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Vs&&(Vs.languages&&Vs.languages[0]||Vs.userLanguage||Vs.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Fe.prototype[t]=function(){return this.techGet_(t)}});Y_.forEach(function(t){Fe.prototype["handleTech"+Ne(t)+"_"]=function(){return this.trigger(t)}});V.registerComponent("Player",Fe);var hl="plugin",ra="activePlugins_",na={},pl=function(e){return na.hasOwnProperty(e)},ml=function(e){return pl(e)?na[e]:void 0},J_=function(e,n){e[ra]=e[ra]||{},e[ra][n]=!0},gl=function(e,n,i){var r=(i?"before":"")+"pluginsetup";e.trigger(r,n),e.trigger(r+":"+n.name,n)},Zk=function(e,n){var i=function(){gl(this,{name:e,plugin:n,instance:null},!0);var a=n.apply(this,arguments);return J_(this,e),gl(this,{name:e,plugin:n,instance:a}),a};return Object.keys(n).forEach(function(r){i[r]=n[r]}),i},Z_=function(e,n){return n.prototype.name=e,function(){gl(this,{name:e,plugin:n,instance:null},!0);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=ku(n,[this].concat(r));return this[e]=function(){return s},gl(this,s.getEventHash()),s}},cr=function(){function t(n){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=n,this.log||(this.log=this.player.log.createLogger(this.name)),Qf(this),delete this.trigger,Zy(this,this.constructor.defaultState),J_(n,this.name),this.dispose=this.dispose.bind(this),n.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(i){return i===void 0&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},e.trigger=function(i,r){return r===void 0&&(r={}),qi(this.eventBusEl_,i,this.getEventHash(r))},e.handleStateChanged=function(i){},e.dispose=function(){var i=this.name,r=this.player;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[ra][i]=!1,this.player=this.state=null,r[i]=Z_(i,na[i])},t.isBasic=function(i){var r=typeof i=="string"?ml(i):i;return typeof r=="function"&&!t.prototype.isPrototypeOf(r.prototype)},t.registerPlugin=function(i,r){if(typeof i!="string")throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(pl(i))ue.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(Fe.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if(typeof r!="function")throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof r+".");return na[i]=r,i!==hl&&(t.isBasic(r)?Fe.prototype[i]=Zk(i,r):Fe.prototype[i]=Z_(i,r)),r},t.deregisterPlugin=function(i){if(i===hl)throw new Error("Cannot de-register base plugin.");pl(i)&&(delete na[i],delete Fe.prototype[i])},t.getPlugins=function(i){i===void 0&&(i=Object.keys(na));var r;return i.forEach(function(a){var s=ml(a);s&&(r=r||{},r[a]=s)}),r},t.getPluginVersion=function(i){var r=ml(i);return r&&r.VERSION||""},t}();cr.getPlugin=ml;cr.BASE_PLUGIN_NAME=hl;cr.registerPlugin(hl,cr);Fe.prototype.usingPlugin=function(t){return!!this[ra]&&this[ra][t]===!0};Fe.prototype.hasPlugin=function(t){return!!pl(t)};var eP=function(e,n){n===void 0&&(n={});var i=function(){e.apply(this,arguments)},r={};typeof n=="object"?(n.constructor!==Object.prototype.constructor&&(i=n.constructor),r=n):typeof n=="function"&&(i=n),NC(i,e),e&&(i.super_=e);for(var a in r)r.hasOwnProperty(a)&&(i.prototype[a]=r[a]);return i},eT=function(e){return e.indexOf("#")===0?e.slice(1):e};function R(t,e,n){var i=R.getPlayer(t);if(i)return e&&ue.warn('Player "'+t+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var r=typeof t=="string"?fn("#"+eT(t)):t;if(!zi(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!r.ownerDocument.defaultView||!r.ownerDocument.body.contains(r))&&ue.warn("The element supplied is not included in the DOM"),e=e||{},cn("beforesetup").forEach(function(s){var o=s(r,we(e));if(!Ar(o)||Array.isArray(o)){ue.error("please return an object in beforesetup hooks");return}e=we(e,o)});var a=V.getComponent("Player");return i=new a(r,e,n),cn("setup").forEach(function(s){return s(i)}),i}R.hooks_=Ir;R.hooks=cn;R.hook=kw;R.hookOnce=Pw;R.removeHook=Ty;if(D.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Wi()){var vl=fn(".vjs-styles-defaults");if(!vl){vl=$y("vjs-styles-defaults");var Rh=fn("head");Rh&&Rh.insertBefore(vl,Rh.firstChild),qy(vl,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    `)}}Gf(1,R);R.VERSION=_y;R.options=Fe.prototype.options_;R.getPlayers=function(){return Fe.players};R.getPlayer=function(t){var e=Fe.players,n;if(typeof t=="string"){var i=eT(t),r=e[i];if(r)return r;n=fn("#"+i)}else n=t;if(zi(n)){var a=n,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}};R.getAllPlayers=function(){return Object.keys(Fe.players).map(function(t){return Fe.players[t]}).filter(Boolean)};R.players=Fe.players;R.getComponent=V.getComponent;R.registerComponent=function(t,e){Se.isTech(e)&&ue.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),V.registerComponent.call(V,t,e)};R.getTech=Se.getTech;R.registerTech=Se.registerTech;R.use=dk;Object.defineProperty(R,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(R.middleware,"TERMINATOR",{value:il,writeable:!1,enumerable:!0});R.browser=Rw;R.TOUCH_ENABLED=Vi;R.extend=eP;R.mergeOptions=we;R.bind=Te;R.registerPlugin=cr.registerPlugin;R.deregisterPlugin=cr.deregisterPlugin;R.plugin=function(t,e){return ue.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),cr.registerPlugin(t,e)};R.getPlugins=cr.getPlugins;R.getPlugin=cr.getPlugin;R.getPluginVersion=cr.getPluginVersion;R.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),R.options.languages=we(R.options.languages,(n={},n[t]=e,n)),R.options.languages[t]};R.log=ue;R.createLogger=by;R.createTimeRange=R.createTimeRanges=Wn;R.formatTime=Zi;R.setFormatTime=Ik;R.resetFormatTime=Ak;R.parseUrl=ih;R.isCrossOrigin=nl;R.EventTarget=$e;R.on=Lt;R.one=Zu;R.off=ut;R.trigger=qi;R.xhr=Zv;R.TextTrack=Bs;R.AudioTrack=l_;R.VideoTrack=d_;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){R[t]=function(){return ue.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),zy[t].apply(null,arguments)}});R.computedStyle=Ds;R.dom=zy;R.url=sk;R.defineLazyProperty=Dh;R.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.12.0 @license Apache-2.0 */var Zt=Pu,yl=function(e,n,i){return e&&i&&i.responseURL&&n!==i.responseURL?i.responseURL:n},er=function(e){return R.log.debug?R.log.debug.bind(R,"VHS:",e+" >"):function(){}},pn=1/30,fr=pn*3,tT=function(e,n){var i=[],r;if(e&&e.length)for(r=0;r<e.length;r++)n(e.start(r),e.end(r))&&i.push([e.start(r),e.end(r)]);return R.createTimeRanges(i)},ia=function(e,n){return tT(e,function(i,r){return i-fr<=n&&r+fr>=n})},_l=function(e,n){return tT(e,function(i){return i-pn>=n})},tP=function(e){if(e.length<2)return R.createTimeRanges();for(var n=[],i=1;i<e.length;i++){var r=e.end(i-1),a=e.start(i);n.push([r,a])}return R.createTimeRanges(n)},rP=function(e,n){var i=null,r=null,a=0,s=[],o=[];if(!e||!e.length||!n||!n.length)return R.createTimeRange();for(var u=e.length;u--;)s.push({time:e.start(u),type:"start"}),s.push({time:e.end(u),type:"end"});for(u=n.length;u--;)s.push({time:n.start(u),type:"start"}),s.push({time:n.end(u),type:"end"});for(s.sort(function(l,c){return l.time-c.time}),u=0;u<s.length;u++)s[u].type==="start"?(a++,a===2&&(i=s[u].time)):s[u].type==="end"&&(a--,a===1&&(r=s[u].time)),i!==null&&r!==null&&(o.push([i,r]),i=null,r=null);return R.createTimeRanges(o)},rT=function(e){var n=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)n.push(e.start(i)+" => "+e.end(i));return n.join(", ")},nP=function(e,n,i){i===void 0&&(i=1);var r=e.length?e.end(e.length-1):0;return(r-n)/i},qn=function(e){for(var n=[],i=0;i<e.length;i++)n.push({start:e.start(i),end:e.end(i)});return n},iP=function(e,n){if(e===n)return!1;if(!e&&n||!n&&e||e.length!==n.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==n.start(i)||e.end(i)!==n.end(i))return!0;return!1},nT=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},Mh=function(e,n){var i=0;if(!e||!e.length)return i;for(var r=0;r<e.length;r++){var a=e.start(r),s=e.end(r);if(!(n>s)){if(n>a&&n<=s){i+=s-n;continue}i+=s-a}}return i},iT=R.createTimeRange,Nh=function(e,n){if(!n.preload)return n.duration;var i=0;return(n.parts||[]).forEach(function(r){i+=r.duration}),(n.preloadHints||[]).forEach(function(r){r.type==="PART"&&(i+=e.partTargetDuration)}),i},Fh=function(e){return(e.segments||[]).reduce(function(n,i,r){return i.parts?i.parts.forEach(function(a,s){n.push({duration:a.duration,segmentIndex:r,partIndex:s,part:a,segment:i})}):n.push({duration:i.duration,segmentIndex:r,partIndex:null,segment:i,part:null}),n},[])},aT=function(e){var n=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return n&&n.parts||[]},sT=function(e){var n=e.preloadSegment;if(!!n){var i=n.parts,r=n.preloadHints,a=(r||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return a+=i&&i.length?i.length:0,a}},oT=function(e,n){if(n.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var i=aT(n).length>0;return i&&n.serverControl&&n.serverControl.partHoldBack?n.serverControl.partHoldBack:i&&n.partTargetDuration?n.partTargetDuration*3:n.serverControl&&n.serverControl.holdBack?n.serverControl.holdBack:n.targetDuration?n.targetDuration*3:0},aP=function(e,n){var i=0,r=n-e.mediaSequence,a=e.segments[r];if(a){if(typeof a.start!="undefined")return{result:a.start,precise:!0};if(typeof a.end!="undefined")return{result:a.end-a.duration,precise:!0}}for(;r--;){if(a=e.segments[r],typeof a.end!="undefined")return{result:i+a.end,precise:!0};if(i+=Nh(e,a),typeof a.start!="undefined")return{result:i+a.start,precise:!0}}return{result:i,precise:!1}},sP=function(e,n){for(var i=0,r,a=n-e.mediaSequence;a<e.segments.length;a++){if(r=e.segments[a],typeof r.start!="undefined")return{result:r.start-i,precise:!0};if(i+=Nh(e,r),typeof r.end!="undefined")return{result:r.end-i,precise:!0}}return{result:-1,precise:!1}},uT=function(e,n,i){if(typeof n=="undefined"&&(n=e.mediaSequence+e.segments.length),n<e.mediaSequence)return 0;var r=aP(e,n);if(r.precise)return r.result;var a=sP(e,n);return a.precise?a.result:r.result+i},lT=function(e,n,i){if(!e)return 0;if(typeof i!="number"&&(i=0),typeof n=="undefined"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return D.Infinity}return uT(e,n,i)},Ws=function(e){var n=e.defaultDuration,i=e.durationList,r=e.startIndex,a=e.endIndex,s=0;if(r>a){var o=[a,r];r=o[0],a=o[1]}if(r<0){for(var u=r;u<Math.min(0,a);u++)s+=n;r=0}for(var l=r;l<a;l++)s+=i[l].duration;return s},dT=function(e,n,i,r){if(!e||!e.segments)return null;if(e.endList)return lT(e);if(n===null)return null;n=n||0;var a=uT(e,e.mediaSequence+e.segments.length,n);return i&&(r=typeof r=="number"?r:oT(null,e),a-=r),Math.max(0,a)},oP=function(e,n,i){var r=!0,a=n||0,s=dT(e,n,r,i);return s===null?iT():iT(a,s)},uP=function(e){for(var n=e.playlist,i=e.currentTime,r=e.startingSegmentIndex,a=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,u=i-s,l=Fh(n),c=0,m=0;m<l.length;m++){var f=l[m];if(r===f.segmentIndex&&!(typeof a=="number"&&typeof f.partIndex=="number"&&a!==f.partIndex)){c=m;break}}if(u<0){if(c>0)for(var _=c-1;_>=0;_--){var b=l[_];if(u+=b.duration,o){if(u<0)continue}else if(u+pn<=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:s-Ws({defaultDuration:n.targetDuration,durationList:l,startIndex:c,endIndex:_})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i}}if(c<0){for(var S=c;S<0;S++)if(u-=n.targetDuration,u<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i};c=0}for(var v=c;v<l.length;v++){var x=l[v];if(u-=x.duration,o){if(u>0)continue}else if(u-pn>=0)continue;return{partIndex:x.partIndex,segmentIndex:x.segmentIndex,startTime:s+Ws({defaultDuration:n.targetDuration,durationList:l,startIndex:c,endIndex:v})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:i}},cT=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Uh=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Tl=function(e){var n=cT(e);return!e.disabled&&!n},lP=function(e){return e.disabled},dP=function(e){for(var n=0;n<e.segments.length;n++)if(e.segments[n].key)return!0;return!1},fT=function(e,n){return n.attributes&&n.attributes[e]},cP=function(e,n,i,r){if(r===void 0&&(r=0),!fT("BANDWIDTH",i))return NaN;var a=e*i.attributes.BANDWIDTH;return(a-r*8)/n},Bh=function(e,n){if(e.playlists.length===1)return!0;var i=n.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(r){return Tl(r)?(r.attributes.BANDWIDTH||0)<i:!1}).length===0},jh=function(e,n){return!e&&!n||!e&&n||e&&!n?!1:!!(e===n||e.id&&n.id&&e.id===n.id||e.resolvedUri&&n.resolvedUri&&e.resolvedUri===n.resolvedUri||e.uri&&n.uri&&e.uri===n.uri)},hT=function(e,n){var i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(var a in i){for(var s in i[a])if(r=n(i[a][s]),r)break;if(r)break}return!!r},zs=function(e){if(!e||!e.playlists||!e.playlists.length){var n=hT(e,function(s){return s.playlists&&s.playlists.length||s.uri});return n}for(var i=function(o){var u=e.playlists[o],l=u.attributes&&u.attributes.CODECS;if(l&&l.split(",").every(function(m){return p0(m)}))return"continue";var c=hT(e,function(m){return jh(u,m)});return c?"continue":{v:!1}},r=0;r<e.playlists.length;r++){var a=i(r);if(a!=="continue"&&typeof a=="object")return a.v}return!0},kt={liveEdgeDelay:oT,duration:lT,seekable:oP,getMediaInfoForTime:uP,isEnabled:Tl,isDisabled:lP,isBlacklisted:cT,isIncompatible:Uh,playlistEnd:dT,isAes:dP,hasAttribute:fT,estimateSegmentRequestTime:cP,isLowestEnabledRendition:Bh,isAudioOnly:zs,playlistMatch:jh,segmentDurationWithParts:Nh},pT=R.log,Hh=function(e,n){return e+"-"+n},fP=function(e){var n=e.onwarn,i=e.oninfo,r=e.manifestString,a=e.customTagParsers,s=a===void 0?[]:a,o=e.customTagMappers,u=o===void 0?[]:o,l=e.experimentalLLHLS,c=new WC;n&&c.on("warn",n),i&&c.on("info",i),s.forEach(function(S){return c.addParser(S)}),u.forEach(function(S){return c.addTagMapper(S)}),c.push(r),c.end();var m=c.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(S){m.hasOwnProperty(S)&&delete m[S]}),m.segments&&m.segments.forEach(function(S){["parts","preloadHints"].forEach(function(v){S.hasOwnProperty(v)&&delete S[v]})})),!m.targetDuration){var f=10;m.segments&&m.segments.length&&(f=m.segments.reduce(function(S,v){return Math.max(S,v.duration)},0)),n&&n("manifest has no targetDuration defaulting to "+f),m.targetDuration=f}var _=aT(m);if(_.length&&!m.partTargetDuration){var b=_.reduce(function(S,v){return Math.max(S,v.duration)},0);n&&(n("manifest has no partTargetDuration defaulting to "+b),pT.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),m.partTargetDuration=b}return m},Gs=function(e,n){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(i){if(!!e.mediaGroups[i])for(var r in e.mediaGroups[i])for(var a in e.mediaGroups[i][r]){var s=e.mediaGroups[i][r][a];n(s,i,r,a)}})},mT=function(e){var n=e.playlist,i=e.uri,r=e.id;n.id=r,n.playlistErrors_=0,i&&(n.uri=i),n.attributes=n.attributes||{}},hP=function(e){for(var n=e.playlists.length;n--;){var i=e.playlists[n];mT({playlist:i,id:Hh(n,i.uri)}),i.resolvedUri=Zt(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||pT.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},pP=function(e){Gs(e,function(n){n.uri&&(n.resolvedUri=Zt(e.uri,n.uri))})},mP=function(e,n){var i=Hh(0,n),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:D.location.href,resolvedUri:D.location.href,playlists:[{uri:n,id:i,resolvedUri:n,attributes:{}}]};return r.playlists[i]=r.playlists[0],r.playlists[n]=r.playlists[0],r},gT=function(e,n){e.uri=n;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var r="placeholder-uri-"+i;e.playlists[i].uri=r}var a=zs(e);Gs(e,function(s,o,u,l){var c="placeholder-uri-"+o+"-"+u+"-"+l;if(!s.playlists||!s.playlists.length){if(a&&o==="AUDIO"&&!s.uri)for(var m=0;m<e.playlists.length;m++){var f=e.playlists[m];if(f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===u)return}s.playlists=[Ht({},s)]}s.playlists.forEach(function(_,b){var S=Hh(b,c);_.uri?_.resolvedUri=_.resolvedUri||Zt(e.uri,_.uri):(_.uri=b===0?c:S,_.resolvedUri=_.uri),_.id=_.id||S,_.attributes=_.attributes||{},e.playlists[_.id]=_,e.playlists[_.uri]=_})}),hP(e),pP(e)},Sl=R.mergeOptions,gP=R.EventTarget,vP=function(e,n){if(n.endList||!n.serverControl)return e;var i={};if(n.serverControl.canBlockReload){var r=n.preloadSegment,a=n.mediaSequence+n.segments.length;if(r){var s=r.parts||[],o=sT(n)-1;o>-1&&o!==s.length-1&&(i._HLS_part=o),(o>-1||s.length)&&a--}i._HLS_msn=a}if(n.serverControl&&n.serverControl.canSkipUntil&&(i._HLS_skip=n.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var u=new D.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(l){!i.hasOwnProperty(l)||u.searchParams.set(l,i[l])}),e=u.toString()}return e},yP=function(e,n){if(!e)return n;var i=Sl(e,n);if(e.preloadHints&&!n.preloadHints&&delete i.preloadHints,e.parts&&!n.parts)delete i.parts;else if(e.parts&&n.parts)for(var r=0;r<n.parts.length;r++)e.parts&&e.parts[r]&&(i.parts[r]=Sl(e.parts[r],n.parts[r]));return!e.skipped&&n.skipped&&(i.skipped=!1),e.preload&&!n.preload&&(i.preload=!1),i},_P=function(e,n,i){var r=e.slice(),a=n.slice();i=i||0;for(var s=[],o,u=0;u<a.length;u++){var l=r[u+i],c=a[u];l?(o=l.map||o,s.push(yP(l,c))):(o&&!c.map&&(c.map=o),s.push(c))}return s},vT=function(e,n){!e.resolvedUri&&e.uri&&(e.resolvedUri=Zt(n,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Zt(n,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Zt(n,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Zt(n,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(i){i.resolvedUri||(i.resolvedUri=Zt(n,i.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(i){i.resolvedUri||(i.resolvedUri=Zt(n,i.uri))})},yT=function(e){var n=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(var r=0;r<i.preloadHints.length;r++)if(i.preloadHints[r].type==="MAP")return n}i.duration=e.targetDuration,i.preload=!0,n.push(i)}return n},_T=function(e,n){return e===n||e.segments&&n.segments&&e.segments.length===n.segments.length&&e.endList===n.endList&&e.mediaSequence===n.mediaSequence&&e.preloadSegment===n.preloadSegment},Vh=function(e,n,i){i===void 0&&(i=_T);var r=Sl(e,{}),a=r.playlists[n.id];if(!a||i(a,n))return null;n.segments=yT(n);var s=Sl(a,n);if(s.preloadSegment&&!n.preloadSegment&&delete s.preloadSegment,a.segments){if(n.skip){n.segments=n.segments||[];for(var o=0;o<n.skip.skippedSegments;o++)n.segments.unshift({skipped:!0})}s.segments=_P(a.segments,n.segments,n.mediaSequence-a.mediaSequence)}s.segments.forEach(function(l){vT(l,s.resolvedUri)});for(var u=0;u<r.playlists.length;u++)r.playlists[u].id===n.id&&(r.playlists[u]=s);return r.playlists[n.id]=s,r.playlists[n.uri]=s,Gs(e,function(l,c,m,f){if(!!l.playlists)for(var _=0;_<l.playlists.length;_++)n.id===l.playlists[_].id&&(l.playlists[_]=n)}),r},Wh=function(e,n){var i=e.segments||[],r=i[i.length-1],a=r&&r.parts&&r.parts[r.parts.length-1],s=a&&a.duration||r&&r.duration;return n&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},aa=function(t){$(e,t);function e(i,r,a){var s;if(a===void 0&&(a={}),s=t.call(this)||this,!i)throw new Error("A non-empty playlist URL or object is required");s.logger_=er("PlaylistLoader");var o=a,u=o.withCredentials,l=u===void 0?!1:u,c=o.handleManifestRedirects,m=c===void 0?!1:c;s.src=i,s.vhs_=r,s.withCredentials=l,s.handleManifestRedirects=m;var f=r.options_;return s.customTagParsers=f&&f.customTagParsers||[],s.customTagMappers=f&&f.customTagMappers||[],s.experimentalLLHLS=f&&f.experimentalLLHLS||!1,R.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(re(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var n=e.prototype;return n.handleMediaupdatetimeout_=function(){var r=this;if(this.state==="HAVE_METADATA"){var a=this.media(),s=Zt(this.master.uri,a.uri);this.experimentalLLHLS&&(s=vP(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,u){if(!!r.request){if(o)return r.playlistRequestError(r.request,r.media(),"HAVE_METADATA");r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})}})}},n.playlistRequestError=function(r,a,s){var o=a.uri,u=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[u],status:r.status,message:"HLS playlist request error at URL: "+o+".",responseText:r.responseText,code:r.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(r){var a=this,s=r.url,o=r.manifestString;return fP({onwarn:function(l){var c=l.message;return a.logger_("m3u8-parser warn for "+s+": "+c)},oninfo:function(l){var c=l.message;return a.logger_("m3u8-parser info for "+s+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(r){var a=r.playlistString,s=r.playlistObject,o=r.url,u=r.id;this.request=null,this.state="HAVE_METADATA";var l=s||this.parseManifest_({url:o,manifestString:a});l.lastRequest=Date.now(),mT({playlist:l,uri:o,id:u});var c=Vh(this.master,l);this.targetDuration=l.partTargetDuration||l.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[u]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Wh(this.media(),!!c)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),D.clearTimeout(this.mediaUpdateTimeout),D.clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},n.media=function(r,a){var s=this;if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof r=="string"){if(!this.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.master.playlists[r]}if(D.clearTimeout(this.finalRenditionTimeout),a){var o=(r.partTargetDuration||r.targetDuration)/2*1e3||5*1e3;this.finalRenditionTimeout=D.setTimeout(this.media.bind(this,r,!1),o);return}var u=this.state,l=!this.media_||r.id!==this.media_.id,c=this.master.playlists[r.id];if(c&&c.endList||r.endList&&r.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=r,l&&(this.trigger("mediachanging"),u==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Wh(r,!0)),!!l){if(this.state="SWITCHING_MEDIA",this.request){if(r.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=r,this.request=this.vhs_.xhr({uri:r.resolvedUri,withCredentials:this.withCredentials},function(m,f){if(!!s.request){if(r.lastRequest=Date.now(),r.resolvedUri=yl(s.handleManifestRedirects,r.resolvedUri,f),m)return s.playlistRequestError(s.request,r,u);s.haveMetadata({playlistString:f.responseText,url:r.uri,id:r.id}),u==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},n.pause=function(){this.mediaUpdateTimeout&&(D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},n.load=function(r){var a=this;this.mediaUpdateTimeout&&(D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(r){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5*1e3;this.mediaUpdateTimeout=D.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},n.updateMediaUpdateTimeout_=function(r){var a=this;this.mediaUpdateTimeout&&(D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=D.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(r)},r))},n.start=function(){var r=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=D.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){r.setupInitialPlaylist(r.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(!!r.request){if(r.request=null,a)return r.error={status:s.status,message:"HLS playlist request error at URL: "+r.src+".",responseText:s.responseText,code:2},r.state==="HAVE_NOTHING"&&(r.started=!1),r.trigger("error");r.src=yl(r.handleManifestRedirects,r.src,s);var o=r.parseManifest_({manifestString:s.responseText,url:r.src});r.setupInitialPlaylist(o)}})},n.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},n.setupInitialPlaylist=function(r){if(this.state="HAVE_MASTER",r.playlists){this.master=r,gT(this.master,this.srcUri()),r.playlists.forEach(function(s){s.segments=yT(s),s.segments.forEach(function(o){vT(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var a=this.srcUri()||D.location.href;this.master=mP(r,a),this.haveMetadata({playlistObject:r,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(gP),TP=R.xhr,SP=R.mergeOptions,zh=function(e,n,i,r){var a=e.responseType==="arraybuffer"?e.response:e.responseText;!n&&a&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=a.byteLength||a.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),n&&n.code==="ETIMEDOUT"&&(e.timedout=!0),!n&&!e.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(n=new Error("XHR Failed with a response of: "+(e&&(a||e.responseText)))),r(n,e)},TT=function(){var e=function n(i,r){i=SP({timeout:45e3},i);var a=n.beforeRequest||R.Vhs.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(i);s&&(i=s)}var o=R.Vhs.xhr.original===!0?TP:R.Vhs.xhr,u=o(i,function(c,m){return zh(u,c,m,r)}),l=u.abort;return u.abort=function(){return u.aborted=!0,l.apply(u,arguments)},u.uri=i.uri,u.requestTime=Date.now(),u};return e.original=!0,e},xP=function(e){var n=e.offset+e.length-1,i=e.offset;return"bytes="+i+"-"+n},Gh=function(e){var n={};return e.byterange&&(n.Range=xP(e.byterange)),n},bP=function(e,n){return e.start(n)+"-"+e.end(n)},EP=function(e,n){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(n%2?" ":"")},CP=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},ST=function(e){var n={};return Object.keys(e).forEach(function(i){var r=e[i];ArrayBuffer.isView(r)?n[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:n[i]=r}),n},xl=function(e){var n=e.byterange||{length:1/0,offset:0};return[n.length,n.offset,e.resolvedUri].join(",")},xT=function(e){return e.resolvedUri},bT=function(e){for(var n=Array.prototype.slice.call(e),i=16,r="",a,s,o=0;o<n.length/i;o++)a=n.slice(o*i,o*i+i).map(EP).join(""),s=n.slice(o*i,o*i+i).map(CP).join(""),r+=a+" "+s+`
`;return r},wP=function(e){var n=e.bytes;return bT(n)},kP=function(e){var n="",i;for(i=0;i<e.length;i++)n+=bP(e,i)+" ";return n},PP=Object.freeze({__proto__:null,createTransferableMessage:ST,initSegmentId:xl,segmentKeyId:xT,hexDump:bT,tagDump:wP,textRanges:kP}),ET=.25,IP=function(e,n){if(!n.dateTimeObject)return null;var i=n.videoTimingInfo.transmuxerPrependedSeconds,r=n.videoTimingInfo.transmuxedPresentationStart,a=r+i,s=e-a;return new Date(n.dateTimeObject.getTime()+s*1e3)},AP=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},DP=function(e,n){var i;try{i=new Date(e)}catch{return null}if(!n||!n.segments||n.segments.length===0)return null;var r=n.segments[0];if(i<r.dateTimeObject)return null;for(var a=0;a<n.segments.length-1;a++){r=n.segments[a];var s=n.segments[a+1].dateTimeObject;if(i<s)break}var o=n.segments[n.segments.length-1],u=o.dateTimeObject,l=o.videoTimingInfo?AP(o.videoTimingInfo):o.duration+o.duration*ET,c=new Date(u.getTime()+l*1e3);return i>c?null:(i>u&&(r=o),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:kt.duration(n,n.mediaSequence+n.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},LP=function(e,n){if(!n||!n.segments||n.segments.length===0)return null;for(var i=0,r,a=0;a<n.segments.length&&(r=n.segments[a],i=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:i+r.duration,!(e<=i));a++);var s=n.segments[n.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+s.duration*ET)return null;r=s}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:i-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},OP=function(e,n){var i,r;try{i=new Date(e),r=new Date(n)}catch{}var a=i.getTime(),s=r.getTime();return(s-a)/1e3},RP=function(e){if(!e.segments||e.segments.length===0)return!1;for(var n=0;n<e.segments.length;n++){var i=e.segments[n];if(!i.dateTimeObject)return!1}return!0},MP=function(e){var n=e.playlist,i=e.time,r=i===void 0?void 0:i,a=e.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!n||r===void 0)return a({message:"getProgramTime: playlist and time must be provided"});var s=LP(r,n);if(!s)return a({message:"valid programTime was not found"});if(s.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:r},u=IP(r,s.segment);return u&&(o.programDateTime=u.toISOString()),a(null,o)},NP=function t(e){var n=e.programTime,i=e.playlist,r=e.retryCount,a=r===void 0?2:r,s=e.seekTo,o=e.pauseAfterSeek,u=o===void 0?!0:o,l=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof n=="undefined"||!i||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!RP(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var m=DP(n,i);if(!m)return c({message:n+" was not found in the stream"});var f=m.segment,_=OP(f.dateTimeObject,n);if(m.type==="estimate"){if(a===0)return c({message:n+" is not buffered yet. Try again"});s(m.estimatedStart+_),l.one("seeked",function(){t({programTime:n,playlist:i,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:c})});return}var b=f.start+_,S=function(){return c(null,l.currentTime())};l.one("seeked",S),u&&l.pause(),s(b)},$h=function(e,n){if(e.readyState===4)return n()},FP=function(e,n,i){var r=[],a,s=!1,o=function(f,_,b,S){return _.abort(),s=!0,i(f,_,b,S)},u=function(f,_){if(!s){if(f)return o(f,_,"",r);var b=_.responseText.substring(r&&r.byteLength||0,_.responseText.length);if(r=cw(r,cy(b,!0)),a=a||Ps(r),r.length<10||a&&r.length<a+2)return $h(_,function(){return o(f,_,"",r)});var S=Lf(r);return S==="ts"&&r.length<188?$h(_,function(){return o(f,_,"",r)}):!S&&r.length<376?$h(_,function(){return o(f,_,"",r)}):o(null,_,S,r)}},l={uri:e,beforeSend:function(f){f.overrideMimeType("text/plain; charset=x-user-defined"),f.addEventListener("progress",function(_){return _.total,_.loaded,zh(f,null,{statusCode:f.status},u)})}},c=n(l,function(m,f){return zh(c,m,f,u)});return c},UP=R.EventTarget,CT=R.mergeOptions,wT=function(e,n){if(!_T(e,n)||e.sidx&&n.sidx&&(e.sidx.offset!==n.sidx.offset||e.sidx.length!==n.sidx.length))return!1;if(!e.sidx&&n.sidx||e.sidx&&!n.sidx||e.segments&&!n.segments||!e.segments&&n.segments)return!1;if(!e.segments&&!n.segments)return!0;for(var i=0;i<e.segments.length;i++){var r=e.segments[i],a=n.segments[i];if(r.uri!==a.uri)return!1;if(!(!r.byterange&&!a.byterange)){var s=r.byterange,o=a.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},BP=function(e){var n=e.masterXml,i=e.srcUrl,r=e.clientOffset,a=e.sidxMapping,s=rw(n,{manifestUri:i,clientOffset:r,sidxMapping:a});return gT(s,i),s},jP=function(e,n,i){for(var r=!0,a=CT(e,{duration:n.duration,minimumUpdatePeriod:n.minimumUpdatePeriod}),s=0;s<n.playlists.length;s++){var o=n.playlists[s];if(o.sidx){var u=Uu(o.sidx);i&&i[u]&&i[u].sidx&&Cf(o,i[u].sidx,o.sidx.resolvedUri)}var l=Vh(a,o,wT);l&&(a=l,r=!1)}return Gs(n,function(c,m,f,_){if(c.playlists&&c.playlists.length){var b=c.playlists[0].id,S=Vh(a,c.playlists[0],wT);S&&(a=S,a.mediaGroups[m][f][_].playlists[0]=a.playlists[b],r=!1)}}),n.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:a},HP=function(e,n){var i=Boolean(!e.map&&!n.map),r=i||Boolean(e.map&&n.map&&e.map.byterange.offset===n.map.byterange.offset&&e.map.byterange.length===n.map.byterange.length);return r&&e.uri===n.uri&&e.byterange.offset===n.byterange.offset&&e.byterange.length===n.byterange.length},kT=function(e,n){var i={};for(var r in e){var a=e[r],s=a.sidx;if(s){var o=Uu(s);if(!n[o])break;var u=n[o].sidxInfo;HP(u,s)&&(i[o]=n[o])}}return i},VP=function(e,n){var i=kT(e.playlists,n),r=i;return Gs(e,function(a,s,o,u){if(a.playlists&&a.playlists.length){var l=a.playlists;r=CT(r,kT(l,n))}}),r},qh=function(t){$(e,t);function e(i,r,a,s){var o;a===void 0&&(a={}),o=t.call(this)||this,o.masterPlaylistLoader_=s||re(o),s||(o.isMaster_=!0);var u=a,l=u.withCredentials,c=l===void 0?!1:l,m=u.handleManifestRedirects,f=m===void 0?!1:m;if(o.vhs_=r,o.withCredentials=c,o.handleManifestRedirects=f,!i)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=er("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=i,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=i,o}var n=e.prototype;return n.requestErrored_=function(r,a,s){if(!this.request)return!0;if(this.request=null,r)return this.error=typeof r=="object"&&!(r instanceof Error)?r:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},s&&(this.state=s),this.trigger("error"),!0},n.addSidxSegments_=function(r,a,s){var o=this,u=r.sidx&&Uu(r.sidx);if(!r.sidx||!u||this.masterPlaylistLoader_.sidxMapping_[u]){this.mediaRequest_=D.setTimeout(function(){return s(!1)},0);return}var l=yl(this.handleManifestRedirects,r.sidx.resolvedUri),c=function(f,_){if(!o.requestErrored_(f,_,a)){var b=o.masterPlaylistLoader_.sidxMapping_,S;try{S=aw(Z(_.response).subarray(8))}catch(v){o.requestErrored_(v,_,a);return}return b[u]={sidxInfo:r.sidx,sidx:S},Cf(r,S,r.sidx.resolvedUri),s(!0)}};this.request=FP(l,this.vhs_.xhr,function(m,f,_,b){if(m)return c(m,f);if(!_||_!=="mp4")return c({status:f.status,message:"Unsupported "+(_||"unknown")+" container type for sidx segment at URL: "+l,response:"",playlist:r,internal:!0,blacklistDuration:1/0,code:2},f);var S=r.sidx.byterange,v=S.offset,x=S.length;if(b.length>=x+v)return c(m,{response:b.subarray(v,v+x),status:f.status,uri:f.uri});o.request=o.vhs_.xhr({uri:l,responseType:"arraybuffer",headers:Gh({byterange:r.sidx.byterange})},c)})},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},D.clearTimeout(this.minimumUpdatePeriodTimeout_),D.clearTimeout(this.mediaRequest_),D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},n.media=function(r){var a=this;if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof r=="string"){if(!this.masterPlaylistLoader_.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.masterPlaylistLoader_.master.playlists[r]}var o=!this.media_||r.id!==this.media_.id;if(o&&this.loadedPlaylists_[r.id]&&this.loadedPlaylists_[r.id].endList){this.state="HAVE_METADATA",this.media_=r,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(r,s,function(u){a.haveMetadata({startingState:s,playlist:r})}))},n.haveMetadata=function(r){var a=r.startingState,s=r.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),a==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(D.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},n.load=function(r){var a=this;D.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(r){var o=s?s.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=D.setTimeout(function(){return a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},n.start=function(){var r=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=D.setTimeout(function(){return r.haveMaster_()},0);return}this.requestMaster_(function(a,s){r.haveMaster_(),!r.hasPendingRequest()&&!r.media_&&r.media(r.masterPlaylistLoader_.master.playlists[0])})},n.requestMaster_=function(r){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(a.requestErrored_(s,o)){a.state==="HAVE_NOTHING"&&(a.started=!1);return}var u=o.responseText!==a.masterPlaylistLoader_.masterXml_;if(a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=yl(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),u){a.handleMaster_(),a.syncClientServerClock_(function(){return r(o,u)});return}return r(o,u)})},n.syncClientServerClock_=function(r){var a=this,s=nw(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),r();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),r();this.request=this.vhs_.xhr({uri:Zt(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,u){if(!!a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),r();var l;s.method==="HEAD"?!u.responseHeaders||!u.responseHeaders.date?l=a.masterLoaded_:l=Date.parse(u.responseHeaders.date):l=Date.parse(u.responseText),a.masterPlaylistLoader_.clientOffset_=l-Date.now(),r()}})},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var r=BP({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),a=this.masterPlaylistLoader_.master;a&&(r=jP(a,r,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=r||a;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!a||r&&r.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(r)},n.updateMinimumUpdatePeriodTimeout_=function(){var r=this.masterPlaylistLoader_;r.createMupOnMedia_&&(r.off("loadedmetadata",r.createMupOnMedia_),r.createMupOnMedia_=null),r.minimumUpdatePeriodTimeout_&&(D.clearTimeout(r.minimumUpdatePeriodTimeout_),r.minimumUpdatePeriodTimeout_=null);var a=r.master&&r.master.minimumUpdatePeriod;if(a===0&&(r.media()?a=r.media().targetDuration*1e3:(r.createMupOnMedia_=r.updateMinimumUpdatePeriodTimeout_,r.one("loadedmetadata",r.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout");return}this.createMUPTimeout_(a)},n.createMUPTimeout_=function(r){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=D.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(r)},r)},n.refreshXml_=function(){var r=this;this.requestMaster_(function(a,s){!s||(r.media_&&(r.media_=r.masterPlaylistLoader_.master.playlists[r.media_.id]),r.masterPlaylistLoader_.sidxMapping_=VP(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.sidxMapping_),r.addSidxSegments_(r.media(),r.state,function(o){r.refreshMedia_(r.media().id)}))})},n.refreshMedia_=function(r){var a=this;if(!r)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[r];if(o?this.media_=s[r]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var u=function l(){a.media().endList||(a.mediaUpdateTimeout=D.setTimeout(function(){a.trigger("mediaupdatetimeout"),l()},Wh(a.media(),Boolean(o))))};u()}this.trigger("loadedplaylist")},e}(UP),qe={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},WP=function(e){for(var n=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n.buffer},PT=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},zP=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var n=new BlobBuilder;return n.append(e),URL.createObjectURL(n.getBlob())}},IT=function(e){return function(){var n=zP(e),i=PT(new Worker(n));i.objURL=n;var r=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(n),r.call(this)},i}},AT=function(e){return"var browserWorkerPolyFill = "+PT.toString()+`;
browserWorkerPolyFill(self);
`+e},DT=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},GP=AT(DT(function(){var t=function(){this.init=function(){var d={};this.on=function(p,h){d[p]||(d[p]=[]),d[p]=d[p].concat(h)},this.off=function(p,h){var g;return d[p]?(g=d[p].indexOf(h),d[p]=d[p].slice(),d[p].splice(g,1),g>-1):!1},this.trigger=function(p){var h,g,y,T;if(h=d[p],!!h)if(arguments.length===2)for(y=h.length,g=0;g<y;++g)h[g].call(this,arguments[1]);else{for(T=[],g=arguments.length,g=1;g<arguments.length;++g)T.push(arguments[g]);for(y=h.length,g=0;g<y;++g)h[g].apply(this,T)}},this.dispose=function(){d={}}}};t.prototype.pipe=function(E){return this.on("data",function(d){E.push(d)}),this.on("done",function(d){E.flush(d)}),this.on("partialdone",function(d){E.partialFlush(d)}),this.on("endedtimeline",function(d){E.endTimeline(d)}),this.on("reset",function(d){E.reset(d)}),E},t.prototype.push=function(E){this.trigger("data",E)},t.prototype.flush=function(E){this.trigger("done",E)},t.prototype.partialFlush=function(E){this.trigger("partialdone",E)},t.prototype.endTimeline=function(E){this.trigger("endedtimeline",E)},t.prototype.reset=function(E){this.trigger("reset",E)};var e=t,n=Math.pow(2,32)-1,i,r,a,s,o,u,l,c,m,f,_,b,S,v,x,C,k,I,M,N,B,U,F,H,se,le,ie,xe,oe,de,pe,He,et,zt,q,J;(function(){var E;if(F={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},typeof Uint8Array!="undefined"){for(E in F)F.hasOwnProperty(E)&&(F[E]=[E.charCodeAt(0),E.charCodeAt(1),E.charCodeAt(2),E.charCodeAt(3)]);H=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),le=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),se=new Uint8Array([0,0,0,1]),ie=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),xe=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),oe={video:ie,audio:xe},He=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),pe=new Uint8Array([0,0,0,0,0,0,0,0]),et=new Uint8Array([0,0,0,0,0,0,0,0]),zt=et,q=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),J=et,de=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),i=function(d){var p=[],h=0,g,y,T;for(g=1;g<arguments.length;g++)p.push(arguments[g]);for(g=p.length;g--;)h+=p[g].byteLength;for(y=new Uint8Array(h+8),T=new DataView(y.buffer,y.byteOffset,y.byteLength),T.setUint32(0,y.byteLength),y.set(d,4),g=0,h=8;g<p.length;g++)y.set(p[g],h),h+=p[g].byteLength;return y},r=function(){return i(F.dinf,i(F.dref,He))},a=function(d){return i(F.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},s=function(){return i(F.ftyp,H,se,H,le)},C=function(d){return i(F.hdlr,oe[d])},o=function(d){return i(F.mdat,d)},x=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(p[12]=d.samplerate>>>24&255,p[13]=d.samplerate>>>16&255,p[14]=d.samplerate>>>8&255,p[15]=d.samplerate&255),i(F.mdhd,p)},v=function(d){return i(F.mdia,x(d),C(d.type),l(d))},u=function(d){return i(F.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},l=function(d){return i(F.minf,d.type==="video"?i(F.vmhd,de):i(F.smhd,pe),r(),I(d))},c=function(d,p){for(var h=[],g=p.length;g--;)h[g]=N(p[g]);return i.apply(null,[F.moof,u(d)].concat(h))},m=function(d){for(var p=d.length,h=[];p--;)h[p]=b(d[p]);return i.apply(null,[F.moov,_(4294967295)].concat(h).concat(f(d)))},f=function(d){for(var p=d.length,h=[];p--;)h[p]=B(d[p]);return i.apply(null,[F.mvex].concat(h))},_=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(F.mvhd,p)},k=function(d){var p=d.samples||[],h=new Uint8Array(4+p.length),g,y;for(y=0;y<p.length;y++)g=p[y].flags,h[y+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return i(F.sdtp,h)},I=function(d){return i(F.stbl,M(d),i(F.stts,J),i(F.stsc,zt),i(F.stsz,q),i(F.stco,et))},function(){var E,d;M=function(h){return i(F.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),h.type==="video"?E(h):d(h))},E=function(h){var g=h.sps||[],y=h.pps||[],T=[],w=[],P,L;for(P=0;P<g.length;P++)T.push((g[P].byteLength&65280)>>>8),T.push(g[P].byteLength&255),T=T.concat(Array.prototype.slice.call(g[P]));for(P=0;P<y.length;P++)w.push((y[P].byteLength&65280)>>>8),w.push(y[P].byteLength&255),w=w.concat(Array.prototype.slice.call(y[P]));if(L=[F.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(h.width&65280)>>8,h.width&255,(h.height&65280)>>8,h.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(F.avcC,new Uint8Array([1,h.profileIdc,h.profileCompatibility,h.levelIdc,255].concat([g.length],T,[y.length],w))),i(F.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],h.sarRatio){var A=h.sarRatio[0],O=h.sarRatio[1];L.push(i(F.pasp,new Uint8Array([(A&4278190080)>>24,(A&16711680)>>16,(A&65280)>>8,A&255,(O&4278190080)>>24,(O&16711680)>>16,(O&65280)>>8,O&255])))}return i.apply(null,L)},d=function(h){return i(F.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(h.channelcount&65280)>>8,h.channelcount&255,(h.samplesize&65280)>>8,h.samplesize&255,0,0,0,0,(h.samplerate&65280)>>8,h.samplerate&255,0,0]),a(h))}}(),S=function(d){var p=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return i(F.tkhd,p)},N=function(d){var p,h,g,y,T,w,P;return p=i(F.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),w=Math.floor(d.baseMediaDecodeTime/(n+1)),P=Math.floor(d.baseMediaDecodeTime%(n+1)),h=i(F.tfdt,new Uint8Array([1,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,w&255,P>>>24&255,P>>>16&255,P>>>8&255,P&255])),T=32+20+8+16+8+8,d.type==="audio"?(g=U(d,T),i(F.traf,p,h,g)):(y=k(d),g=U(d,y.length+T),i(F.traf,p,h,g,y))},b=function(d){return d.duration=d.duration||4294967295,i(F.trak,S(d),v(d))},B=function(d){var p=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(p[p.length-1]=0),i(F.trex,p)},function(){var E,d,p;p=function(g,y){var T=0,w=0,P=0,L=0;return g.length&&(g[0].duration!==void 0&&(T=1),g[0].size!==void 0&&(w=2),g[0].flags!==void 0&&(P=4),g[0].compositionTimeOffset!==void 0&&(L=8)),[0,0,T|w|P|L,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(y&4278190080)>>>24,(y&16711680)>>>16,(y&65280)>>>8,y&255]},d=function(g,y){var T,w,P,L,A,O;for(L=g.samples||[],y+=8+12+16*L.length,P=p(L,y),w=new Uint8Array(P.length+L.length*16),w.set(P),T=P.length,O=0;O<L.length;O++)A=L[O],w[T++]=(A.duration&4278190080)>>>24,w[T++]=(A.duration&16711680)>>>16,w[T++]=(A.duration&65280)>>>8,w[T++]=A.duration&255,w[T++]=(A.size&4278190080)>>>24,w[T++]=(A.size&16711680)>>>16,w[T++]=(A.size&65280)>>>8,w[T++]=A.size&255,w[T++]=A.flags.isLeading<<2|A.flags.dependsOn,w[T++]=A.flags.isDependedOn<<6|A.flags.hasRedundancy<<4|A.flags.paddingValue<<1|A.flags.isNonSyncSample,w[T++]=A.flags.degradationPriority&240<<8,w[T++]=A.flags.degradationPriority&15,w[T++]=(A.compositionTimeOffset&4278190080)>>>24,w[T++]=(A.compositionTimeOffset&16711680)>>>16,w[T++]=(A.compositionTimeOffset&65280)>>>8,w[T++]=A.compositionTimeOffset&255;return i(F.trun,w)},E=function(g,y){var T,w,P,L,A,O;for(L=g.samples||[],y+=8+12+8*L.length,P=p(L,y),T=new Uint8Array(P.length+L.length*8),T.set(P),w=P.length,O=0;O<L.length;O++)A=L[O],T[w++]=(A.duration&4278190080)>>>24,T[w++]=(A.duration&16711680)>>>16,T[w++]=(A.duration&65280)>>>8,T[w++]=A.duration&255,T[w++]=(A.size&4278190080)>>>24,T[w++]=(A.size&16711680)>>>16,T[w++]=(A.size&65280)>>>8,T[w++]=A.size&255;return i(F.trun,T)},U=function(g,y){return g.type==="audio"?E(g,y):d(g,y)}}();var te={ftyp:s,mdat:o,moof:c,moov:m,initSegment:function(d){var p=s(),h=m(d),g;return g=new Uint8Array(p.byteLength+h.byteLength),g.set(p),g.set(h,p.byteLength),g}},ve=function(d){var p,h,g=[],y=[];for(y.byteLength=0,y.nalCount=0,y.duration=0,g.byteLength=0,p=0;p<d.length;p++)h=d[p],h.nalUnitType==="access_unit_delimiter_rbsp"?(g.length&&(g.duration=h.dts-g.dts,y.byteLength+=g.byteLength,y.nalCount+=g.length,y.duration+=g.duration,y.push(g)),g=[h],g.byteLength=h.data.byteLength,g.pts=h.pts,g.dts=h.dts):(h.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(g.keyFrame=!0),g.duration=h.dts-g.dts,g.byteLength+=h.data.byteLength,g.push(h));return y.length&&(!g.duration||g.duration<=0)&&(g.duration=y[y.length-1].duration),y.byteLength+=g.byteLength,y.nalCount+=g.length,y.duration+=g.duration,y.push(g),y},Ue=function(d){var p,h,g=[],y=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,y.byteLength=0,y.nalCount=0,y.duration=0,y.pts=d[0].pts,y.dts=d[0].dts,p=0;p<d.length;p++)h=d[p],h.keyFrame?(g.length&&(y.push(g),y.byteLength+=g.byteLength,y.nalCount+=g.nalCount,y.duration+=g.duration),g=[h],g.nalCount=h.length,g.byteLength=h.byteLength,g.pts=h.pts,g.dts=h.dts,g.duration=h.duration):(g.duration+=h.duration,g.nalCount+=h.length,g.byteLength+=h.byteLength,g.push(h));return y.length&&g.duration<=0&&(g.duration=y[y.length-1].duration),y.byteLength+=g.byteLength,y.nalCount+=g.nalCount,y.duration+=g.duration,y.push(g),y},mr=function(d){var p;return!d[0][0].keyFrame&&d.length>1&&(p=d.shift(),d.byteLength-=p.byteLength,d.nalCount-=p.nalCount,d[0][0].dts=p.dts,d[0][0].pts=p.pts,d[0][0].duration+=p.duration),d},gr=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Br=function(d,p){var h=gr();return h.dataOffset=p,h.compositionTimeOffset=d.pts-d.dts,h.duration=d.duration,h.size=4*d.length,h.size+=d.byteLength,d.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},jr=function(d,p){var h,g,y,T,w,P=p||0,L=[];for(h=0;h<d.length;h++)for(T=d[h],g=0;g<T.length;g++)w=T[g],y=Br(w,P),P+=y.size,L.push(y);return L},hS=function(d){var p,h,g,y,T,w,P=0,L=d.byteLength,A=d.nalCount,O=L+4*A,j=new Uint8Array(O),K=new DataView(j.buffer);for(p=0;p<d.length;p++)for(y=d[p],h=0;h<y.length;h++)for(T=y[h],g=0;g<T.length;g++)w=T[g],K.setUint32(P,w.data.byteLength),P+=4,j.set(w.data,P),P+=w.data.byteLength;return j},pS=function(d,p){var h,g=p||0,y=[];return h=Br(d,g),y.push(h),y},mS=function(d){var p,h,g=0,y=d.byteLength,T=d.length,w=y+4*T,P=new Uint8Array(w),L=new DataView(P.buffer);for(p=0;p<d.length;p++)h=d[p],L.setUint32(g,h.data.byteLength),g+=4,P.set(h.data,g),g+=h.data.byteLength;return P},ua={groupNalsIntoFrames:ve,groupFramesIntoGops:Ue,extendFirstKeyFrame:mr,generateSampleTable:jr,concatenateNalData:hS,generateSampleTableForFrame:pS,concatenateNalDataForFrame:mS},Hr=[33,16,5,32,164,27],Dl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],me=function(d){for(var p=[];d--;)p.push(0);return p},gS=function(d){return Object.keys(d).reduce(function(p,h){return p[h]=new Uint8Array(d[h].reduce(function(g,y){return g.concat(y)},[])),p},{})},Ll,vS=function(){if(!Ll){var d={96e3:[Hr,[227,64],me(154),[56]],88200:[Hr,[231],me(170),[56]],64e3:[Hr,[248,192],me(240),[56]],48e3:[Hr,[255,192],me(268),[55,148,128],me(54),[112]],44100:[Hr,[255,192],me(268),[55,163,128],me(84),[112]],32e3:[Hr,[255,192],me(268),[55,234],me(226),[112]],24e3:[Hr,[255,192],me(268),[55,255,128],me(268),[111,112],me(126),[224]],16e3:[Hr,[255,192],me(268),[55,255,128],me(268),[111,255],me(269),[223,108],me(195),[1,192]],12e3:[Dl,me(268),[3,127,248],me(268),[6,255,240],me(268),[13,255,224],me(268),[27,253,128],me(259),[56]],11025:[Dl,me(268),[3,127,248],me(268),[6,255,240],me(268),[13,255,224],me(268),[27,255,192],me(268),[55,175,128],me(108),[112]],8e3:[Dl,me(268),[3,121,16],me(47),[7]]};Ll=gS(d)}return Ll},Ol=9e4,Rl,Ml,Qs,Nl,np,ip,ap;Rl=function(d){return d*Ol},Ml=function(d,p){return d*p},Qs=function(d){return d/Ol},Nl=function(d,p){return d/p},np=function(d,p){return Rl(Nl(d,p))},ip=function(d,p){return Ml(Qs(d),p)},ap=function(d,p,h){return Qs(h?d:d-p)};var he={ONE_SECOND_IN_TS:Ol,secondsToVideoTs:Rl,secondsToAudioTs:Ml,videoTsToSeconds:Qs,audioTsToSeconds:Nl,audioTsToVideoTs:np,videoTsToAudioTs:ip,metadataTsToSeconds:ap},yS=function(d){var p,h,g=0;for(p=0;p<d.length;p++)h=d[p],g+=h.data.byteLength;return g},_S=function(d,p,h,g){var y,T=0,w=0,P=0,L=0,A,O,j;if(!!p.length&&(y=he.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),T=Math.ceil(he.ONE_SECOND_IN_TS/(d.samplerate/1024)),h&&g&&(w=y-Math.max(h,g),P=Math.floor(w/T),L=P*T),!(P<1||L>he.ONE_SECOND_IN_TS/2))){for(A=vS()[d.samplerate],A||(A=p[0].data),O=0;O<P;O++)j=p[0],p.splice(0,0,{data:A,dts:j.dts-T,pts:j.pts-T});return d.baseMediaDecodeTime-=Math.floor(he.videoTsToAudioTs(L,d.samplerate)),L}},TS=function(d,p,h){return p.minSegmentDts>=h?d:(p.minSegmentDts=1/0,d.filter(function(g){return g.dts>=h?(p.minSegmentDts=Math.min(p.minSegmentDts,g.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},SS=function(d){var p,h,g=[];for(p=0;p<d.length;p++)h=d[p],g.push({size:h.data.byteLength,duration:1024});return g},xS=function(d){var p,h,g=0,y=new Uint8Array(yS(d));for(p=0;p<d.length;p++)h=d[p],y.set(h.data,g),g+=h.data.byteLength;return y},Ys={prefixWithSilence:_S,trimAdtsFramesByEarliestDts:TS,generateSampleTable:SS,concatenateFrameData:xS},bS=he.ONE_SECOND_IN_TS,ES=function(d,p){typeof p.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=p.pts),d.minSegmentPts===void 0?d.minSegmentPts=p.pts:d.minSegmentPts=Math.min(d.minSegmentPts,p.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=p.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,p.pts)),typeof p.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=p.dts),d.minSegmentDts===void 0?d.minSegmentDts=p.dts:d.minSegmentDts=Math.min(d.minSegmentDts,p.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=p.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,p.dts))},CS=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},wS=function(d,p){var h,g,y=d.minSegmentDts;return p||(y-=d.timelineStartInfo.dts),h=d.timelineStartInfo.baseMediaDecodeTime,h+=y,h=Math.max(0,h),d.type==="audio"&&(g=d.samplerate/bS,h*=g,h=Math.floor(h)),h},Gt={clearDtsInfo:CS,calculateTrackBaseMediaDecodeTime:wS,collectDtsInfo:ES},sp=4,kS=128,PS=function(d){for(var p=0,h={payloadType:-1,payloadSize:0},g=0,y=0;p<d.byteLength&&d[p]!==kS;){for(;d[p]===255;)g+=255,p++;for(g+=d[p++];d[p]===255;)y+=255,p++;if(y+=d[p++],!h.payload&&g===sp){var T=String.fromCharCode(d[p+3],d[p+4],d[p+5],d[p+6]);if(T==="GA94"){h.payloadType=g,h.payloadSize=y,h.payload=d.subarray(p,p+y);break}else h.payload=void 0}p+=y,g=0,y=0}return h},IS=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!=49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},AS=function(d,p){var h=[],g,y,T,w;if(!(p[0]&64))return h;for(y=p[0]&31,g=0;g<y;g++)T=g*3,w={type:p[T+2]&3,pts:d},p[T+2]&4&&(w.ccData=p[T+3]<<8|p[T+4],h.push(w));return h},DS=function(d){for(var p=d.byteLength,h=[],g=1,y,T;g<p-2;)d[g]===0&&d[g+1]===0&&d[g+2]===3?(h.push(g+2),g+=2):g++;if(h.length===0)return d;y=p-h.length,T=new Uint8Array(y);var w=0;for(g=0;g<y;w++,g++)w===h[0]&&(w++,h.shift()),T[g]=d[w];return T},la={parseSei:PS,parseUserData:IS,parseCaptionPackets:AS,discardEmulationPreventionBytes:DS,USER_DATA_REGISTERED_ITU_T_T35:sp},Pt=function E(d){d=d||{},E.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ie(0,0),new Ie(0,1),new Ie(1,0),new Ie(1,1)],this.parse708captions_&&(this.cc708Stream_=new ye({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("partialdone",this.trigger.bind(this,"partialdone")),p.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Pt.prototype=new e,Pt.prototype.push=function(E){var d,p,h;if(E.nalUnitType==="sei_rbsp"&&(d=la.parseSei(E.escapedRBSP),!!d.payload&&d.payloadType===la.USER_DATA_REGISTERED_ITU_T_T35&&(p=la.parseUserData(d),!!p))){if(E.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(E.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}h=la.parseCaptionPackets(E.pts,p),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==E.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=E.dts}},Pt.prototype.flushCCStreams=function(E){this.ccStreams_.forEach(function(d){return E==="flush"?d.flush():d.partialFlush()},this)},Pt.prototype.flushStream=function(E){if(!this.captionPackets_.length){this.flushCCStreams(E);return}this.captionPackets_.forEach(function(d,p){d.presortIndex=p}),this.captionPackets_.sort(function(d,p){return d.pts===p.pts?d.presortIndex-p.presortIndex:d.pts-p.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(E)},Pt.prototype.flush=function(){return this.flushStream("flush")},Pt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Pt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(E){E.reset()})},Pt.prototype.dispatchCea608Packet=function(E){this.setsTextOrXDSActive(E)?this.activeCea608Channel_[E.type]=null:this.setsChannel1Active(E)?this.activeCea608Channel_[E.type]=0:this.setsChannel2Active(E)&&(this.activeCea608Channel_[E.type]=1),this.activeCea608Channel_[E.type]!==null&&this.ccStreams_[(E.type<<1)+this.activeCea608Channel_[E.type]].push(E)},Pt.prototype.setsChannel1Active=function(E){return(E.ccData&30720)==4096},Pt.prototype.setsChannel2Active=function(E){return(E.ccData&30720)==6144},Pt.prototype.setsTextOrXDSActive=function(E){return(E.ccData&28928)==256||(E.ccData&30974)==4138||(E.ccData&30974)==6186},Pt.prototype.dispatchCea708Packet=function(E){this.parse708captions_&&this.cc708Stream_.push(E)};var LS={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},OS=function(d){var p=LS[d]||d;return d&4096&&d===p?"":String.fromCharCode(p)},Js=function(d){return 32<=d&&d<=127||160<=d&&d<=255},vr=function(d){this.windowNum=d,this.reset()};vr.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},vr.prototype.getText=function(){return this.rows.join(`
`)},vr.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},vr.prototype.newLine=function(E){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(E),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},vr.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},vr.prototype.addText=function(E){this.rows[this.rowIdx]+=E},vr.prototype.backspace=function(){if(!this.isEmpty()){var E=this.rows[this.rowIdx];this.rows[this.rowIdx]=E.substr(0,E.length-1)}};var Zs=function(d,p,h){this.serviceNum=d,this.text="",this.currentWindow=new vr(-1),this.windows=[],this.stream=h,typeof p=="string"&&this.createTextDecoder(p)};Zs.prototype.init=function(E,d){this.startPts=E;for(var p=0;p<8;p++)this.windows[p]=new vr(p),typeof d=="function"&&(this.windows[p].beforeRowOverflow=d)},Zs.prototype.setCurrentWindow=function(E){this.currentWindow=this.windows[E]},Zs.prototype.createTextDecoder=function(E){if(typeof TextDecoder=="undefined")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(E)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+E+" encoding. "+d})}};var ye=function E(d){d=d||{},E.prototype.init.call(this);var p=this,h=d.captionServices||{},g={},y;Object.keys(h).forEach(function(T){y=h[T],/^SERVICE/.test(T)&&(g[T]=y.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(T){T.type===3?(p.new708Packet(),p.add708Bytes(T)):(p.current708Packet===null&&p.new708Packet(),p.add708Bytes(T))}};ye.prototype=new e,ye.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ye.prototype.add708Bytes=function(E){var d=E.ccData,p=d>>>8,h=d&255;this.current708Packet.ptsVals.push(E.pts),this.current708Packet.data.push(p),this.current708Packet.data.push(h)},ye.prototype.push708Packet=function(){var E=this.current708Packet,d=E.data,p=null,h=null,g=0,y=d[g++];for(E.seq=y>>6,E.sizeCode=y&63;g<d.length;g++)y=d[g++],p=y>>5,h=y&31,p===7&&h>0&&(y=d[g++],p=y),this.pushServiceBlock(p,g,h),h>0&&(g+=h-1)},ye.prototype.pushServiceBlock=function(E,d,p){var h,g=d,y=this.current708Packet.data,T=this.services[E];for(T||(T=this.initService(E,g));g<d+p&&g<y.length;g++)h=y[g],Js(h)?g=this.handleText(g,T):h===24?g=this.multiByteCharacter(g,T):h===16?g=this.extendedCommands(g,T):128<=h&&h<=135?g=this.setCurrentWindow(g,T):152<=h&&h<=159?g=this.defineWindow(g,T):h===136?g=this.clearWindows(g,T):h===140?g=this.deleteWindows(g,T):h===137?g=this.displayWindows(g,T):h===138?g=this.hideWindows(g,T):h===139?g=this.toggleWindows(g,T):h===151?g=this.setWindowAttributes(g,T):h===144?g=this.setPenAttributes(g,T):h===145?g=this.setPenColor(g,T):h===146?g=this.setPenLocation(g,T):h===143?T=this.reset(g,T):h===8?T.currentWindow.backspace():h===12?T.currentWindow.clearText():h===13?T.currentWindow.pendingNewLine=!0:h===14?T.currentWindow.clearText():h===141&&g++},ye.prototype.extendedCommands=function(E,d){var p=this.current708Packet.data,h=p[++E];return Js(h)&&(E=this.handleText(E,d,{isExtended:!0})),E},ye.prototype.getPts=function(E){return this.current708Packet.ptsVals[Math.floor(E/2)]},ye.prototype.initService=function(E,d){var p="SERVICE"+E,h=this,p,g;return p in this.serviceEncodings&&(g=this.serviceEncodings[p]),this.services[E]=new Zs(E,g,h),this.services[E].init(this.getPts(d),function(y){h.flushDisplayed(y,h.services[E])}),this.services[E]},ye.prototype.handleText=function(E,d,p){var h=p&&p.isExtended,g=p&&p.isMultiByte,y=this.current708Packet.data,T=h?4096:0,w=y[E],P=y[E+1],L=d.currentWindow,A,O;return d.textDecoder_&&!h?(g?(O=[w,P],E++):O=[w],A=d.textDecoder_.decode(new Uint8Array(O))):A=OS(T|w),L.pendingNewLine&&!L.isEmpty()&&L.newLine(this.getPts(E)),L.pendingNewLine=!1,L.addText(A),E},ye.prototype.multiByteCharacter=function(E,d){var p=this.current708Packet.data,h=p[E+1],g=p[E+2];return Js(h)&&Js(g)&&(E=this.handleText(++E,d,{isMultiByte:!0})),E},ye.prototype.setCurrentWindow=function(E,d){var p=this.current708Packet.data,h=p[E],g=h&7;return d.setCurrentWindow(g),E},ye.prototype.defineWindow=function(E,d){var p=this.current708Packet.data,h=p[E],g=h&7;d.setCurrentWindow(g);var y=d.currentWindow;return h=p[++E],y.visible=(h&32)>>5,y.rowLock=(h&16)>>4,y.columnLock=(h&8)>>3,y.priority=h&7,h=p[++E],y.relativePositioning=(h&128)>>7,y.anchorVertical=h&127,h=p[++E],y.anchorHorizontal=h,h=p[++E],y.anchorPoint=(h&240)>>4,y.rowCount=h&15,h=p[++E],y.columnCount=h&63,h=p[++E],y.windowStyle=(h&56)>>3,y.penStyle=h&7,y.virtualRowCount=y.rowCount+1,E},ye.prototype.setWindowAttributes=function(E,d){var p=this.current708Packet.data,h=p[E],g=d.currentWindow.winAttr;return h=p[++E],g.fillOpacity=(h&192)>>6,g.fillRed=(h&48)>>4,g.fillGreen=(h&12)>>2,g.fillBlue=h&3,h=p[++E],g.borderType=(h&192)>>6,g.borderRed=(h&48)>>4,g.borderGreen=(h&12)>>2,g.borderBlue=h&3,h=p[++E],g.borderType+=(h&128)>>5,g.wordWrap=(h&64)>>6,g.printDirection=(h&48)>>4,g.scrollDirection=(h&12)>>2,g.justify=h&3,h=p[++E],g.effectSpeed=(h&240)>>4,g.effectDirection=(h&12)>>2,g.displayEffect=h&3,E},ye.prototype.flushDisplayed=function(E,d){for(var p=[],h=0;h<8;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&p.push(d.windows[h].getText());d.endPts=E,d.text=p.join(`

`),this.pushCaption(d),d.startPts=E},ye.prototype.pushCaption=function(E){E.text!==""&&(this.trigger("data",{startPts:E.startPts,endPts:E.endPts,text:E.text,stream:"cc708_"+E.serviceNum}),E.text="",E.startPts=E.endPts)},ye.prototype.displayWindows=function(E,d){var p=this.current708Packet.data,h=p[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var y=0;y<8;y++)h&1<<y&&(d.windows[y].visible=1);return E},ye.prototype.hideWindows=function(E,d){var p=this.current708Packet.data,h=p[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var y=0;y<8;y++)h&1<<y&&(d.windows[y].visible=0);return E},ye.prototype.toggleWindows=function(E,d){var p=this.current708Packet.data,h=p[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var y=0;y<8;y++)h&1<<y&&(d.windows[y].visible^=1);return E},ye.prototype.clearWindows=function(E,d){var p=this.current708Packet.data,h=p[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var y=0;y<8;y++)h&1<<y&&d.windows[y].clearText();return E},ye.prototype.deleteWindows=function(E,d){var p=this.current708Packet.data,h=p[++E],g=this.getPts(E);this.flushDisplayed(g,d);for(var y=0;y<8;y++)h&1<<y&&d.windows[y].reset();return E},ye.prototype.setPenAttributes=function(E,d){var p=this.current708Packet.data,h=p[E],g=d.currentWindow.penAttr;return h=p[++E],g.textTag=(h&240)>>4,g.offset=(h&12)>>2,g.penSize=h&3,h=p[++E],g.italics=(h&128)>>7,g.underline=(h&64)>>6,g.edgeType=(h&56)>>3,g.fontStyle=h&7,E},ye.prototype.setPenColor=function(E,d){var p=this.current708Packet.data,h=p[E],g=d.currentWindow.penColor;return h=p[++E],g.fgOpacity=(h&192)>>6,g.fgRed=(h&48)>>4,g.fgGreen=(h&12)>>2,g.fgBlue=h&3,h=p[++E],g.bgOpacity=(h&192)>>6,g.bgRed=(h&48)>>4,g.bgGreen=(h&12)>>2,g.bgBlue=h&3,h=p[++E],g.edgeRed=(h&48)>>4,g.edgeGreen=(h&12)>>2,g.edgeBlue=h&3,E},ye.prototype.setPenLocation=function(E,d){var p=this.current708Packet.data,h=p[E],g=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,h=p[++E],g.row=h&15,h=p[++E],g.column=h&63,E},ye.prototype.reset=function(E,d){var p=this.getPts(E);return this.flushDisplayed(p,d),this.initService(d.serviceNum,E)};var RS={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},eo=function(d){return d===null?"":(d=RS[d]||d,String.fromCharCode(d))},to=14,MS=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],mn=function(){for(var d=[],p=to+1;p--;)d.push("");return d},Ie=function E(d,p){E.prototype.init.call(this),this.field_=d||0,this.dataChannel_=p||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(h){var g,y,T,w,P;if(g=h.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)==4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),T=g>>>8,w=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),y=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=y,this.startPts_=h.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=mn();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=mn();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(h.pts),this.displayed_=mn()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(T,w))T=(T&3)<<8,P=eo(T|w),this[this.mode_](h.pts,P),this.column_++;else if(this.isExtCharacter(T,w))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),T=(T&3)<<8,P=eo(T|w),this[this.mode_](h.pts,P),this.column_++;else if(this.isMidRowCode(T,w))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,(w&14)==14&&this.addFormatting(h.pts,["i"]),(w&1)==1&&this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(T,w))this.column_+=w&3;else if(this.isPAC(T,w)){var L=MS.indexOf(g&7968);this.mode_==="rollUp"&&(L-this.rollUpRows_+1<0&&(L=this.rollUpRows_-1),this.setRollUp(h.pts,L)),L!==this.row_&&(this.clearFormatting(h.pts),this.row_=L),w&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(h.pts,["u"]),(g&16)==16&&(this.column_=((g&14)>>1)*4),this.isColorPAC(w)&&(w&14)==14&&this.addFormatting(h.pts,["i"])}else this.isNormalChar(T)&&(w===0&&(w=null),P=eo(T),P+=eo(w),this[this.mode_](h.pts,P),this.column_+=P.length)}};Ie.prototype=new e,Ie.prototype.flushDisplayed=function(E){var d=this.displayed_.map(function(p,h){try{return p.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:E,text:d,stream:this.name_})},Ie.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=mn(),this.nonDisplayed_=mn(),this.lastControlCode_=null,this.column_=0,this.row_=to,this.rollUpRows_=2,this.formatting_=[]},Ie.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ie.prototype.isSpecialCharacter=function(E,d){return E===this.EXT_&&d>=48&&d<=63},Ie.prototype.isExtCharacter=function(E,d){return(E===this.EXT_+1||E===this.EXT_+2)&&d>=32&&d<=63},Ie.prototype.isMidRowCode=function(E,d){return E===this.EXT_&&d>=32&&d<=47},Ie.prototype.isOffsetControlCode=function(E,d){return E===this.OFFSET_&&d>=33&&d<=35},Ie.prototype.isPAC=function(E,d){return E>=this.BASE_&&E<this.BASE_+8&&d>=64&&d<=127},Ie.prototype.isColorPAC=function(E){return E>=64&&E<=79||E>=96&&E<=127},Ie.prototype.isNormalChar=function(E){return E>=32&&E<=127},Ie.prototype.setRollUp=function(E,d){if(this.mode_!=="rollUp"&&(this.row_=to,this.mode_="rollUp",this.flushDisplayed(E),this.nonDisplayed_=mn(),this.displayed_=mn()),d!==void 0&&d!==this.row_)for(var p=0;p<this.rollUpRows_;p++)this.displayed_[d-p]=this.displayed_[this.row_-p],this.displayed_[this.row_-p]="";d===void 0&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},Ie.prototype.addFormatting=function(E,d){this.formatting_=this.formatting_.concat(d);var p=d.reduce(function(h,g){return h+"<"+g+">"},"");this[this.mode_](E,p)},Ie.prototype.clearFormatting=function(E){if(!!this.formatting_.length){var d=this.formatting_.reverse().reduce(function(p,h){return p+"</"+h+">"},"");this.formatting_=[],this[this.mode_](E,d)}},Ie.prototype.popOn=function(E,d){var p=this.nonDisplayed_[this.row_];p+=d,this.nonDisplayed_[this.row_]=p},Ie.prototype.rollUp=function(E,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p},Ie.prototype.shiftRowsUp_=function(){var E;for(E=0;E<this.topRow_;E++)this.displayed_[E]="";for(E=this.row_+1;E<to+1;E++)this.displayed_[E]="";for(E=this.topRow_;E<this.row_;E++)this.displayed_[E]=this.displayed_[E+1];this.displayed_[this.row_]=""},Ie.prototype.paintOn=function(E,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p};var ro={CaptionStream:Pt,Cea608Stream:Ie,Cea708Stream:ye},Ke={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},NS=8589934592,FS=4294967296,op="shared",Fl=function(d,p){var h=1;for(d>p&&(h=-1);Math.abs(p-d)>FS;)d+=h*NS;return d},up=function E(d){var p,h;E.prototype.init.call(this),this.type_=d||op,this.push=function(g){this.type_!==op&&g.type!==this.type_||(h===void 0&&(h=g.dts),g.dts=Fl(g.dts,h),g.pts=Fl(g.pts,h),p=g.dts,this.trigger("data",g))},this.flush=function(){h=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};up.prototype=new e;var lp={TimestampRolloverStream:up,handleRollover:Fl},dp=function(d,p,h){var g,y="";for(g=p;g<h;g++)y+="%"+("00"+d[g].toString(16)).slice(-2);return y},no=function(d,p,h){return decodeURIComponent(dp(d,p,h))},US=function(d,p,h){return unescape(dp(d,p,h))},io=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},cp={TXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=no(d.data,1,p),d.value=no(d.data,p+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=no(d.data,1,p),d.url=no(d.data,p+1,d.data.length);break}}},PRIV:function(d){var p;for(p=0;p<d.data.length;p++)if(d.data[p]===0){d.owner=US(d.data,0,p);break}d.privateData=d.data.subarray(p+1),d.data=d.privateData}},ao;ao=function(d){var p={descriptor:d&&d.descriptor},h=0,g=[],y=0,T;if(ao.prototype.init.call(this),this.dispatchType=Ke.METADATA_STREAM_TYPE.toString(16),p.descriptor)for(T=0;T<p.descriptor.length;T++)this.dispatchType+=("00"+p.descriptor[T].toString(16)).slice(-2);this.push=function(w){var P,L,A,O,j,K;if(w.type==="timed-metadata"){if(w.dataAlignmentIndicator&&(y=0,g.length=0),g.length===0&&(w.data.length<10||w.data[0]!=="I".charCodeAt(0)||w.data[1]!=="D".charCodeAt(0)||w.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(g.push(w),y+=w.data.byteLength,g.length===1&&(h=io(w.data.subarray(6,10)),h+=10),!(y<h)){for(P={data:new Uint8Array(h),frames:[],pts:g[0].pts,dts:g[0].dts},j=0;j<h;)P.data.set(g[0].data.subarray(0,h-j),j),j+=g[0].data.byteLength,y-=g[0].data.byteLength,g.shift();L=10,P.data[5]&64&&(L+=4,L+=io(P.data.subarray(10,14)),h-=io(P.data.subarray(16,20)));do{if(A=io(P.data.subarray(L+4,L+8)),A<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(K=String.fromCharCode(P.data[L],P.data[L+1],P.data[L+2],P.data[L+3]),O={id:K,data:P.data.subarray(L+10,L+A+10)},O.key=O.id,cp[O.id]&&(cp[O.id](O),O.owner==="com.apple.streaming.transportStreamTimestamp")){var Y=O.data,W=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;W*=4,W+=Y[7]&3,O.timeStamp=W,P.pts===void 0&&P.dts===void 0&&(P.pts=O.timeStamp,P.dts=O.timeStamp),this.trigger("timestamp",O)}P.frames.push(O),L+=10,L+=A}while(L<h);this.trigger("data",P)}}}},ao.prototype=new e;var BS=ao,jS=lp.TimestampRolloverStream,so,da,oo,Kn=188,Ul=71;so=function(){var d=new Uint8Array(Kn),p=0;so.prototype.init.call(this),this.push=function(h){var g=0,y=Kn,T;for(p?(T=new Uint8Array(h.byteLength+p),T.set(d.subarray(0,p)),T.set(h,p),p=0):T=h;y<T.byteLength;){if(T[g]===Ul&&T[y]===Ul){this.trigger("data",T.subarray(g,y)),g+=Kn,y+=Kn;continue}g++,y++}g<T.byteLength&&(d.set(T.subarray(g),0),p=T.byteLength-g)},this.flush=function(){p===Kn&&d[0]===Ul&&(this.trigger("data",d),p=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){p=0,this.trigger("reset")}},so.prototype=new e,da=function(){var d,p,h,g;da.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(T,w){var P=0;w.payloadUnitStartIndicator&&(P+=T[P]+1),w.type==="pat"?p(T.subarray(P),w):h(T.subarray(P),w)},p=function(T,w){w.section_number=T[7],w.last_section_number=T[8],g.pmtPid=(T[10]&31)<<8|T[11],w.pmtPid=g.pmtPid},h=function(T,w){var P,L,A,O;if(!!(T[5]&1)){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},P=(T[1]&15)<<8|T[2],L=3+P-4,A=(T[10]&15)<<8|T[11],O=12+A;O<L;){var j=T[O],K=(T[O+1]&31)<<8|T[O+2];j===Ke.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=K:j===Ke.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=K:j===Ke.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][K]=j),O+=((T[O+3]&15)<<8|T[O+4])+5}w.programMapTable=g.programMapTable}},this.push=function(y){var T={},w=4;if(T.payloadUnitStartIndicator=!!(y[1]&64),T.pid=y[1]&31,T.pid<<=8,T.pid|=y[2],(y[3]&48)>>>4>1&&(w+=y[w]+1),T.pid===0)T.type="pat",d(y.subarray(w),T),this.trigger("data",T);else if(T.pid===this.pmtPid)for(T.type="pmt",d(y.subarray(w),T),this.trigger("data",T);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([y,w,T]):this.processPes_(y,w,T)},this.processPes_=function(y,T,w){w.pid===this.programMapTable.video?w.streamType=Ke.H264_STREAM_TYPE:w.pid===this.programMapTable.audio?w.streamType=Ke.ADTS_STREAM_TYPE:w.streamType=this.programMapTable["timed-metadata"][w.pid],w.type="pes",w.data=y.subarray(T),this.trigger("data",w)}},da.prototype=new e,da.STREAM_TYPES={h264:27,adts:15},oo=function(){var d=this,p=!1,h={data:[],size:0},g={data:[],size:0},y={data:[],size:0},T,w=function(A,O){var j,K=A[0]<<16|A[1]<<8|A[2];O.data=new Uint8Array,K===1&&(O.packetLength=6+(A[4]<<8|A[5]),O.dataAlignmentIndicator=(A[6]&4)!=0,j=A[7],j&192&&(O.pts=(A[9]&14)<<27|(A[10]&255)<<20|(A[11]&254)<<12|(A[12]&255)<<5|(A[13]&254)>>>3,O.pts*=4,O.pts+=(A[13]&6)>>>1,O.dts=O.pts,j&64&&(O.dts=(A[14]&14)<<27|(A[15]&255)<<20|(A[16]&254)<<12|(A[17]&255)<<5|(A[18]&254)>>>3,O.dts*=4,O.dts+=(A[18]&6)>>>1)),O.data=A.subarray(9+A[8]))},P=function(A,O,j){var K=new Uint8Array(A.size),Y={type:O},W=0,ee=0,Be=!1,dt;if(!(!A.data.length||A.size<9)){for(Y.trackId=A.data[0].pid,W=0;W<A.data.length;W++)dt=A.data[W],K.set(dt.data,ee),ee+=dt.data.byteLength;w(K,Y),Be=O==="video"||Y.packetLength<=A.size,(j||Be)&&(A.size=0,A.data.length=0),Be&&d.trigger("data",Y)}};oo.prototype.init.call(this),this.push=function(L){({pat:function(){},pes:function(){var O,j;switch(L.streamType){case Ke.H264_STREAM_TYPE:O=h,j="video";break;case Ke.ADTS_STREAM_TYPE:O=g,j="audio";break;case Ke.METADATA_STREAM_TYPE:O=y,j="timed-metadata";break;default:return}L.payloadUnitStartIndicator&&P(O,j,!0),O.data.push(L),O.size+=L.data.byteLength},pmt:function(){var O={type:"metadata",tracks:[]};T=L.programMapTable,T.video!==null&&O.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&O.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),p=!0,d.trigger("data",O)}})[L.type]()},this.reset=function(){h.size=0,h.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){P(h,"video"),P(g,"audio"),P(y,"timed-metadata")},this.flush=function(){if(!p&&T){var L={type:"metadata",tracks:[]};T.video!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),d.trigger("data",L)}p=!1,this.flushStreams_(),this.trigger("done")}},oo.prototype=new e;var fp={PAT_PID:0,MP2T_PACKET_LENGTH:Kn,TransportPacketStream:so,TransportParseStream:da,ElementaryStream:oo,TimestampRolloverStream:jS,CaptionStream:ro.CaptionStream,Cea608Stream:ro.Cea608Stream,Cea708Stream:ro.Cea708Stream,MetadataStream:BS};for(var Bl in Ke)Ke.hasOwnProperty(Bl)&&(fp[Bl]=Ke[Bl]);var yr=fp,HS=he.ONE_SECOND_IN_TS,uo,hp=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];uo=function(d){var p,h=0;uo.prototype.init.call(this),this.skipWarn_=function(g,y){this.trigger("log",{level:"warn",message:"adts skiping bytes "+g+" to "+y+" in frame "+h+" outside syncword"})},this.push=function(g){var y=0,T,w,P,L,A;if(d||(h=0),g.type==="audio"){p&&p.length?(P=p,p=new Uint8Array(P.byteLength+g.data.byteLength),p.set(P),p.set(g.data,P.byteLength)):p=g.data;for(var O;y+7<p.length;){if(p[y]!==255||(p[y+1]&246)!=240){typeof O!="number"&&(O=y),y++;continue}if(typeof O=="number"&&(this.skipWarn_(O,y),O=null),w=(~p[y+1]&1)*2,T=(p[y+3]&3)<<11|p[y+4]<<3|(p[y+5]&224)>>5,L=((p[y+6]&3)+1)*1024,A=L*HS/hp[(p[y+2]&60)>>>2],p.byteLength-y<T)break;this.trigger("data",{pts:g.pts+h*A,dts:g.dts+h*A,sampleCount:L,audioobjecttype:(p[y+2]>>>6&3)+1,channelcount:(p[y+2]&1)<<2|(p[y+3]&192)>>>6,samplerate:hp[(p[y+2]&60)>>>2],samplingfrequencyindex:(p[y+2]&60)>>>2,samplesize:16,data:p.subarray(y+7+w,y+T)}),h++,y+=T}typeof O=="number"&&(this.skipWarn_(O,y),O=null),p=p.subarray(y)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){p=void 0,this.trigger("reset")},this.endTimeline=function(){p=void 0,this.trigger("endedtimeline")}},uo.prototype=new e;var pp=uo,mp;mp=function(d){var p=d.byteLength,h=0,g=0;this.length=function(){return 8*p},this.bitsAvailable=function(){return 8*p+g},this.loadWord=function(){var y=d.byteLength-p,T=new Uint8Array(4),w=Math.min(4,p);if(w===0)throw new Error("no bytes available");T.set(d.subarray(y,y+w)),h=new DataView(T.buffer).getUint32(0),g=w*8,p-=w},this.skipBits=function(y){var T;g>y?(h<<=y,g-=y):(y-=g,T=Math.floor(y/8),y-=T*8,p-=T,this.loadWord(),h<<=y,g-=y)},this.readBits=function(y){var T=Math.min(g,y),w=h>>>32-T;return g-=T,g>0?h<<=T:p>0&&this.loadWord(),T=y-T,T>0?w<<T|this.readBits(T):w},this.skipLeadingZeros=function(){var y;for(y=0;y<g;++y)if((h&2147483648>>>y)!=0)return h<<=y,g-=y,y;return this.loadWord(),y+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var y=this.skipLeadingZeros();return this.readBits(y+1)-1},this.readExpGolomb=function(){var y=this.readUnsignedExpGolomb();return 1&y?1+y>>>1:-1*(y>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var VS=mp,lo,ca,gp;ca=function(){var d=0,p,h;ca.prototype.init.call(this),this.push=function(g){var y;h?(y=new Uint8Array(h.byteLength+g.data.byteLength),y.set(h),y.set(g.data,h.byteLength),h=y):h=g.data;for(var T=h.byteLength;d<T-3;d++)if(h[d+2]===1){p=d+5;break}for(;p<T;)switch(h[p]){case 0:if(h[p-1]!==0){p+=2;break}else if(h[p-2]!==0){p++;break}d+3!==p-2&&this.trigger("data",h.subarray(d+3,p-2));do p++;while(h[p]!==1&&p<T);d=p-2,p+=3;break;case 1:if(h[p-1]!==0||h[p-2]!==0){p+=3;break}this.trigger("data",h.subarray(d+3,p-2)),d=p-2,p+=3;break;default:p+=3;break}h=h.subarray(d),p-=d,d=0},this.reset=function(){h=null,d=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(d+3)),h=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ca.prototype=new e,gp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},lo=function(){var d=new ca,p,h,g,y,T,w,P;lo.prototype.init.call(this),p=this,this.push=function(L){L.type==="video"&&(h=L.trackId,g=L.pts,y=L.dts,d.push(L))},d.on("data",function(L){var A={trackId:h,pts:g,dts:y,data:L,nalUnitTypeCode:L[0]&31};switch(A.nalUnitTypeCode){case 5:A.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:A.nalUnitType="sei_rbsp",A.escapedRBSP=T(L.subarray(1));break;case 7:A.nalUnitType="seq_parameter_set_rbsp",A.escapedRBSP=T(L.subarray(1)),A.config=w(A.escapedRBSP);break;case 8:A.nalUnitType="pic_parameter_set_rbsp";break;case 9:A.nalUnitType="access_unit_delimiter_rbsp";break}p.trigger("data",A)}),d.on("done",function(){p.trigger("done")}),d.on("partialdone",function(){p.trigger("partialdone")}),d.on("reset",function(){p.trigger("reset")}),d.on("endedtimeline",function(){p.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},P=function(A,O){var j=8,K=8,Y,W;for(Y=0;Y<A;Y++)K!==0&&(W=O.readExpGolomb(),K=(j+W+256)%256),j=K===0?j:K},T=function(A){for(var O=A.byteLength,j=[],K=1,Y,W;K<O-2;)A[K]===0&&A[K+1]===0&&A[K+2]===3?(j.push(K+2),K+=2):K++;if(j.length===0)return A;Y=O-j.length,W=new Uint8Array(Y);var ee=0;for(K=0;K<Y;ee++,K++)ee===j[0]&&(ee++,j.shift()),W[K]=A[ee];return W},w=function(A){var O=0,j=0,K=0,Y=0,W,ee,Be,dt,_n,Gl,Mp,Np,Fp,$l,Up,Oe=[1,1],Bp,Tn;if(W=new VS(A),ee=W.readUnsignedByte(),dt=W.readUnsignedByte(),Be=W.readUnsignedByte(),W.skipUnsignedExpGolomb(),gp[ee]&&(_n=W.readUnsignedExpGolomb(),_n===3&&W.skipBits(1),W.skipUnsignedExpGolomb(),W.skipUnsignedExpGolomb(),W.skipBits(1),W.readBoolean()))for(Up=_n!==3?8:12,Tn=0;Tn<Up;Tn++)W.readBoolean()&&(Tn<6?P(16,W):P(64,W));if(W.skipUnsignedExpGolomb(),Gl=W.readUnsignedExpGolomb(),Gl===0)W.readUnsignedExpGolomb();else if(Gl===1)for(W.skipBits(1),W.skipExpGolomb(),W.skipExpGolomb(),Mp=W.readUnsignedExpGolomb(),Tn=0;Tn<Mp;Tn++)W.skipExpGolomb();if(W.skipUnsignedExpGolomb(),W.skipBits(1),Np=W.readUnsignedExpGolomb(),Fp=W.readUnsignedExpGolomb(),$l=W.readBits(1),$l===0&&W.skipBits(1),W.skipBits(1),W.readBoolean()&&(O=W.readUnsignedExpGolomb(),j=W.readUnsignedExpGolomb(),K=W.readUnsignedExpGolomb(),Y=W.readUnsignedExpGolomb()),W.readBoolean()&&W.readBoolean()){switch(Bp=W.readUnsignedByte(),Bp){case 1:Oe=[1,1];break;case 2:Oe=[12,11];break;case 3:Oe=[10,11];break;case 4:Oe=[16,11];break;case 5:Oe=[40,33];break;case 6:Oe=[24,11];break;case 7:Oe=[20,11];break;case 8:Oe=[32,11];break;case 9:Oe=[80,33];break;case 10:Oe=[18,11];break;case 11:Oe=[15,11];break;case 12:Oe=[64,33];break;case 13:Oe=[160,99];break;case 14:Oe=[4,3];break;case 15:Oe=[3,2];break;case 16:Oe=[2,1];break;case 255:{Oe=[W.readUnsignedByte()<<8|W.readUnsignedByte(),W.readUnsignedByte()<<8|W.readUnsignedByte()];break}}Oe&&Oe[0]/Oe[1]}return{profileIdc:ee,levelIdc:Be,profileCompatibility:dt,width:(Np+1)*16-O*2-j*2,height:(2-$l)*(Fp+1)*16-K*2-Y*2,sarRatio:Oe}}},lo.prototype=new e;var WS={H264Stream:lo,NalByteStream:ca},zS=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],vp=function(d,p){var h=d[p+6]<<21|d[p+7]<<14|d[p+8]<<7|d[p+9],g=d[p+5],y=(g&16)>>4;return h=h>=0?h:0,y?h+20:h+10},GS=function E(d,p){return d.length-p<10||d[p]!=="I".charCodeAt(0)||d[p+1]!=="D".charCodeAt(0)||d[p+2]!=="3".charCodeAt(0)?p:(p+=vp(d,p),E(d,p))},$S=function(d){var p=GS(d,0);return d.length>=p+2&&(d[p]&255)==255&&(d[p+1]&240)==240&&(d[p+1]&22)==16},yp=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},qS=function(d,p,h){var g,y="";for(g=p;g<h;g++)y+="%"+("00"+d[g].toString(16)).slice(-2);return y},KS=function(d,p,h){return unescape(qS(d,p,h))},XS=function(d,p){var h=(d[p+5]&224)>>5,g=d[p+4]<<3,y=d[p+3]&3<<11;return y|g|h},QS=function(d,p){return d[p]==="I".charCodeAt(0)&&d[p+1]==="D".charCodeAt(0)&&d[p+2]==="3".charCodeAt(0)?"timed-metadata":d[p]&!0&&(d[p+1]&240)==240?"audio":null},YS=function(d){for(var p=0;p+5<d.length;){if(d[p]!==255||(d[p+1]&246)!=240){p++;continue}return zS[(d[p+2]&60)>>>2]}return null},JS=function(d){var p,h,g,y;p=10,d[5]&64&&(p+=4,p+=yp(d.subarray(10,14)));do{if(h=yp(d.subarray(p+4,p+8)),h<1)return null;if(y=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]),y==="PRIV"){g=d.subarray(p+10,p+h+10);for(var T=0;T<g.byteLength;T++)if(g[T]===0){var w=KS(g,0,T);if(w==="com.apple.streaming.transportStreamTimestamp"){var P=g.subarray(T+1),L=(P[3]&1)<<30|P[4]<<22|P[5]<<14|P[6]<<6|P[7]>>>2;return L*=4,L+=P[7]&3,L}break}}p+=10,p+=h}while(p<d.byteLength);return null},co={isLikelyAacData:$S,parseId3TagSize:vp,parseAdtsSize:XS,parseType:QS,parseSampleRate:YS,parseAacTimestamp:JS},fo;fo=function(){var d=new Uint8Array,p=0;fo.prototype.init.call(this),this.setTimestamp=function(h){p=h},this.push=function(h){var g=0,y=0,T,w,P,L;for(d.length?(L=d.length,d=new Uint8Array(h.byteLength+L),d.set(d.subarray(0,L)),d.set(h,L)):d=h;d.length-y>=3;){if(d[y]==="I".charCodeAt(0)&&d[y+1]==="D".charCodeAt(0)&&d[y+2]==="3".charCodeAt(0)){if(d.length-y<10||(g=co.parseId3TagSize(d,y),y+g>d.length))break;w={type:"timed-metadata",data:d.subarray(y,y+g)},this.trigger("data",w),y+=g;continue}else if((d[y]&255)==255&&(d[y+1]&240)==240){if(d.length-y<7||(g=co.parseAdtsSize(d,y),y+g>d.length))break;P={type:"audio",data:d.subarray(y,y+g),pts:p,dts:p},this.trigger("data",P),y+=g;continue}y++}T=d.length-y,T>0?d=d.subarray(y):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},fo.prototype=new e;var ZS=fo,ex=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],jl=ex,tx=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Hl=tx,rx=WS.H264Stream,nx=co.isLikelyAacData,ix=he.ONE_SECOND_IN_TS,fa,Xn,ho,gn,ax=function(d,p){p.stream=d,this.trigger("log",p)},_p=function(d,p){for(var h=Object.keys(p),g=0;g<h.length;g++){var y=h[g];y==="headOfPipeline"||!p[y].on||p[y].on("log",ax.bind(d,y))}},Tp=function(d,p){var h;if(d.length!==p.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==p[h])return!1;return!0},Vl=function(d,p,h,g,y,T){var w=h-p,P=g-p,L=y-h;return{start:{dts:d,pts:d+w},end:{dts:d+P,pts:d+L},prependedContentDuration:T,baseMediaDecodeTime:d}};Xn=function(d,p){var h=[],g,y=0,T=0,w=1/0;p=p||{},g=p.firstSequenceNumber||0,Xn.prototype.init.call(this),this.push=function(P){Gt.collectDtsInfo(d,P),d&&jl.forEach(function(L){d[L]=P[L]}),h.push(P)},this.setEarliestDts=function(P){y=P},this.setVideoBaseMediaDecodeTime=function(P){w=P},this.setAudioAppendStart=function(P){T=P},this.flush=function(){var P,L,A,O,j,K,Y;if(h.length===0){this.trigger("done","AudioSegmentStream");return}P=Ys.trimAdtsFramesByEarliestDts(h,d,y),d.baseMediaDecodeTime=Gt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),Y=Ys.prefixWithSilence(d,P,T,w),d.samples=Ys.generateSampleTable(P),A=te.mdat(Ys.concatenateFrameData(P)),h=[],L=te.moof(g,[d]),O=new Uint8Array(L.byteLength+A.byteLength),g++,O.set(L),O.set(A,L.byteLength),Gt.clearDtsInfo(d),j=Math.ceil(ix*1024/d.samplerate),P.length&&(K=P.length*j,this.trigger("segmentTimingInfo",Vl(he.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),P[0].dts,P[0].pts,P[0].dts+K,P[0].pts+K,Y||0)),this.trigger("timingInfo",{start:P[0].pts,end:P[0].pts+K})),this.trigger("data",{track:d,boxes:O}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Gt.clearDtsInfo(d),h=[],this.trigger("reset")}},Xn.prototype=new e,fa=function(d,p){var h,g=[],y=[],T,w;p=p||{},h=p.firstSequenceNumber||0,fa.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(P){Gt.collectDtsInfo(d,P),P.nalUnitType==="seq_parameter_set_rbsp"&&!T&&(T=P.config,d.sps=[P.data],Hl.forEach(function(L){d[L]=T[L]},this)),P.nalUnitType==="pic_parameter_set_rbsp"&&!w&&(w=P.data,d.pps=[P.data]),g.push(P)},this.flush=function(){for(var P,L,A,O,j,K,Y=0,W,ee;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(P=ua.groupNalsIntoFrames(g),A=ua.groupFramesIntoGops(P),A[0][0].keyFrame||(L=this.getGopForFusion_(g[0],d),L?(Y=L.duration,A.unshift(L),A.byteLength+=L.byteLength,A.nalCount+=L.nalCount,A.pts=L.pts,A.dts=L.dts,A.duration+=L.duration):A=ua.extendFirstKeyFrame(A)),y.length){var Be;if(p.alignGopsAtEnd?Be=this.alignGopsAtEnd_(A):Be=this.alignGopsAtStart_(A),!Be){this.gopCache_.unshift({gop:A.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Gt.clearDtsInfo(d),A=Be}Gt.collectDtsInfo(d,A),d.samples=ua.generateSampleTable(A),j=te.mdat(ua.concatenateNalData(A)),d.baseMediaDecodeTime=Gt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),this.trigger("processedGopsInfo",A.map(function(dt){return{pts:dt.pts,dts:dt.dts,byteLength:dt.byteLength}})),W=A[0],ee=A[A.length-1],this.trigger("segmentTimingInfo",Vl(d.baseMediaDecodeTime,W.dts,W.pts,ee.dts+ee.duration,ee.pts+ee.duration,Y)),this.trigger("timingInfo",{start:A[0].pts,end:A[A.length-1].pts+A[A.length-1].duration}),this.gopCache_.unshift({gop:A.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),O=te.moof(h,[d]),K=new Uint8Array(O.byteLength+j.byteLength),h++,K.set(O),K.set(j,O.byteLength),this.trigger("data",{track:d,boxes:K}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,y.length=0,this.trigger("reset")},this.resetStream_=function(){Gt.clearDtsInfo(d),T=void 0,w=void 0},this.getGopForFusion_=function(P){var L=45e3,A=1e4,O=1/0,j,K,Y,W,ee;for(ee=0;ee<this.gopCache_.length;ee++)W=this.gopCache_[ee],Y=W.gop,!(!(d.pps&&Tp(d.pps[0],W.pps[0]))||!(d.sps&&Tp(d.sps[0],W.sps[0])))&&(Y.dts<d.timelineStartInfo.dts||(j=P.dts-Y.dts-Y.duration,j>=-A&&j<=L&&(!K||O>j)&&(K=W,O=j)));return K?K.gop:null},this.alignGopsAtStart_=function(P){var L,A,O,j,K,Y,W,ee;for(K=P.byteLength,Y=P.nalCount,W=P.duration,L=A=0;L<y.length&&A<P.length&&(O=y[L],j=P[A],O.pts!==j.pts);){if(j.pts>O.pts){L++;continue}A++,K-=j.byteLength,Y-=j.nalCount,W-=j.duration}return A===0?P:A===P.length?null:(ee=P.slice(A),ee.byteLength=K,ee.duration=W,ee.nalCount=Y,ee.pts=ee[0].pts,ee.dts=ee[0].dts,ee)},this.alignGopsAtEnd_=function(P){var L,A,O,j,K,Y;for(L=y.length-1,A=P.length-1,K=null,Y=!1;L>=0&&A>=0;){if(O=y[L],j=P[A],O.pts===j.pts){Y=!0;break}if(O.pts>j.pts){L--;continue}L===y.length-1&&(K=A),A--}if(!Y&&K===null)return null;var W;if(Y?W=A:W=K,W===0)return P;var ee=P.slice(W),Be=ee.reduce(function(dt,_n){return dt.byteLength+=_n.byteLength,dt.duration+=_n.duration,dt.nalCount+=_n.nalCount,dt},{byteLength:0,duration:0,nalCount:0});return ee.byteLength=Be.byteLength,ee.duration=Be.duration,ee.nalCount=Be.nalCount,ee.pts=ee[0].pts,ee.dts=ee[0].dts,ee},this.alignGopsWith=function(P){y=P}},fa.prototype=new e,gn=function(d,p){this.numberOfTracks=0,this.metadataStream=p,d=d||{},typeof d.remux!="undefined"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,gn.prototype.init.call(this),this.push=function(h){if(h.text)return this.pendingCaptions.push(h);if(h.frames)return this.pendingMetadata.push(h);this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,h.track.type==="video"&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),h.track.type==="audio"&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))}},gn.prototype=new e,gn.prototype.flush=function(E){var d=0,p={captions:[],captionStreams:{},metadata:[],info:{}},h,g,y,T=0,w;if(this.pendingTracks.length<this.numberOfTracks){if(E!=="VideoSegmentStream"&&E!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(T=this.videoTrack.timelineStartInfo.pts,Hl.forEach(function(P){p.info[P]=this.videoTrack[P]},this)):this.audioTrack&&(T=this.audioTrack.timelineStartInfo.pts,jl.forEach(function(P){p.info[P]=this.audioTrack[P]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?p.type=this.pendingTracks[0].type:p.type="combined",this.emittedTracks+=this.pendingTracks.length,y=te.initSegment(this.pendingTracks),p.initSegment=new Uint8Array(y.byteLength),p.initSegment.set(y),p.data=new Uint8Array(this.pendingBytes),w=0;w<this.pendingBoxes.length;w++)p.data.set(this.pendingBoxes[w],d),d+=this.pendingBoxes[w].byteLength;for(w=0;w<this.pendingCaptions.length;w++)h=this.pendingCaptions[w],h.startTime=he.metadataTsToSeconds(h.startPts,T,this.keepOriginalTimestamps),h.endTime=he.metadataTsToSeconds(h.endPts,T,this.keepOriginalTimestamps),p.captionStreams[h.stream]=!0,p.captions.push(h);for(w=0;w<this.pendingMetadata.length;w++)g=this.pendingMetadata[w],g.cueTime=he.metadataTsToSeconds(g.pts,T,this.keepOriginalTimestamps),p.metadata.push(g);for(p.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",p),w=0;w<p.captions.length;w++)h=p.captions[w],this.trigger("caption",h);for(w=0;w<p.metadata.length;w++)g=p.metadata[w],this.trigger("id3Frame",g)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},gn.prototype.setRemux=function(E){this.remuxTracks=E},ho=function(d){var p=this,h=!0,g,y;ho.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="aac",T.metadataStream=new yr.MetadataStream,T.aacStream=new ZS,T.audioTimestampRolloverStream=new yr.TimestampRolloverStream("audio"),T.timedMetadataTimestampRolloverStream=new yr.TimestampRolloverStream("timed-metadata"),T.adtsStream=new pp,T.coalesceStream=new gn(d,T.metadataStream),T.headOfPipeline=T.aacStream,T.aacStream.pipe(T.audioTimestampRolloverStream).pipe(T.adtsStream),T.aacStream.pipe(T.timedMetadataTimestampRolloverStream).pipe(T.metadataStream).pipe(T.coalesceStream),T.metadataStream.on("timestamp",function(w){T.aacStream.setTimestamp(w.timeStamp)}),T.aacStream.on("data",function(w){w.type!=="timed-metadata"&&w.type!=="audio"||T.audioSegmentStream||(y=y||{timelineStartInfo:{baseMediaDecodeTime:p.baseMediaDecodeTime},codec:"adts",type:"audio"},T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Xn(y,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream),p.trigger("trackinfo",{hasAudio:!!y,hasVideo:!!g}))}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),_p(this,T)},this.setupTsPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="ts",T.metadataStream=new yr.MetadataStream,T.packetStream=new yr.TransportPacketStream,T.parseStream=new yr.TransportParseStream,T.elementaryStream=new yr.ElementaryStream,T.timestampRolloverStream=new yr.TimestampRolloverStream,T.adtsStream=new pp,T.h264Stream=new rx,T.captionStream=new yr.CaptionStream(d),T.coalesceStream=new gn(d,T.metadataStream),T.headOfPipeline=T.packetStream,T.packetStream.pipe(T.parseStream).pipe(T.elementaryStream).pipe(T.timestampRolloverStream),T.timestampRolloverStream.pipe(T.h264Stream),T.timestampRolloverStream.pipe(T.adtsStream),T.timestampRolloverStream.pipe(T.metadataStream).pipe(T.coalesceStream),T.h264Stream.pipe(T.captionStream).pipe(T.coalesceStream),T.elementaryStream.on("data",function(w){var P;if(w.type==="metadata"){for(P=w.tracks.length;P--;)!g&&w.tracks[P].type==="video"?(g=w.tracks[P],g.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime):!y&&w.tracks[P].type==="audio"&&(y=w.tracks[P],y.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime);g&&!T.videoSegmentStream&&(T.coalesceStream.numberOfTracks++,T.videoSegmentStream=new fa(g,d),T.videoSegmentStream.on("log",p.getLogTrigger_("videoSegmentStream")),T.videoSegmentStream.on("timelineStartInfo",function(L){y&&!d.keepOriginalTimestamps&&(y.timelineStartInfo=L,T.audioSegmentStream.setEarliestDts(L.dts-p.baseMediaDecodeTime))}),T.videoSegmentStream.on("processedGopsInfo",p.trigger.bind(p,"gopInfo")),T.videoSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"videoSegmentTimingInfo")),T.videoSegmentStream.on("baseMediaDecodeTime",function(L){y&&T.audioSegmentStream.setVideoBaseMediaDecodeTime(L)}),T.videoSegmentStream.on("timingInfo",p.trigger.bind(p,"videoTimingInfo")),T.h264Stream.pipe(T.videoSegmentStream).pipe(T.coalesceStream)),y&&!T.audioSegmentStream&&(T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Xn(y,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.audioSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"audioSegmentTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream)),p.trigger("trackinfo",{hasAudio:!!y,hasVideo:!!g})}}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("id3Frame",function(w){w.dispatchType=T.metadataStream.dispatchType,p.trigger("id3Frame",w)}),T.coalesceStream.on("caption",this.trigger.bind(this,"caption")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),_p(this,T)},this.setBaseMediaDecodeTime=function(T){var w=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=T),y&&(y.timelineStartInfo.dts=void 0,y.timelineStartInfo.pts=void 0,Gt.clearDtsInfo(y),w.audioTimestampRolloverStream&&w.audioTimestampRolloverStream.discontinuity()),g&&(w.videoSegmentStream&&(w.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,Gt.clearDtsInfo(g),w.captionStream.reset()),w.timestampRolloverStream&&w.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(T){y&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(T)},this.setRemux=function(T){var w=this.transmuxPipeline_;d.remux=T,w&&w.coalesceStream&&w.coalesceStream.setRemux(T)},this.alignGopsWith=function(T){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(T)},this.getLogTrigger_=function(T){var w=this;return function(P){P.stream=T,w.trigger("log",P)}},this.push=function(T){if(h){var w=nx(T);w&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!w&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(T)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ho.prototype=new e;var sx={Transmuxer:ho,VideoSegmentStream:fa,AudioSegmentStream:Xn,AUDIO_PROPERTIES:jl,VIDEO_PROPERTIES:Hl,generateSegmentTimingInfo:Vl},ox=function(d){return d>>>0},ux=function(d){return("00"+d.toString(16)).slice(-2)},po={toUnsigned:ox,toHexString:ux},lx=function(d){var p="";return p+=String.fromCharCode(d[0]),p+=String.fromCharCode(d[1]),p+=String.fromCharCode(d[2]),p+=String.fromCharCode(d[3]),p},vn=lx,dx=po.toUnsigned,cx=function E(d,p){var h=[],g,y,T,w,P;if(!p.length)return null;for(g=0;g<d.byteLength;)y=dx(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),T=vn(d.subarray(g+4,g+8)),w=y>1?g+y:d.byteLength,T===p[0]&&(p.length===1?h.push(d.subarray(g+8,w)):(P=E(d.subarray(g+8,w),p.slice(1)),P.length&&(h=h.concat(P)))),g=w;return h},be=cx,Sp=po.toUnsigned,fx=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),baseMediaDecodeTime:Sp(d[4]<<24|d[5]<<16|d[6]<<8|d[7])};return p.version===1&&(p.baseMediaDecodeTime*=Math.pow(2,32),p.baseMediaDecodeTime+=Sp(d[8]<<24|d[9]<<16|d[10]<<8|d[11])),p},xp=fx,hx=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},bp=hx,px=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},h=new DataView(d.buffer,d.byteOffset,d.byteLength),g=p.flags[2]&1,y=p.flags[2]&4,T=p.flags[1]&1,w=p.flags[1]&2,P=p.flags[1]&4,L=p.flags[1]&8,A=h.getUint32(4),O=8,j;for(g&&(p.dataOffset=h.getInt32(O),O+=4),y&&A&&(j={flags:bp(d.subarray(O,O+4))},O+=4,T&&(j.duration=h.getUint32(O),O+=4),w&&(j.size=h.getUint32(O),O+=4),L&&(p.version===1?j.compositionTimeOffset=h.getInt32(O):j.compositionTimeOffset=h.getUint32(O),O+=4),p.samples.push(j),A--);A--;)j={},T&&(j.duration=h.getUint32(O),O+=4),w&&(j.size=h.getUint32(O),O+=4),P&&(j.flags=bp(d.subarray(O,O+4)),O+=4),L&&(p.version===1?j.compositionTimeOffset=h.getInt32(O):j.compositionTimeOffset=h.getUint32(O),O+=4),p.samples.push(j);return p},Ep=px,mx=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:p.getUint32(4)},g=h.flags[2]&1,y=h.flags[2]&2,T=h.flags[2]&8,w=h.flags[2]&16,P=h.flags[2]&32,L=h.flags[0]&65536,A=h.flags[0]&131072,O;return O=8,g&&(O+=4,h.baseDataOffset=p.getUint32(12),O+=4),y&&(h.sampleDescriptionIndex=p.getUint32(O),O+=4),T&&(h.defaultSampleDuration=p.getUint32(O),O+=4),w&&(h.defaultSampleSize=p.getUint32(O),O+=4),P&&(h.defaultSampleFlags=p.getUint32(O)),L&&(h.durationIsEmpty=!0),!g&&A&&(h.baseDataOffsetIsMoof=!0),h},Cp=mx,gx=la.discardEmulationPreventionBytes,vx=ro.CaptionStream,yx=function(d,p){for(var h=d,g=0;g<p.length;g++){var y=p[g];if(h<y.size)return y;h-=y.size}return null},_x=function(d,p,h){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),y={logs:[],seiNals:[]},T,w,P,L;for(w=0;w+4<d.length;w+=P)if(P=g.getUint32(w),w+=4,!(P<=0))switch(d[w]&31){case 6:var A=d.subarray(w+1,w+1+P),O=yx(w,p);if(T={nalUnitType:"sei_rbsp",size:P,data:A,escapedRBSP:gx(A),trackId:h},O)T.pts=O.pts,T.dts=O.dts,L=O;else if(L)T.pts=L.pts,T.dts=L.dts;else{y.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+w+" for trackId "+h+". See mux.js#223."});break}y.seiNals.push(T);break}return y},Tx=function(d,p,h){var g=p,y=h.defaultSampleDuration||0,T=h.defaultSampleSize||0,w=h.trackId,P=[];return d.forEach(function(L){var A=Ep(L),O=A.samples;O.forEach(function(j){j.duration===void 0&&(j.duration=y),j.size===void 0&&(j.size=T),j.trackId=w,j.dts=g,j.compositionTimeOffset===void 0&&(j.compositionTimeOffset=0),j.pts=g+j.compositionTimeOffset,g+=j.duration}),P=P.concat(O)}),P},Sx=function(d,p){var h=be(d,["moof","traf"]),g=be(d,["mdat"]),y={},T=[];return g.forEach(function(w,P){var L=h[P];T.push({mdat:w,traf:L})}),T.forEach(function(w){var P=w.mdat,L=w.traf,A=be(L,["tfhd"]),O=Cp(A[0]),j=O.trackId,K=be(L,["tfdt"]),Y=K.length>0?xp(K[0]).baseMediaDecodeTime:0,W=be(L,["trun"]),ee,Be;p===j&&W.length>0&&(ee=Tx(W,Y,O),Be=_x(P,ee,j),y[j]||(y[j]={seiNals:[],logs:[]}),y[j].seiNals=y[j].seiNals.concat(Be.seiNals),y[j].logs=y[j].logs.concat(Be.logs))}),y},xx=function(d,p,h){var g;if(p===null)return null;g=Sx(d,p);var y=g[p]||{};return{seiNals:y.seiNals,logs:y.logs,timescale:h}},bx=function(){var d=!1,p,h,g,y,T,w;this.isInitialized=function(){return d},this.init=function(P){p=new vx,d=!0,w=P?P.isPartial:!1,p.on("data",function(L){L.startTime=L.startPts/y,L.endTime=L.endPts/y,T.captions.push(L),T.captionStreams[L.stream]=!0}),p.on("log",function(L){T.logs.push(L)})},this.isNewInit=function(P,L){return P&&P.length===0||L&&typeof L=="object"&&Object.keys(L).length===0?!1:g!==P[0]||y!==L[g]},this.parse=function(P,L,A){var O;if(this.isInitialized()){if(!L||!A)return null;if(this.isNewInit(L,A))g=L[0],y=A[g];else if(g===null||!y)return h.push(P),null}else return null;for(;h.length>0;){var j=h.shift();this.parse(j,L,A)}return O=xx(P,g,y),O&&O.logs&&(T.logs=T.logs.concat(O.logs)),O===null||!O.seiNals?T.logs.length?{logs:T.logs,captions:[],captionStreams:[]}:null:(this.pushNals(O.seiNals),this.flushStream(),T)},this.pushNals=function(P){if(!this.isInitialized()||!P||P.length===0)return null;P.forEach(function(L){p.push(L)})},this.flushStream=function(){if(!this.isInitialized())return null;w?p.partialFlush():p.flush()},this.clearParsedCaptions=function(){T.captions=[],T.captionStreams={},T.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;p.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],g=null,y=null,T?this.clearParsedCaptions():T={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ex=bx,Qn=po.toUnsigned,ha=po.toHexString,wp,kp,Pp,Ip,Ap,Wl;wp=function(d){var p={},h=be(d,["moov","trak"]);return h.reduce(function(g,y){var T,w,P,L,A;return T=be(y,["tkhd"])[0],!T||(w=T[0],P=w===0?12:20,L=Qn(T[P]<<24|T[P+1]<<16|T[P+2]<<8|T[P+3]),A=be(y,["mdia","mdhd"])[0],!A)?null:(w=A[0],P=w===0?12:20,g[L]=Qn(A[P]<<24|A[P+1]<<16|A[P+2]<<8|A[P+3]),g)},p)},kp=function(d,p){var h,g,y;return h=be(p,["moof","traf"]),g=[].concat.apply([],h.map(function(T){return be(T,["tfhd"]).map(function(w){var P,L,A;return P=Qn(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),L=d[P]||9e4,A=be(T,["tfdt"]).map(function(O){var j,K;return j=O[0],K=Qn(O[4]<<24|O[5]<<16|O[6]<<8|O[7]),j===1&&(K*=Math.pow(2,32),K+=Qn(O[8]<<24|O[9]<<16|O[10]<<8|O[11])),K})[0],A=typeof A=="number"&&!isNaN(A)?A:1/0,A/L})})),y=Math.min.apply(null,g),isFinite(y)?y:0},Pp=function(d,p){var h=be(p,["moof","traf"]),g=0,y=0,T;if(h&&h.length){var w=be(h[0],["tfhd"])[0],P=be(h[0],["trun"])[0],L=be(h[0],["tfdt"])[0];if(w){var A=Cp(w);T=A.trackId}if(L){var O=xp(L);g=O.baseMediaDecodeTime}if(P){var j=Ep(P);j.samples&&j.samples.length&&(y=j.samples[0].compositionTimeOffset||0)}}var K=d[T]||9e4;return(g+y)/K},Ip=function(d){var p=be(d,["moov","trak"]),h=[];return p.forEach(function(g){var y=be(g,["mdia","hdlr"]),T=be(g,["tkhd"]);y.forEach(function(w,P){var L=vn(w.subarray(8,12)),A=T[P],O,j,K;L==="vide"&&(O=new DataView(A.buffer,A.byteOffset,A.byteLength),j=O.getUint8(0),K=j===0?O.getUint32(12):O.getUint32(20),h.push(K))})}),h},Wl=function(d){var p=d[0],h=p===0?12:20;return Qn(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])},Ap=function(d){var p=be(d,["moov","trak"]),h=[];return p.forEach(function(g){var y={},T=be(g,["tkhd"])[0],w,P;T&&(w=new DataView(T.buffer,T.byteOffset,T.byteLength),P=w.getUint8(0),y.id=P===0?w.getUint32(12):w.getUint32(20));var L=be(g,["mdia","hdlr"])[0];if(L){var A=vn(L.subarray(8,12));A==="vide"?y.type="video":A==="soun"?y.type="audio":y.type=A}var O=be(g,["mdia","minf","stbl","stsd"])[0];if(O){var j=O.subarray(8);y.codec=vn(j.subarray(4,8));var K=be(j,[y.codec])[0],Y,W;K&&(/^[asm]vc[1-9]$/i.test(y.codec)?(Y=K.subarray(78),W=vn(Y.subarray(4,8)),W==="avcC"&&Y.length>11?(y.codec+=".",y.codec+=ha(Y[9]),y.codec+=ha(Y[10]),y.codec+=ha(Y[11])):y.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(y.codec)?(Y=K.subarray(28),W=vn(Y.subarray(4,8)),W==="esds"&&Y.length>20&&Y[19]!==0?(y.codec+="."+ha(Y[19]),y.codec+="."+ha(Y[20]>>>2&63).replace(/^0/,"")):y.codec="mp4a.40.2"):y.codec=y.codec.toLowerCase())}var ee=be(g,["mdia","mdhd"])[0];ee&&(y.timescale=Wl(ee)),h.push(y)}),h};var Dp={findBox:be,parseType:vn,timescale:wp,startTime:kp,compositionStartTime:Pp,videoTrackIds:Ip,tracks:Ap,getTimescaleFromMediaHeader:Wl},Lp=function(d){var p=d[1]&31;return p<<=8,p|=d[2],p},mo=function(d){return!!(d[1]&64)},go=function(d){var p=0;return(d[3]&48)>>>4>1&&(p+=d[4]+1),p},Cx=function(d,p){var h=Lp(d);return h===0?"pat":h===p?"pmt":p?"pes":null},wx=function(d){var p=mo(d),h=4+go(d);return p&&(h+=d[h]+1),(d[h+10]&31)<<8|d[h+11]},kx=function(d){var p={},h=mo(d),g=4+go(d);if(h&&(g+=d[g]+1),!!(d[g+5]&1)){var y,T,w;y=(d[g+1]&15)<<8|d[g+2],T=3+y-4,w=(d[g+10]&15)<<8|d[g+11];for(var P=12+w;P<T;){var L=g+P;p[(d[L+1]&31)<<8|d[L+2]]=d[L],P+=((d[L+3]&15)<<8|d[L+4])+5}return p}},Px=function(d,p){var h=Lp(d),g=p[h];switch(g){case Ke.H264_STREAM_TYPE:return"video";case Ke.ADTS_STREAM_TYPE:return"audio";case Ke.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Ix=function(d){var p=mo(d);if(!p)return null;var h=4+go(d);if(h>=d.byteLength)return null;var g=null,y;return y=d[h+7],y&192&&(g={},g.pts=(d[h+9]&14)<<27|(d[h+10]&255)<<20|(d[h+11]&254)<<12|(d[h+12]&255)<<5|(d[h+13]&254)>>>3,g.pts*=4,g.pts+=(d[h+13]&6)>>>1,g.dts=g.pts,y&64&&(g.dts=(d[h+14]&14)<<27|(d[h+15]&255)<<20|(d[h+16]&254)<<12|(d[h+17]&255)<<5|(d[h+18]&254)>>>3,g.dts*=4,g.dts+=(d[h+18]&6)>>>1)),g},zl=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Ax=function(d){for(var p=4+go(d),h=d.subarray(p),g=0,y=0,T=!1,w;y<h.byteLength-3;y++)if(h[y+2]===1){g=y+5;break}for(;g<h.byteLength;)switch(h[g]){case 0:if(h[g-1]!==0){g+=2;break}else if(h[g-2]!==0){g++;break}y+3!==g-2&&(w=zl(h[y+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0));do g++;while(h[g]!==1&&g<h.length);y=g-2,g+=3;break;case 1:if(h[g-1]!==0||h[g-2]!==0){g+=3;break}w=zl(h[y+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0),y=g-2,g+=3;break;default:g+=3;break}return h=h.subarray(y),g-=y,y=0,h&&h.byteLength>3&&(w=zl(h[y+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0)),T},Dx={parseType:Cx,parsePat:wx,parsePmt:kx,parsePayloadUnitStartIndicator:mo,parsePesType:Px,parsePesTime:Ix,videoPacketContainsKeyFrame:Ax},Yn=lp.handleRollover,ge={};ge.ts=Dx,ge.aac=co;var yn=he.ONE_SECOND_IN_TS,lt=188,tr=71,Lx=function(d,p){for(var h=0,g=lt,y,T;g<d.byteLength;){if(d[h]===tr&&d[g]===tr){switch(y=d.subarray(h,g),T=ge.ts.parseType(y,p.pid),T){case"pat":p.pid=ge.ts.parsePat(y);break;case"pmt":var w=ge.ts.parsePmt(y);p.table=p.table||{},Object.keys(w).forEach(function(P){p.table[P]=w[P]});break}h+=lt,g+=lt;continue}h++,g++}},Op=function(d,p,h){for(var g=0,y=lt,T,w,P,L,A,O=!1;y<=d.byteLength;){if(d[g]===tr&&(d[y]===tr||y===d.byteLength)){switch(T=d.subarray(g,y),w=ge.ts.parseType(T,p.pid),w){case"pes":P=ge.ts.parsePesType(T,p.table),L=ge.ts.parsePayloadUnitStartIndicator(T),P==="audio"&&L&&(A=ge.ts.parsePesTime(T),A&&(A.type="audio",h.audio.push(A),O=!0));break}if(O)break;g+=lt,y+=lt;continue}g++,y++}for(y=d.byteLength,g=y-lt,O=!1;g>=0;){if(d[g]===tr&&(d[y]===tr||y===d.byteLength)){switch(T=d.subarray(g,y),w=ge.ts.parseType(T,p.pid),w){case"pes":P=ge.ts.parsePesType(T,p.table),L=ge.ts.parsePayloadUnitStartIndicator(T),P==="audio"&&L&&(A=ge.ts.parsePesTime(T),A&&(A.type="audio",h.audio.push(A),O=!0));break}if(O)break;g-=lt,y-=lt;continue}g--,y--}},Ox=function(d,p,h){for(var g=0,y=lt,T,w,P,L,A,O,j,K,Y=!1,W={data:[],size:0};y<d.byteLength;){if(d[g]===tr&&d[y]===tr){switch(T=d.subarray(g,y),w=ge.ts.parseType(T,p.pid),w){case"pes":if(P=ge.ts.parsePesType(T,p.table),L=ge.ts.parsePayloadUnitStartIndicator(T),P==="video"&&(L&&!Y&&(A=ge.ts.parsePesTime(T),A&&(A.type="video",h.video.push(A),Y=!0)),!h.firstKeyFrame)){if(L&&W.size!==0){for(O=new Uint8Array(W.size),j=0;W.data.length;)K=W.data.shift(),O.set(K,j),j+=K.byteLength;if(ge.ts.videoPacketContainsKeyFrame(O)){var ee=ge.ts.parsePesTime(O);ee?(h.firstKeyFrame=ee,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}W.size=0}W.data.push(T),W.size+=T.byteLength}break}if(Y&&h.firstKeyFrame)break;g+=lt,y+=lt;continue}g++,y++}for(y=d.byteLength,g=y-lt,Y=!1;g>=0;){if(d[g]===tr&&d[y]===tr){switch(T=d.subarray(g,y),w=ge.ts.parseType(T,p.pid),w){case"pes":P=ge.ts.parsePesType(T,p.table),L=ge.ts.parsePayloadUnitStartIndicator(T),P==="video"&&L&&(A=ge.ts.parsePesTime(T),A&&(A.type="video",h.video.push(A),Y=!0));break}if(Y)break;g-=lt,y-=lt;continue}g--,y--}},Rx=function(d,p){if(d.audio&&d.audio.length){var h=p;(typeof h=="undefined"||isNaN(h))&&(h=d.audio[0].dts),d.audio.forEach(function(T){T.dts=Yn(T.dts,h),T.pts=Yn(T.pts,h),T.dtsTime=T.dts/yn,T.ptsTime=T.pts/yn})}if(d.video&&d.video.length){var g=p;if((typeof g=="undefined"||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(T){T.dts=Yn(T.dts,g),T.pts=Yn(T.pts,g),T.dtsTime=T.dts/yn,T.ptsTime=T.pts/yn}),d.firstKeyFrame){var y=d.firstKeyFrame;y.dts=Yn(y.dts,g),y.pts=Yn(y.pts,g),y.dtsTime=y.dts/yn,y.ptsTime=y.pts/yn}}},Mx=function(d){for(var p=!1,h=0,g=null,y=null,T=0,w=0,P;d.length-w>=3;){var L=ge.aac.parseType(d,w);switch(L){case"timed-metadata":if(d.length-w<10){p=!0;break}if(T=ge.aac.parseId3TagSize(d,w),T>d.length){p=!0;break}y===null&&(P=d.subarray(w,w+T),y=ge.aac.parseAacTimestamp(P)),w+=T;break;case"audio":if(d.length-w<7){p=!0;break}if(T=ge.aac.parseAdtsSize(d,w),T>d.length){p=!0;break}g===null&&(P=d.subarray(w,w+T),g=ge.aac.parseSampleRate(P)),h++,w+=T;break;default:w++;break}if(p)return null}if(g===null||y===null)return null;var A=yn/g,O={audio:[{type:"audio",dts:y,pts:y},{type:"audio",dts:y+h*1024*A,pts:y+h*1024*A}]};return O},Nx=function(d){var p={pid:null,table:null},h={};Lx(d,p);for(var g in p.table)if(p.table.hasOwnProperty(g)){var y=p.table[g];switch(y){case Ke.H264_STREAM_TYPE:h.video=[],Ox(d,p,h),h.video.length===0&&delete h.video;break;case Ke.ADTS_STREAM_TYPE:h.audio=[],Op(d,p,h),h.audio.length===0&&delete h.audio;break}}return h},Fx=function(d,p){var h=ge.aac.isLikelyAacData(d),g;return h?g=Mx(d):g=Nx(d),!g||!g.audio&&!g.video?null:(Rx(g,p),g)},Ux={inspect:Fx,parseAudioPes_:Op},Bx=function(d,p){p.on("data",function(h){var g=h.initSegment;h.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};var y=h.data;h.data=y.buffer,d.postMessage({action:"data",segment:h,byteOffset:y.byteOffset,byteLength:y.byteLength},[h.data])}),p.on("done",function(h){d.postMessage({action:"done"})}),p.on("gopInfo",function(h){d.postMessage({action:"gopInfo",gopInfo:h})}),p.on("videoSegmentTimingInfo",function(h){var g={start:{decode:he.videoTsToSeconds(h.start.dts),presentation:he.videoTsToSeconds(h.start.pts)},end:{decode:he.videoTsToSeconds(h.end.dts),presentation:he.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:he.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=he.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),p.on("audioSegmentTimingInfo",function(h){var g={start:{decode:he.videoTsToSeconds(h.start.dts),presentation:he.videoTsToSeconds(h.start.pts)},end:{decode:he.videoTsToSeconds(h.end.dts),presentation:he.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:he.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=he.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),p.on("id3Frame",function(h){d.postMessage({action:"id3Frame",id3Frame:h})}),p.on("caption",function(h){d.postMessage({action:"caption",caption:h})}),p.on("trackinfo",function(h){d.postMessage({action:"trackinfo",trackInfo:h})}),p.on("audioTimingInfo",function(h){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:he.videoTsToSeconds(h.start),end:he.videoTsToSeconds(h.end)}})}),p.on("videoTimingInfo",function(h){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:he.videoTsToSeconds(h.start),end:he.videoTsToSeconds(h.end)}})}),p.on("log",function(h){d.postMessage({action:"log",log:h})})},Rp=function(){function E(p,h){this.options=h||{},this.self=p,this.init()}var d=E.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new sx.Transmuxer(this.options),Bx(this.self,this.transmuxer)},d.pushMp4Captions=function(h){this.captionParser||(this.captionParser=new Ex,this.captionParser.init());var g=new Uint8Array(h.data,h.byteOffset,h.byteLength),y=this.captionParser.parse(g,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:y&&y.captions||[],logs:y&&y.logs||[],data:g.buffer},[g.buffer])},d.probeMp4StartTime=function(h){var g=h.timescales,y=h.data,T=Dp.startTime(g,y);this.self.postMessage({action:"probeMp4StartTime",startTime:T,data:y},[y.buffer])},d.probeMp4Tracks=function(h){var g=h.data,y=Dp.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:y,data:g},[g.buffer])},d.probeTs=function(h){var g=h.data,y=h.baseStartTime,T=typeof y=="number"&&!isNaN(y)?y*he.ONE_SECOND_IN_TS:void 0,w=Ux.inspect(g,T),P=null;w&&(P={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},P.hasVideo&&(P.videoStart=w.video[0].ptsTime),P.hasAudio&&(P.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:P,data:g},[g.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(h){var g=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(g)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(h){var g=h.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(he.secondsToVideoTs(g)))},d.setAudioAppendStart=function(h){this.transmuxer.setAudioAppendStart(Math.ceil(he.secondsToVideoTs(h.appendStart)))},d.setRemux=function(h){this.transmuxer.setRemux(h.remux)},d.flush=function(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())},E}();self.onmessage=function(E){if(E.data.action==="init"&&E.data.options){this.messageHandlers=new Rp(self,E.data.options);return}this.messageHandlers||(this.messageHandlers=new Rp(self)),E.data&&E.data.action&&E.data.action!=="init"&&this.messageHandlers[E.data.action]&&this.messageHandlers[E.data.action](E.data)}})),$P=IT(GP),qP=function(e,n,i){var r=e.data.segment,a=r.type,s=r.initSegment,o=r.captions,u=r.captionStreams,l=r.metadata,c=r.videoFrameDtsTime,m=r.videoFramePtsTime;n.buffer.push({captions:o,captionStreams:u,metadata:l});var f=e.data.segment.boxes||{data:e.data.segment.data},_={type:a,data:new Uint8Array(f.data,f.data.byteOffset,f.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof c!="undefined"&&(_.videoFrameDtsTime=c),typeof m!="undefined"&&(_.videoFramePtsTime=m),i(_)},KP=function(e){var n=e.transmuxedData,i=e.callback;n.buffer=[],i(n)},XP=function(e,n){n.gopInfo=e.data.gopInfo},LT=function(e){var n=e.transmuxer,i=e.bytes,r=e.audioAppendStart,a=e.gopsToAlignWith,s=e.remux,o=e.onData,u=e.onTrackInfo,l=e.onAudioTimingInfo,c=e.onVideoTimingInfo,m=e.onVideoSegmentTimingInfo,f=e.onAudioSegmentTimingInfo,_=e.onId3,b=e.onCaptions,S=e.onDone,v=e.onEndedTimeline,x=e.onTransmuxerLog,C=e.isEndOfTimeline,k={buffer:[]},I=C,M=function(F){n.currentTransmux===e&&(F.data.action==="data"&&qP(F,k,o),F.data.action==="trackinfo"&&u(F.data.trackInfo),F.data.action==="gopInfo"&&XP(F,k),F.data.action==="audioTimingInfo"&&l(F.data.audioTimingInfo),F.data.action==="videoTimingInfo"&&c(F.data.videoTimingInfo),F.data.action==="videoSegmentTimingInfo"&&m(F.data.videoSegmentTimingInfo),F.data.action==="audioSegmentTimingInfo"&&f(F.data.audioSegmentTimingInfo),F.data.action==="id3Frame"&&_([F.data.id3Frame],F.data.id3Frame.dispatchType),F.data.action==="caption"&&b(F.data.caption),F.data.action==="endedtimeline"&&(I=!1,v()),F.data.action==="log"&&x(F.data.log),F.data.type==="transmuxed"&&(I||(n.onmessage=null,KP({transmuxedData:k,callback:S}),OT(n))))};if(n.onmessage=M,r&&n.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(a)&&n.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s!="undefined"&&n.postMessage({action:"setRemux",remux:s}),i.byteLength){var N=i instanceof ArrayBuffer?i:i.buffer,B=i instanceof ArrayBuffer?0:i.byteOffset;n.postMessage({action:"push",data:N,byteOffset:B,byteLength:i.byteLength},[N])}C&&n.postMessage({action:"endTimeline"}),n.postMessage({action:"flush"})},OT=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():LT(e.currentTransmux))},RT=function(e,n){e.postMessage({action:n}),OT(e)},MT=function(e,n){if(!n.currentTransmux){n.currentTransmux=e,RT(n,e);return}n.transmuxQueue.push(RT.bind(null,n,e))},QP=function(e){MT("reset",e)},YP=function(e){MT("endTimeline",e)},NT=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,LT(e);return}e.transmuxer.transmuxQueue.push(e)},JP=function(e){var n=new $P;n.currentTransmux=null,n.transmuxQueue=[];var i=n.terminate;return n.terminate=function(){return n.currentTransmux=null,n.transmuxQueue.length=0,i.call(n)},n.postMessage({action:"init",options:e}),n},Kh={reset:QP,endTimeline:YP,transmux:NT,createTransmuxer:JP},bl=function(e){var n=e.transmuxer,i=e.endAction||e.action,r=e.callback,a=Ht({},e,{endAction:null,transmuxer:null,callback:null}),s=function l(c){c.data.action===i&&(n.removeEventListener("message",l),c.data.data&&(c.data.data=new Uint8Array(c.data.data,e.byteOffset||0,e.byteLength||c.data.data.byteLength),e.data&&(e.data=c.data.data)),r(c.data))};if(n.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;a.byteOffset=o?0:e.data.byteOffset,a.byteLength=e.data.byteLength;var u=[o?e.data:e.data.buffer];n.postMessage(a,u)}else n.postMessage(a)},hr={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Xh=function(e){e.forEach(function(n){n.abort()})},ZP=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},eI=function(e){var n=e.target,i=Date.now()-n.requestTime,r={bandwidth:1/0,bytesReceived:0,roundTripTime:i||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},Qh=function(e,n){return n.timedout?{status:n.status,message:"HLS request timed-out at URL: "+n.uri,code:hr.TIMEOUT,xhr:n}:n.aborted?{status:n.status,message:"HLS request aborted at URL: "+n.uri,code:hr.ABORTED,xhr:n}:e?{status:n.status,message:"HLS request errored at URL: "+n.uri,code:hr.FAILURE,xhr:n}:n.responseType==="arraybuffer"&&n.response.byteLength===0?{status:n.status,message:"Empty HLS response at URL: "+n.uri,code:hr.FAILURE,xhr:n}:null},FT=function(e,n,i){return function(r,a){var s=a.response,o=Qh(r,a);if(o)return i(o,e);if(s.byteLength!==16)return i({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:hr.FAILURE,xhr:a},e);for(var u=new DataView(s),l=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]),c=0;c<n.length;c++)n[c].bytes=l;return i(null,e)}},UT=function(e,n){var i=Lf(e.map.bytes);if(i!=="mp4"){var r=e.map.resolvedUri||e.map.uri;return n({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+r,code:hr.FAILURE})}bl({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,u=s.data;return e.map.bytes=u,o.forEach(function(l){e.map.tracks=e.map.tracks||{},!e.map.tracks[l.type]&&(e.map.tracks[l.type]=l,typeof l.id=="number"&&l.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[l.id]=l.timescale))}),n(null)}})},tI=function(e){var n=e.segment,i=e.finishProcessingFn;return function(r,a){var s=Qh(r,a);if(s)return i(s,n);var o=new Uint8Array(a.response);if(n.map.key)return n.map.encryptedBytes=o,i(null,n);n.map.bytes=o,UT(n,function(u){if(u)return u.xhr=a,u.status=a.status,i(u,n);i(null,n)})}},rI=function(e){var n=e.segment,i=e.finishProcessingFn,r=e.responseType;return function(a,s){var o=Qh(a,s);if(o)return i(o,n);var u=r==="arraybuffer"||!s.responseText?s.response:WP(s.responseText.substring(n.lastReachedChar||0));return n.stats=ZP(s),n.key?n.encryptedBytes=new Uint8Array(u):n.bytes=new Uint8Array(u),i(null,n)}},nI=function(e){var n=e.segment,i=e.bytes,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,m=e.endedTimelineFn,f=e.dataFn,_=e.doneFn,b=e.onTransmuxerLog,S=n.map&&n.map.tracks||{},v=Boolean(S.audio&&S.video),x=a.bind(null,n,"audio","start"),C=a.bind(null,n,"audio","end"),k=a.bind(null,n,"video","start"),I=a.bind(null,n,"video","end"),M=function(){return NT({bytes:i,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:v,onData:function(U){U.type=U.type==="combined"?"video":U.type,f(n,U)},onTrackInfo:function(U){r&&(v&&(U.isMuxed=!0),r(n,U))},onAudioTimingInfo:function(U){x&&typeof U.start!="undefined"&&(x(U.start),x=null),C&&typeof U.end!="undefined"&&C(U.end)},onVideoTimingInfo:function(U){k&&typeof U.start!="undefined"&&(k(U.start),k=null),I&&typeof U.end!="undefined"&&I(U.end)},onVideoSegmentTimingInfo:function(U){s(U)},onAudioSegmentTimingInfo:function(U){o(U)},onId3:function(U,F){u(n,U,F)},onCaptions:function(U){l(n,[U])},isEndOfTimeline:c,onEndedTimeline:function(){m()},onTransmuxerLog:b,onDone:function(U){!_||(U.type=U.type==="combined"?"video":U.type,_(null,n,U))}})};bl({action:"probeTs",transmuxer:n.transmuxer,data:i,baseStartTime:n.baseStartTime,callback:function(B){n.bytes=i=B.data;var U=B.result;U&&(r(n,{hasAudio:U.hasAudio,hasVideo:U.hasVideo,isMuxed:v}),r=null,U.hasAudio&&!v&&x(U.audioStart),U.hasVideo&&k(U.videoStart),x=null,k=null),M()}})},BT=function(e){var n=e.segment,i=e.bytes,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,m=e.endedTimelineFn,f=e.dataFn,_=e.doneFn,b=e.onTransmuxerLog,S=new Uint8Array(i);if(ww(S)){n.isFmp4=!0;var v=n.map.tracks,x={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(x.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(x.videoCodec=v.video.codec),v.video&&v.audio&&(x.isMuxed=!0),r(n,x);var C=function(I){f(n,{data:S,type:x.hasAudio&&!x.isMuxed?"audio":"video"}),I&&I.length&&l(n,I),_(null,n,{})};bl({action:"probeMp4StartTime",timescales:n.map.timescales,data:S,transmuxer:n.transmuxer,callback:function(I){var M=I.data,N=I.startTime;if(i=M.buffer,n.bytes=S=M,x.hasAudio&&!x.isMuxed&&a(n,"audio","start",N),x.hasVideo&&a(n,"video","start",N),!v.video||!M.byteLength||!n.transmuxer){C();return}bl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:S,timescales:n.map.timescales,trackIds:[v.video.id],callback:function(U){i=U.data.buffer,n.bytes=S=U.data,U.logs.forEach(function(F){b(R.mergeOptions(F,{stream:"mp4CaptionParser"}))}),C(U.captions)}})}});return}if(!n.transmuxer){_(null,n,{});return}if(typeof n.container=="undefined"&&(n.container=Lf(S)),n.container!=="ts"&&n.container!=="aac"){r(n,{hasAudio:!1,hasVideo:!1}),_(null,n,{});return}nI({segment:n,bytes:i,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:m,dataFn:f,doneFn:_,onTransmuxerLog:b})},jT=function(e,n){var i=e.id,r=e.key,a=e.encryptedBytes,s=e.decryptionWorker,o=function l(c){if(c.data.source===i){s.removeEventListener("message",l);var m=c.data.decrypted;n(new Uint8Array(m.bytes,m.byteOffset,m.byteLength))}};s.addEventListener("message",o);var u;r.bytes.slice?u=r.bytes.slice():u=new Uint32Array(Array.prototype.slice.call(r.bytes)),s.postMessage(ST({source:i,encrypted:a,key:u,iv:r.iv}),[a.buffer,u.buffer])},iI=function(e){var n=e.decryptionWorker,i=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,m=e.endedTimelineFn,f=e.dataFn,_=e.doneFn,b=e.onTransmuxerLog;jT({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:n},function(S){i.bytes=S,BT({segment:i,bytes:i.bytes,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:m,dataFn:f,doneFn:_,onTransmuxerLog:b})})},aI=function(e){var n=e.activeXhrs,i=e.decryptionWorker,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,m=e.endedTimelineFn,f=e.dataFn,_=e.doneFn,b=e.onTransmuxerLog,S=0,v=!1;return function(x,C){if(!v){if(x)return v=!0,Xh(n),_(x,C);if(S+=1,S===n.length){var k=function(){if(C.encryptedBytes)return iI({decryptionWorker:i,segment:C,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:m,dataFn:f,doneFn:_,onTransmuxerLog:b});BT({segment:C,bytes:C.bytes,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:m,dataFn:f,doneFn:_,onTransmuxerLog:b})};if(C.endOfAllRequests=Date.now(),C.map&&C.map.encryptedBytes&&!C.map.bytes)return jT({decryptionWorker:i,id:C.requestId+"-init",encryptedBytes:C.map.encryptedBytes,key:C.map.key},function(I){C.map.bytes=I,UT(C,function(M){if(M)return Xh(n),_(M,C);k()})});k()}}}},sI=function(e){var n=e.loadendState,i=e.abortFn;return function(r){var a=r.target;a.aborted&&i&&!n.calledAbortFn&&(i(),n.calledAbortFn=!0)}},oI=function(e){var n=e.segment,i=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(r){var a=r.target;if(!a.aborted)return n.stats=R.mergeOptions(n.stats,eI(r)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),i(r,n)}},uI=function(e){var n=e.xhr,i=e.xhrOptions,r=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,u=e.trackInfoFn,l=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,m=e.audioSegmentTimingInfoFn,f=e.id3Fn,_=e.captionsFn,b=e.isEndOfTimeline,S=e.endedTimelineFn,v=e.dataFn,x=e.doneFn,C=e.onTransmuxerLog,k=[],I=aI({activeXhrs:k,decryptionWorker:r,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:m,id3Fn:f,captionsFn:_,isEndOfTimeline:b,endedTimelineFn:S,dataFn:v,doneFn:x,onTransmuxerLog:C});if(a.key&&!a.key.bytes){var M=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&M.push(a.map.key);var N=R.mergeOptions(i,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),B=FT(a,M,I),U=n(N,B);k.push(U)}if(a.map&&!a.map.bytes){var F=a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri);if(F){var H=R.mergeOptions(i,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),se=FT(a,[a.map.key],I),le=n(H,se);k.push(le)}var ie=R.mergeOptions(i,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:Gh(a.map)}),xe=tI({segment:a,finishProcessingFn:I}),oe=n(ie,xe);k.push(oe)}var de=R.mergeOptions(i,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:Gh(a)}),pe=rI({segment:a,finishProcessingFn:I,responseType:de.responseType}),He=n(de,pe);He.addEventListener("progress",oI({segment:a,progressFn:o,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:m,id3Fn:f,captionsFn:_,isEndOfTimeline:b,endedTimelineFn:S,dataFn:v})),k.push(He);var et={};return k.forEach(function(zt){zt.addEventListener("loadend",sI({loadendState:et,abortFn:s}))}),function(){return Xh(k)}},lI=er("CodecUtils"),dI=function(e){var n=e.attributes||{};if(n.CODECS)return lr(n.CODECS)},HT=function(e,n){var i=n.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},cI=function(e,n){if(!HT(e,n))return!0;var i=n.attributes||{},r=e.mediaGroups.AUDIO[i.AUDIO];for(var a in r)if(!r[a].uri&&!r[a].playlists)return!0;return!1},El=function(e){var n={};return e.forEach(function(i){var r=i.mediaType,a=i.type,s=i.details;n[r]=n[r]||[],n[r].push(h0(""+a+s))}),Object.keys(n).forEach(function(i){if(n[i].length>1){lI("multiple "+i+" codecs found as attributes: "+n[i].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),n[i]=null;return}n[i]=n[i][0]}),n},VT=function(e){var n=0;return e.audio&&n++,e.video&&n++,n},$s=function(e,n){var i=n.attributes||{},r=El(dI(n)||[]);if(HT(e,n)&&!r.audio&&!cI(e,n)){var a=El(GC(e,i.AUDIO)||[]);a.audio&&(r.audio=a.audio)}return r},Cl=er("PlaylistSelector"),WT=function(e){if(!(!e||!e.playlist)){var n=e.playlist;return JSON.stringify({id:n.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:n.attributes&&n.attributes.CODECS||""})}},wl=function(e,n){if(!e)return"";var i=D.getComputedStyle(e);return i?i[n]:""},sa=function(e,n){var i=e.slice();e.sort(function(r,a){var s=n(r,a);return s===0?i.indexOf(r)-i.indexOf(a):s})},Yh=function(e,n){var i,r;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||D.Number.MAX_VALUE,n.attributes.BANDWIDTH&&(r=n.attributes.BANDWIDTH),r=r||D.Number.MAX_VALUE,i-r},fI=function(e,n){var i,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||D.Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(r=n.attributes.RESOLUTION.width),r=r||D.Number.MAX_VALUE,i===r&&e.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?e.attributes.BANDWIDTH-n.attributes.BANDWIDTH:i-r},zT=function(e,n,i,r,a,s){if(!!e){var o={bandwidth:n,width:i,height:r,limitRenditionByPlayerDimensions:a},u=e.playlists;kt.isAudioOnly(e)&&(u=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=u.map(function(H){var se,le=H.attributes&&H.attributes.RESOLUTION&&H.attributes.RESOLUTION.width,ie=H.attributes&&H.attributes.RESOLUTION&&H.attributes.RESOLUTION.height;return se=H.attributes&&H.attributes.BANDWIDTH,se=se||D.Number.MAX_VALUE,{bandwidth:se,width:le,height:ie,playlist:H}});sa(l,function(H,se){return H.bandwidth-se.bandwidth}),l=l.filter(function(H){return!kt.isIncompatible(H.playlist)});var c=l.filter(function(H){return kt.isEnabled(H.playlist)});c.length||(c=l.filter(function(H){return!kt.isDisabled(H.playlist)}));var m=c.filter(function(H){return H.bandwidth*qe.BANDWIDTH_VARIANCE<n}),f=m[m.length-1],_=m.filter(function(H){return H.bandwidth===f.bandwidth})[0];if(a===!1){var b=_||c[0]||l[0];if(b&&b.playlist){var S="sortedPlaylistReps";return _&&(S="bandwidthBestRep"),c[0]&&(S="enabledPlaylistReps"),Cl("choosing "+WT(b)+" using "+S+" with options",o),b.playlist}return Cl("could not choose a playlist with options",o),null}var v=m.filter(function(H){return H.width&&H.height});sa(v,function(H,se){return H.width-se.width});var x=v.filter(function(H){return H.width===i&&H.height===r});f=x[x.length-1];var C=x.filter(function(H){return H.bandwidth===f.bandwidth})[0],k,I,M;C||(k=v.filter(function(H){return H.width>i||H.height>r}),I=k.filter(function(H){return H.width===k[0].width&&H.height===k[0].height}),f=I[I.length-1],M=I.filter(function(H){return H.bandwidth===f.bandwidth})[0]);var N;if(s.experimentalLeastPixelDiffSelector){var B=v.map(function(H){return H.pixelDiff=Math.abs(H.width-i)+Math.abs(H.height-r),H});sa(B,function(H,se){return H.pixelDiff===se.pixelDiff?se.bandwidth-H.bandwidth:H.pixelDiff-se.pixelDiff}),N=B[0]}var U=N||M||C||_||c[0]||l[0];if(U&&U.playlist){var F="sortedPlaylistReps";return N?F="leastPixelDiffRep":M?F="resolutionPlusOneRep":C?F="resolutionBestRep":_?F="bandwidthBestRep":c[0]&&(F="enabledPlaylistReps"),Cl("choosing "+WT(U)+" using "+F+" with options",o),U.playlist}return Cl("could not choose a playlist with options",o),null}},GT=function(){var e=this.useDevicePixelRatio&&D.devicePixelRatio||1;return zT(this.playlists.master,this.systemBandwidth,parseInt(wl(this.tech_.el(),"width"),10)*e,parseInt(wl(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},hI=function(e){var n=-1,i=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var r=this.useDevicePixelRatio&&D.devicePixelRatio||1;return n<0&&(n=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(n=e*this.systemBandwidth+(1-e)*n,i=this.systemBandwidth),zT(this.playlists.master,n,parseInt(wl(this.tech_.el(),"width"),10)*r,parseInt(wl(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},pI=function(e){var n=e.master,i=e.currentTime,r=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,u=e.currentTimeline,l=e.syncController,c=n.playlists.filter(function(S){return!kt.isIncompatible(S)}),m=c.filter(kt.isEnabled);m.length||(m=c.filter(function(S){return!kt.isDisabled(S)}));var f=m.filter(kt.hasAttribute.bind(null,"BANDWIDTH")),_=f.map(function(S){var v=l.getSyncPoint(S,a,u,i),x=v?1:2,C=kt.estimateSegmentRequestTime(s,r,S),k=C*x-o;return{playlist:S,rebufferingImpact:k}}),b=_.filter(function(S){return S.rebufferingImpact<=0});return sa(b,function(S,v){return Yh(v.playlist,S.playlist)}),b.length?b[0]:(sa(_,function(S,v){return S.rebufferingImpact-v.rebufferingImpact}),_[0]||null)},mI=function(){var e=this,n=this.playlists.master.playlists.filter(kt.isEnabled);sa(n,function(r,a){return Yh(r,a)});var i=n.filter(function(r){return!!$s(e.playlists.master,r).video});return i[0]||null},gI=function(e){var n=0,i;return e.bytes&&(i=new Uint8Array(e.bytes),e.segments.forEach(function(r){i.set(r,n),n+=r.byteLength})),i},vI=function(e,n,i){if(!e[i]){n.trigger({type:"usage",name:"vhs-608"}),n.trigger({type:"usage",name:"hls-608"});var r=i;/^cc708_/.test(i)&&(r="SERVICE"+i.split("_")[1]);var a=n.textTracks().getTrackById(r);if(a)e[i]=a;else{var s=n.options_.vhs&&n.options_.vhs.captionServices||{},o=i,u=i,l=!1,c=s[r];c&&(o=c.label,u=c.language,l=c.default),e[i]=n.addRemoteTextTrack({kind:"captions",id:r,default:l,label:o,language:u},!1).track}}},yI=function(e){var n=e.inbandTextTracks,i=e.captionArray,r=e.timestampOffset;if(!!i){var a=D.WebKitDataCue||D.VTTCue;i.forEach(function(s){var o=s.stream;n[o].addCue(new a(s.startTime+r,s.endTime+r,s.text))})}},_I=function(e){Object.defineProperties(e.frame,{id:{get:function(){return R.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return R.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return R.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},TI=function(e){var n=e.inbandTextTracks,i=e.metadataArray,r=e.timestampOffset,a=e.videoDuration;if(!!i){var s=D.WebKitDataCue||D.VTTCue,o=n.metadataTrack_;if(!!o&&(i.forEach(function(_){var b=_.cueTime+r;typeof b!="number"||D.isNaN(b)||b<0||!(b<1/0)||_.frames.forEach(function(S){var v=new s(b,b,S.value||S.url||S.data||"");v.frame=S,v.value=S,_I(v),o.addCue(v)})}),!(!o.cues||!o.cues.length))){for(var u=o.cues,l=[],c=0;c<u.length;c++)u[c]&&l.push(u[c]);var m=l.reduce(function(_,b){var S=_[b.startTime]||[];return S.push(b),_[b.startTime]=S,_},{}),f=Object.keys(m).sort(function(_,b){return Number(_)-Number(b)});f.forEach(function(_,b){var S=m[_],v=Number(f[b+1])||a;S.forEach(function(x){x.endTime=v})})}}},SI=function(e,n,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n)},qs=function(e,n,i){var r,a;if(!!i&&!!i.cues)for(r=i.cues.length;r--;)a=i.cues[r],a.startTime>=e&&a.endTime<=n&&i.removeCue(a)},xI=function(e){var n=e.cues;if(!!n)for(var i=0;i<n.length;i++){for(var r=[],a=0,s=0;s<n.length;s++)n[i].startTime===n[s].startTime&&n[i].endTime===n[s].endTime&&n[i].text===n[s].text&&(a++,a>1&&r.push(n[s]));r.length&&r.forEach(function(o){return e.removeCue(o)})}},bI=function(e,n,i){if(typeof n=="undefined"||n===null||!e.length)return[];var r=Math.ceil((n-i+3)*Wu.ONE_SECOND_IN_TS),a;for(a=0;a<e.length&&!(e[a].pts>r);a++);return e.slice(a)},EI=function(e,n,i){if(!n.length)return e;if(i)return n.slice();var r=n[0].pts,a=0;for(a;a<e.length&&!(e[a].pts>=r);a++);return e.slice(0,a).concat(n)},CI=function(e,n,i,r){for(var a=Math.ceil((n-r)*Wu.ONE_SECOND_IN_TS),s=Math.ceil((i-r)*Wu.ONE_SECOND_IN_TS),o=e.slice(),u=e.length;u--&&!(e[u].pts<=s););if(u===-1)return o;for(var l=u+1;l--&&!(e[l].pts<=a););return l=Math.max(l,0),o.splice(l,u-l+1),o},wI=function(e,n){if(!e&&!n||!e&&n||e&&!n)return!1;if(e===n)return!0;var i=Object.keys(e).sort(),r=Object.keys(n).sort();if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++){var s=i[a];if(s!==r[a]||e[s]!==n[s])return!1}return!0},$T=22,kI=function(e,n,i){n=n||[];for(var r=[],a=0,s=0;s<n.length;s++){var o=n[s];if(e===o.timeline&&(r.push(s),a+=o.duration,a>i))return s}return r.length===0?0:r[r.length-1]},Ks=1,PI=500,qT=function(e){return typeof e=="number"&&isFinite(e)},kl=1/60,II=function(e,n,i){return e!=="main"||!n||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":n.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},AI=function(e,n,i){var r=n-qe.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var a=n-i;return Math.min(a,r)},oa=function(e){var n=e.startOfSegment,i=e.duration,r=e.segment,a=e.part,s=e.playlist,o=s.mediaSequence,u=s.id,l=s.segments,c=l===void 0?[]:l,m=e.mediaIndex,f=e.partIndex,_=e.timeline,b=c.length-1,S="mediaIndex/partIndex increment";e.getMediaInfoForTime?S="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(S="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(S+=" with independent "+e.independent);var v=typeof f=="number",x=e.segment.uri?"segment":"pre-segment",C=v?sT({preloadSegment:r})-1:0;return x+" ["+(o+m)+"/"+(o+b)+"]"+(v?" part ["+f+"/"+C+"]":"")+(" segment start/end ["+r.start+" => "+r.end+"]")+(v?" part start/end ["+a.start+" => "+a.end+"]":"")+(" startOfSegment ["+n+"]")+(" duration ["+i+"]")+(" timeline ["+_+"]")+(" selected by ["+S+"]")+(" playlist ["+u+"]")},KT=function(e){return e+"TimingInfo"},DI=function(e){var n=e.segmentTimeline,i=e.currentTimeline,r=e.startOfSegment,a=e.buffered,s=e.overrideCheck;return!s&&n===i?null:n<i?r:a.length?a.end(a.length-1):r},XT=function(e){var n=e.timelineChangeController,i=e.currentTimeline,r=e.segmentTimeline,a=e.loaderType,s=e.audioDisabled;if(i===r)return!1;if(a==="audio"){var o=n.lastTimelineChange({type:"main"});return!o||o.to!==r}if(a==="main"&&s){var u=n.pendingTimelineChange({type:"audio"});return!(u&&u.to===r)}return!1},LI=function(e,n){var i=e&&typeof e.start=="number"&&typeof e.end=="number"?e.end-e.start:0,r=n&&typeof n.start=="number"&&typeof n.end=="number"?n.end-n.start:0;return Math.max(i,r)},QT=function(e){var n=e.segmentDuration,i=e.maxDuration;return n?Math.round(n)>i+pn:!1},OI=function(e,n){if(n!=="hls")return null;var i=LI(e.audioTimingInfo,e.videoTimingInfo);if(!i)return null;var r=e.playlist.targetDuration,a=QT({segmentDuration:i,maxDuration:r*2}),s=QT({segmentDuration:i,maxDuration:r}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+i+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+r+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},Jh=function(t){$(e,t);function e(i,r){var a;if(a=t.call(this)||this,!i)throw new TypeError("Initialization settings are required");if(typeof i.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!i.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=i.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=i.hasPlayed,a.currentTime_=i.currentTime,a.seekable_=i.seekable,a.seeking_=i.seeking,a.duration_=i.duration,a.mediaSource_=i.mediaSource,a.vhs_=i.vhs,a.loaderType_=i.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=i.segmentMetadataTrack,a.goalBufferLength_=i.goalBufferLength,a.sourceType_=i.sourceType,a.sourceUpdater_=i.sourceUpdater,a.inbandTextTracks_=i.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=i.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=i.parse708captions,a.captionServices_=i.captionServices,a.experimentalExactManifestTimings=i.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=R.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=i.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=i.decrypter,a.syncController_=i.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=er("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(re(a),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="main"&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="audio"&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}var n=e.prototype;return n.createTransmuxer_=function(){return Kh.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&D.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(r){this.audioDisabled_=!r,r?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,D.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(r){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==r},n.error=function(r){return typeof r!="undefined"&&(this.logger_("error occurred:",r),this.error_=r),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Kh.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var r=this.getMediaInfo_();if(!this.sourceUpdater_||!r)return R.createTimeRanges();if(this.loaderType_==="main"){var a=r.hasAudio,s=r.hasVideo,o=r.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(r,a){if(a===void 0&&(a=!1),!r)return null;var s=xl(r),o=this.initSegments_[s];return a&&!o&&r.bytes&&(this.initSegments_[s]=o={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:r.bytes,tracks:r.tracks,timescales:r.timescales}),o||r},n.segmentKey=function(r,a){if(a===void 0&&(a=!1),!r)return null;var s=xT(r),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&r.bytes&&(this.keyCache_[s]=o={resolvedUri:r.resolvedUri,bytes:r.bytes});var u={resolvedUri:(o||r).resolvedUri};return o&&(u.bytes=o.bytes),u},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(r,a){if(a===void 0&&(a={}),!!r){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=r,this.xhrOptions_=a,this.state==="INIT"&&(r.syncInfo={mediaSequence:r.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(r));var u=null;if(s&&(s.id?u=s.id:s.uri&&(u=s.uri)),this.logger_("playlist update ["+u+" => "+(r.id||r.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==r.uri){this.mediaIndex!==null&&(r.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var l=r.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+l+"]"),this.mediaIndex!==null)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var m=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=m}}o&&(o.mediaIndex-=l,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=r.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,r)}},n.pause=function(){this.checkBufferTimeout_&&(D.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return this.checkBufferTimeout_===null},n.resetEverything=function(r){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,r),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&Kh.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(r,a,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),a===1/0&&(a=this.duration_()),a<=r){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var u=1,l=function(){u--,u===0&&s()};(o||!this.audioDisabled_)&&(u++,this.sourceUpdater_.removeAudio(r,a,l)),(o||this.loaderType_==="main")&&(this.gopBuffer_=CI(this.gopBuffer_,r,a,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(r,a,l));for(var c in this.inbandTextTracks_)qs(r,a,this.inbandTextTracks_[c]);qs(r,a,this.segmentMetadataTrack_),l()},n.monitorBuffer_=function(){this.checkBufferTimeout_&&D.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=D.setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&D.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=D.setTimeout(this.monitorBufferTick_.bind(this),PI)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var r=this.chooseNextRequest_();!r||(typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline})),this.loadSegment_(r))}},n.isEndOfStream_=function(r,a,s){if(r===void 0&&(r=this.mediaIndex),a===void 0&&(a=this.playlist_),s===void 0&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o=typeof r=="number"&&a.segments[r],u=r+1===a.segments.length,l=!o||!o.parts||s+1===o.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&u&&l},n.chooseNextRequest_=function(){var r=this.buffered_(),a=nT(r)||0,s=Mh(r,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,u=s>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||o||u)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(c.isSyncRequest)c.mediaIndex=kI(this.currentTimeline_,l,a);else if(this.mediaIndex!==null){var m=l[this.mediaIndex],f=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=m.end?m.end:a,m.parts&&m.parts[f+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=f+1):c.mediaIndex=this.mediaIndex+1}else{var _=kt.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),b=_.segmentIndex,S=_.startTime,v=_.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),c.mediaIndex=b,c.startOfSegment=S,c.partIndex=v}var x=l[c.mediaIndex],C=x&&typeof c.partIndex=="number"&&x.parts&&x.parts[c.partIndex];if(!x||typeof c.partIndex=="number"&&!C)return null;if(typeof c.partIndex!="number"&&x.parts&&(c.partIndex=0,C=x.parts[0]),!s&&C&&!C.independent)if(c.partIndex===0){var k=l[c.mediaIndex-1],I=k.parts&&k.parts.length&&k.parts[k.parts.length-1];I&&I.independent&&(c.mediaIndex-=1,c.partIndex=k.parts.length-1,c.independent="previous segment")}else x.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var M=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=l.length-1&&M&&!this.seeking_()?null:this.generateSegmentInfo_(c)},n.generateSegmentInfo_=function(r){var a=r.independent,s=r.playlist,o=r.mediaIndex,u=r.startOfSegment,l=r.isSyncRequest,c=r.partIndex,m=r.forceTimestampOffset,f=r.getMediaInfoForTime,_=s.segments[o],b=typeof c=="number"&&_.parts[c],S={requestId:"segment-loader-"+Math.random(),uri:b&&b.resolvedUri||_.resolvedUri,mediaIndex:o,partIndex:b?c:null,isSyncRequest:l,startOfSegment:u,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:_.timeline,duration:b&&b.duration||_.duration,segment:_,part:b,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:f,independent:a},v=typeof m!="undefined"?m:this.isPendingTimestampOffset_;S.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:_.timeline,currentTimeline:this.currentTimeline_,startOfSegment:u,buffered:this.buffered_(),overrideCheck:v});var x=nT(this.sourceUpdater_.audioBuffered());return typeof x=="number"&&(S.audioAppendStart=x-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(S.gopsToAlignWith=bI(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),S},n.timestampOffsetForSegment_=function(r){return DI(r)},n.earlyAbortWhenNeeded_=function(r){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(r.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=r.bandwidth,o=this.pendingSegment_.duration,u=kt.estimateSegmentRequestTime(o,s,this.playlist_,r.bytesReceived),l=nP(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(u<=l)){var c=pI({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!!c){var m=u-l,f=m-c.rebufferingImpact,_=.5;l<=pn&&(_=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||f<_)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*qe.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(r){this.logger_("Aborting "+oa(r)),this.mediaRequestsAborted+=1},n.handleProgress_=function(r,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},n.handleTrackInfo_=function(r,a){this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},wI(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(r.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},n.handleTimingInfo_=function(r,a,s,o){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){var u=this.pendingSegment_,l=KT(a);u[l]=u[l]||{},u[l][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(r,a){var s=this;if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,r,a));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),l={};a.forEach(function(c){l[c.stream]=l[c.stream]||{startTime:1/0,captions:[],endTime:0};var m=l[c.stream];m.startTime=Math.min(m.startTime,c.startTime+u),m.endTime=Math.max(m.endTime,c.endTime+u),m.captions.push(c)}),Object.keys(l).forEach(function(c){var m=l[c],f=m.startTime,_=m.endTime,b=m.captions,S=s.inbandTextTracks_;s.logger_("adding cues from "+f+" -> "+_+" for "+c),vI(S,s.vhs_.tech_,c),qs(f,_,S[c]),yI({captionArray:b,inbandTextTracks:S,timestampOffset:u})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},n.handleId3_=function(r,a,s){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,r,a,s));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();SI(this.inbandTextTracks_,s,this.vhs_.tech_),TI({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:u,videoDuration:this.duration_()})}},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(r){return r()}),this.metadataQueue_.caption.forEach(function(r){return r()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var r=this.callQueue_;this.callQueue_=[],r.forEach(function(a){return a()})},n.processLoadQueue_=function(){var r=this.loadQueue_;this.loadQueue_=[],r.forEach(function(a){return a()})},n.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var r=this.pendingSegment_;return r?this.getCurrentMediaInfo_()?!XT({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},n.getCurrentMediaInfo_=function(r){return r===void 0&&(r=this.pendingSegment_),r&&r.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(r){return r===void 0&&(r=this.pendingSegment_),this.getCurrentMediaInfo_(r)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var r=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!r||!a)return!1;var s=a.hasAudio,o=a.hasVideo,u=a.isMuxed;return!(o&&!r.videoTimingInfo||s&&!this.audioDisabled_&&!u&&!r.audioTimingInfo||XT({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(r,a){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,r,a));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(r.map&&(r.map=this.initSegmentForMap(r.map,!0),s.segment.map=r.map),r.key&&this.segmentKey(r.key,!0),s.isFmp4=r.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[KT(a.type)].start;else{var o=this.getCurrentMediaInfo_(),u=this.loaderType_==="main"&&o&&o.hasVideo,l;u&&(l=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:u,firstVideoFrameTimeForData:l,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==s.mediaIndex||c.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}},n.updateAppendInitSegmentStatus=function(r,a){this.loaderType_==="main"&&typeof r.timestampOffset=="number"&&!r.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==r.playlist&&(this.appendInitSegment_[a]=!0)},n.getInitSegmentAndUpdateState_=function(r){var a=r.type,s=r.initSegment,o=r.map,u=r.playlist;if(o){var l=xl(o);if(this.activeInitSegmentId_===l)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=l}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=u,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},n.handleQuotaExceededError_=function(r,a){var s=this,o=r.segmentInfo,u=r.type,l=r.bytes,c=this.sourceUpdater_.audioBuffered(),m=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+qn(c).join(", ")),m.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+qn(m).join(", "));var f=c.length?c.start(0):0,_=c.length?c.end(c.length-1):0,b=m.length?m.start(0):0,S=m.length?m.end(m.length-1):0;if(_-f<=Ks&&S-b<=Ks){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+l.byteLength+", ")+("audio buffer: "+qn(c).join(", ")+", ")+("video buffer: "+qn(m).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:u,bytes:l}));var v=this.currentTime_(),x=v-Ks;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+x),this.remove(0,x,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Ks+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=D.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},Ks*1e3)},!0)},n.handleAppendError_=function(r,a){var s=r.segmentInfo,o=r.type,u=r.bytes;if(!!a){if(a.code===$T){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:u});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+u.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},n.appendToSourceBuffer_=function(r){var a=r.segmentInfo,s=r.type,o=r.initSegment,u=r.data,l=r.bytes;if(!l){var c=[u],m=u.byteLength;o&&(c.unshift(o),m+=o.byteLength),l=gI({bytes:m,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:l}))},n.handleSegmentTimingInfo_=function(r,a,s){if(!(!this.pendingSegment_||a!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,u=r+"TimingInfo";o[u]||(o[u]={}),o[u].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[u].transmuxedPresentationStart=s.start.presentation,o[u].transmuxedDecodeStart=s.start.decode,o[u].transmuxedPresentationEnd=s.end.presentation,o[u].transmuxedDecodeEnd=s.end.decode,o[u].baseMediaDecodeTime=s.baseMediaDecodeTime}},n.appendData_=function(r,a){var s=a.type,o=a.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var u=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:r.playlist,map:r.isFmp4?r.segment.map:null});this.appendToSourceBuffer_({segmentInfo:r,type:s,initSegment:u,data:o})}},n.loadSegment_=function(r){var a=this;if(this.state="WAITING",this.pendingSegment_=r,this.trimBackBuffer_(r),typeof r.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Ht({},r,{forceTimestampOffset:!0});Ht(r,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(r)});return}this.updateTransmuxerAndRequestSegment_(r)},n.updateTransmuxerAndRequestSegment_=function(r){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(r.timestampOffset)&&(this.gopBuffer_.length=0,r.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:r.timestampOffset}));var s=this.createSimplifiedSegmentObj_(r),o=this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex),u=this.mediaIndex!==null,l=r.timeline!==this.currentTimeline_&&r.timeline>0,c=o||u&&l;this.logger_("Requesting "+oa(r)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),r.abortRequests=uI({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,r),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",r.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",r.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(f){var _=f.message,b=f.level,S=f.stream;a.logger_(oa(r)+" logged from transmuxer stream "+S+" as a "+b+": "+_)}})},n.trimBackBuffer_=function(r){var a=AI(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},n.createSimplifiedSegmentObj_=function(r){var a=r.segment,s=r.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:r.requestId,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,part:r.part},u=r.playlist.segments[r.mediaIndex-1];if(u&&u.timeline===a.timeline&&(u.videoTimingInfo?o.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(o.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd)),a.key){var l=a.key.iv||new Uint32Array([0,0,0,r.mediaIndex+r.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=l}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},n.saveTransferStats_=function(r){this.mediaRequests+=1,r&&(this.mediaBytesTransferred+=r.bytesReceived,this.mediaTransferDuration+=r.roundTripTime)},n.saveBandwidthRelatedStats_=function(r,a){if(this.pendingSegment_.byteLength=a.bytesReceived,r<kl){this.logger_("Ignoring segment's bandwidth because its duration of "+r+(" is less than the min to record "+kl));return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(r,a,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,r,a,s));return}if(this.saveTransferStats_(a.stats),!!this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(r){if(this.pendingSegment_=null,this.state="READY",r.code===hr.ABORTED)return;if(this.pause(),r.code===hr.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(r),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=EI(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},n.setTimeMapping_=function(r){var a=this.syncController_.mappingForTimeline(r);a!==null&&(this.timeMapping_=a)},n.updateMediaSecondsLoaded_=function(r){typeof r.start=="number"&&typeof r.end=="number"?this.mediaSecondsLoaded+=r.end-r.start:this.mediaSecondsLoaded+=r.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(r){return r===null?!1:this.loaderType_==="main"&&r!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&r!==this.sourceUpdater_.audioTimestampOffset()},n.trueSegmentStart_=function(r){var a=r.currentStart,s=r.playlist,o=r.mediaIndex,u=r.firstVideoFrameTimeForData,l=r.currentVideoTimestampOffset,c=r.useVideoTimingInfo,m=r.videoTimingInfo,f=r.audioTimingInfo;if(typeof a!="undefined")return a;if(!c)return f.start;var _=s.segments[o-1];return o===0||!_||typeof _.start=="undefined"||_.end!==u+l?u:m.start},n.waitForAppendsToComplete_=function(r){var a=this.getCurrentMediaInfo_(r);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=a.hasAudio,o=a.hasVideo,u=a.isMuxed,l=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&s&&!u;if(r.waitingOnAppends=0,!r.hasAppendedData_){!r.timingInfo&&typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),r.timingInfo={start:0},r.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(r),this.processMetadataQueue_()),this.checkAppendsDone_(r);return}l&&r.waitingOnAppends++,c&&r.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,r)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,r))},n.checkAppendsDone_=function(r){this.checkForAbort_(r.requestId)||(r.waitingOnAppends--,r.waitingOnAppends===0&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(r){var a=II(this.loaderType_,this.getCurrentMediaInfo_(),r);return a?(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0):!1},n.updateSourceBufferTimestampOffset_=function(r){if(!(r.timestampOffset===null||typeof r.timingInfo.start!="number"||r.changedTimestampOffset||this.loaderType_!=="main")){var a=!1;r.timestampOffset-=r.timingInfo.start,r.changedTimestampOffset=!0,r.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(r.timestampOffset),a=!0),r.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(r.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},n.updateTimingInfoEnd_=function(r){r.timingInfo=r.timingInfo||{};var a=this.getMediaInfo_(),s=this.loaderType_==="main"&&a&&a.hasVideo,o=s&&r.videoTimingInfo?r.videoTimingInfo:r.audioTimingInfo;!o||(r.timingInfo.end=typeof o.end=="number"?o.end:o.start+r.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var r=this.pendingSegment_;this.updateTimingInfoEnd_(r),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});var a=OI(r,this.sourceType_);if(a&&(a.severity==="warn"?R.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(r),this.pendingSegment_=null,this.state="READY",r.isSyncRequest&&(this.trigger("syncinfoupdate"),!r.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+oa(r));return}this.logger_("Appended "+oa(r)),this.addSegmentMetadataCue_(r),this.fetchAtBuffer_=!0,this.currentTimeline_!==r.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:r.timeline})),this.currentTimeline_=r.timeline,this.trigger("syncinfoupdate");var s=r.segment,o=r.part,u=s.end&&this.currentTime_()-s.end>r.playlist.targetDuration*3,l=o&&o.end&&this.currentTime_()-o.end>r.playlist.partTargetDuration*3;if(u||l){this.logger_("bad "+(u?"segment":"part")+" "+oa(r)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=r.mediaIndex,this.partIndex=r.partIndex,this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex)&&this.endOfStream(),this.trigger("appended"),r.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},n.recordThroughput_=function(r){if(r.duration<kl){this.logger_("Ignoring segment's throughput because its duration of "+r.duration+(" is less than the min to record "+kl));return}var a=this.throughput.rate,s=Date.now()-r.endOfAllRequests+1,o=Math.floor(r.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count},n.addSegmentMetadataCue_=function(r){if(!!this.segmentMetadataTrack_){var a=r.segment,s=a.start,o=a.end;if(!(!qT(s)||!qT(o))){qs(s,o,this.segmentMetadataTrack_);var u=D.WebKitDataCue||D.VTTCue,l={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:r.playlist.attributes.BANDWIDTH,resolution:r.playlist.attributes.RESOLUTION,codecs:r.playlist.attributes.CODECS,byteLength:r.byteLength,uri:r.uri,timeline:r.timeline,playlist:r.playlist.id,start:s,end:o},c=JSON.stringify(l),m=new u(s,o,c);m.value=l,this.segmentMetadataTrack_.addCue(m)}}},e}(R.EventTarget);function Fr(){}var YT=function(e){return typeof e!="string"?e:e.replace(/./,function(n){return n.toUpperCase()})},RI=["video","audio"],Zh=function(e,n){var i=n[e+"Buffer"];return i&&i.updating||n.queuePending[e]},MI=function(e,n){for(var i=0;i<n.length;i++){var r=n[i];if(r.type==="mediaSource")return null;if(r.type===e)return i}return null},ep=function t(e,n){if(n.queue.length!==0){var i=0,r=n.queue[i];if(r.type==="mediaSource"){!n.updating()&&n.mediaSource.readyState!=="closed"&&(n.queue.shift(),r.action(n),r.doneFn&&r.doneFn(),t("audio",n),t("video",n));return}if(e!=="mediaSource"&&!(!n.ready()||n.mediaSource.readyState==="closed"||Zh(e,n))){if(r.type!==e){if(i=MI(e,n.queue),i===null)return;r=n.queue[i]}if(n.queue.splice(i,1),n.queuePending[e]=r,r.action(e,n),!r.doneFn){n.queuePending[e]=null,t(e,n);return}}}},JT=function(e,n){var i=n[e+"Buffer"],r=YT(e);!i||(i.removeEventListener("updateend",n["on"+r+"UpdateEnd_"]),i.removeEventListener("error",n["on"+r+"Error_"]),n.codecs[e]=null,n[e+"Buffer"]=null)},pr=function(e,n){return e&&n&&Array.prototype.indexOf.call(e.sourceBuffers,n)!==-1},Ot={appendBuffer:function(e,n,i){return function(r,a){var s=a[r+"Buffer"];if(!!pr(a.mediaSource,s)){a.logger_("Appending segment "+n.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer");try{s.appendBuffer(e)}catch(o){a.logger_("Error with code "+o.code+" "+(o.code===$T?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+n.mediaIndex+" to "+r+"Buffer")),a.queuePending[r]=null,i(o)}}}},remove:function(e,n){return function(i,r){var a=r[i+"Buffer"];if(!!pr(r.mediaSource,a)){r.logger_("Removing "+e+" to "+n+" from "+i+"Buffer");try{a.remove(e,n)}catch{r.logger_("Remove "+e+" to "+n+" from "+i+"Buffer failed")}}}},timestampOffset:function(e){return function(n,i){var r=i[n+"Buffer"];!pr(i.mediaSource,r)||(i.logger_("Setting "+n+"timestampOffset to "+e),r.timestampOffset=e)}},callback:function(e){return function(n,i){e()}},endOfStream:function(e){return function(n){if(n.mediaSource.readyState==="open"){n.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{n.mediaSource.endOfStream(e)}catch(i){R.log.warn("Failed to call media source endOfStream",i)}}}},duration:function(e){return function(n){n.logger_("Setting mediaSource duration to "+e);try{n.mediaSource.duration=e}catch(i){R.log.warn("Failed to set media source duration",i)}}},abort:function(){return function(e,n){if(n.mediaSource.readyState==="open"){var i=n[e+"Buffer"];if(!!pr(n.mediaSource,i)){n.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(r){R.log.warn("Failed to abort on "+e+"Buffer",r)}}}}},addSourceBuffer:function(e,n){return function(i){var r=YT(e),a=ms(n);i.logger_("Adding "+e+"Buffer with codec "+n+" to mediaSource");var s=i.mediaSource.addSourceBuffer(a);s.addEventListener("updateend",i["on"+r+"UpdateEnd_"]),s.addEventListener("error",i["on"+r+"Error_"]),i.codecs[e]=n,i[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(n){var i=n[e+"Buffer"];if(JT(e,n),!!pr(n.mediaSource,i)){n.logger_("Removing "+e+"Buffer with codec "+n.codecs[e]+" from mediaSource");try{n.mediaSource.removeSourceBuffer(i)}catch(r){R.log.warn("Failed to removeSourceBuffer "+e+"Buffer",r)}}}},changeType:function(e){return function(n,i){var r=i[n+"Buffer"],a=ms(e);!pr(i.mediaSource,r)||i.codecs[n]!==e&&(i.logger_("changing "+n+"Buffer codec from "+i.codecs[n]+" to "+e),r.changeType(a),i.codecs[n]=e)}}},Rt=function(e){var n=e.type,i=e.sourceUpdater,r=e.action,a=e.doneFn,s=e.name;i.queue.push({type:n,action:r,doneFn:a,name:s}),ep(n,i)},ZT=function(e,n){return function(i){if(n.queuePending[e]){var r=n.queuePending[e].doneFn;n.queuePending[e]=null,r&&r(n[e+"Error_"])}ep(e,n)}},eS=function(t){$(e,t);function e(i){var r;return r=t.call(this)||this,r.mediaSource=i,r.sourceopenListener_=function(){return ep("mediaSource",re(r))},r.mediaSource.addEventListener("sourceopen",r.sourceopenListener_),r.logger_=er("SourceUpdater"),r.audioTimestampOffset_=0,r.videoTimestampOffset_=0,r.queue=[],r.queuePending={audio:null,video:null},r.delayedAudioAppendQueue_=[],r.videoAppendQueued_=!1,r.codecs={},r.onVideoUpdateEnd_=ZT("video",re(r)),r.onAudioUpdateEnd_=ZT("audio",re(r)),r.onVideoError_=function(a){r.videoError_=a},r.onAudioError_=function(a){r.audioError_=a},r.createdSourceBuffers_=!1,r.initializedEme_=!1,r.triggeredReady_=!1,r}var n=e.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(r){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(r),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(r,a){Rt({type:"mediaSource",sourceUpdater:this,action:Ot.addSourceBuffer(r,a),name:"addSourceBuffer"})},n.abort=function(r){Rt({type:r,sourceUpdater:this,action:Ot.abort(r),name:"abort"})},n.removeSourceBuffer=function(r){if(!this.canRemoveSourceBuffer()){R.log.error("removeSourceBuffer is not supported!");return}Rt({type:"mediaSource",sourceUpdater:this,action:Ot.removeSourceBuffer(r),name:"removeSourceBuffer"})},n.canRemoveSourceBuffer=function(){return!R.browser.IE_VERSION&&!R.browser.IS_FIREFOX&&D.MediaSource&&D.MediaSource.prototype&&typeof D.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return D.SourceBuffer&&D.SourceBuffer.prototype&&typeof D.SourceBuffer.prototype.changeType=="function"},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(r,a){if(!this.canChangeType()){R.log.error("changeType is not supported!");return}Rt({type:r,sourceUpdater:this,action:Ot.changeType(a),name:"changeType"})},n.addOrChangeSourceBuffers=function(r){var a=this;if(!r||typeof r!="object"||Object.keys(r).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(r).forEach(function(s){var o=r[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},n.appendBuffer=function(r,a){var s=this,o=r.segmentInfo,u=r.type,l=r.bytes;if(this.processedAppend_=!0,u==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([r,a]),this.logger_("delayed audio append of "+l.length+" until video append");return}var c=a;if(Rt({type:u,sourceUpdater:this,action:Ot.appendBuffer(l,o||{mediaIndex:-1},c),doneFn:a,name:"appendBuffer"}),u==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var m=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+m.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,m.forEach(function(f){s.appendBuffer.apply(s,f)})}},n.audioBuffered=function(){return pr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:R.createTimeRange()},n.videoBuffered=function(){return pr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:R.createTimeRange()},n.buffered=function(){var r=pr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=pr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!r?this.audioBuffered():r&&!a?this.videoBuffered():rP(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(r,a){a===void 0&&(a=Fr),Rt({type:"mediaSource",sourceUpdater:this,action:Ot.duration(r),name:"duration",doneFn:a})},n.endOfStream=function(r,a){r===void 0&&(r=null),a===void 0&&(a=Fr),typeof r!="string"&&(r=void 0),Rt({type:"mediaSource",sourceUpdater:this,action:Ot.endOfStream(r),name:"endOfStream",doneFn:a})},n.removeAudio=function(r,a,s){if(s===void 0&&(s=Fr),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Rt({type:"audio",sourceUpdater:this,action:Ot.remove(r,a),doneFn:s,name:"remove"})},n.removeVideo=function(r,a,s){if(s===void 0&&(s=Fr),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Rt({type:"video",sourceUpdater:this,action:Ot.remove(r,a),doneFn:s,name:"remove"})},n.updating=function(){return!!(Zh("audio",this)||Zh("video",this))},n.audioTimestampOffset=function(r){return typeof r!="undefined"&&this.audioBuffer&&this.audioTimestampOffset_!==r&&(Rt({type:"audio",sourceUpdater:this,action:Ot.timestampOffset(r),name:"timestampOffset"}),this.audioTimestampOffset_=r),this.audioTimestampOffset_},n.videoTimestampOffset=function(r){return typeof r!="undefined"&&this.videoBuffer&&this.videoTimestampOffset!==r&&(Rt({type:"video",sourceUpdater:this,action:Ot.timestampOffset(r),name:"timestampOffset"}),this.videoTimestampOffset_=r),this.videoTimestampOffset_},n.audioQueueCallback=function(r){!this.audioBuffer||Rt({type:"audio",sourceUpdater:this,action:Ot.callback(r),name:"callback"})},n.videoQueueCallback=function(r){!this.videoBuffer||Rt({type:"video",sourceUpdater:this,action:Ot.callback(r),name:"callback"})},n.dispose=function(){var r=this;this.trigger("dispose"),RI.forEach(function(a){r.abort(a),r.canRemoveSourceBuffer()?r.removeSourceBuffer(a):r[a+"QueueCallback"](function(){return JT(a,r)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(R.EventTarget),tS=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},rS=new Uint8Array(`

`.split("").map(function(t){return t.charCodeAt(0)})),NI=function(t){$(e,t);function e(i,r){var a;return r===void 0&&(r={}),a=t.call(this,i,r)||this,a.mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=i.featuresNativeTextTracks,a.shouldSaveSegmentTimingInfo_=!1,a}var n=e.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return R.createTimeRanges();var r=this.subtitlesTrack_.cues,a=r[0].startTime,s=r[r.length-1].startTime;return R.createTimeRanges([[a,s]])},n.initSegmentForMap=function(r,a){if(a===void 0&&(a=!1),!r)return null;var s=xl(r),o=this.initSegments_[s];if(a&&!o&&r.bytes){var u=rS.byteLength+r.bytes.byteLength,l=new Uint8Array(u);l.set(r.bytes),l.set(rS,r.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:l}}return o||r},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(r){return typeof r=="undefined"?this.subtitlesTrack_:(this.subtitlesTrack_=r,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},n.remove=function(r,a){qs(r,a,this.subtitlesTrack_)},n.fillBuffer_=function(){var r=this,a=this.chooseNextRequest_();if(!!a){if(this.syncController_.timestampOffsetForTimeline(a.timeline)===null){var s=function(){r.state="READY",r.paused()||r.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(t.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(r){for(;r&&r.segment.empty;){if(r.mediaIndex+1>=r.playlist.segments.length){r=null;break}r=this.generateSegmentInfo_({playlist:r.playlist,mediaIndex:r.mediaIndex+1,startOfSegment:r.startOfSegment+r.duration,isSyncRequest:r.isSyncRequest})}return r},n.stopForError=function(r){this.error(r),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(r,a,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(r){r.code===hr.TIMEOUT&&this.handleTimeout_(),r.code===hr.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(r);return}var u=this.pendingSegment_;this.saveBandwidthRelatedStats_(u.duration,a.stats),this.state="APPENDING",this.trigger("appending");var l=u.segment;if(l.map&&(l.map.bytes=a.map.bytes),u.bytes=a.bytes,typeof D.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var c,m=function(){o.subtitlesTrack_.tech_.off("vttjsloaded",c),o.stopForError({message:"Error loading vtt.js"})};c=function(){o.subtitlesTrack_.tech_.off("vttjserror",m),o.segmentRequestFinished_(r,a,s)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",c),this.subtitlesTrack_.tech_.one("vttjserror",m);return}l.requested=!0;try{this.parseVTTCues_(u)}catch(f){this.stopForError({message:f.message});return}if(this.updateTimeMapping_(u,this.syncController_.timelines[u.timeline],this.playlist_),u.cues.length?u.timingInfo={start:u.cues[0].startTime,end:u.cues[u.cues.length-1].endTime}:u.timingInfo={start:u.startOfSegment,end:u.startOfSegment+u.duration},u.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}u.byteLength=u.bytes.byteLength,this.mediaSecondsLoaded+=l.duration,u.cues.forEach(function(f){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new D.VTTCue(f.startTime,f.endTime,f.text):f)}),xI(this.subtitlesTrack_),this.handleAppendsDone_()},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(r){var a,s=!1;typeof D.TextDecoder=="function"?a=new D.TextDecoder("utf8"):(a=D.WebVTT.StringDecoder(),s=!0);var o=new D.WebVTT.Parser(D,D.vttjs,a);if(r.cues=[],r.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=r.cues.push.bind(r.cues),o.ontimestampmap=function(c){r.timestampmap=c},o.onparsingerror=function(c){R.log.warn("Error encountered when parsing cues: "+c.message)},r.segment.map){var u=r.segment.map.bytes;s&&(u=tS(u)),o.parse(u)}var l=r.bytes;s&&(l=tS(l)),o.parse(l),o.flush()},n.updateTimeMapping_=function(r,a,s){var o=r.segment;if(!!a){if(!r.cues.length){o.empty=!0;return}var u=r.timestampmap,l=u.MPEGTS/Wu.ONE_SECOND_IN_TS-u.LOCAL+a.mapping;if(r.cues.forEach(function(f){f.startTime+=l,f.endTime+=l}),!s.syncInfo){var c=r.cues[0].startTime,m=r.cues[r.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+r.mediaIndex,time:Math.min(c,m-o.duration)}}}},e}(Jh),FI=function(e,n){for(var i=e.cues,r=0;r<i.length;r++){var a=i[r];if(n>=a.adStartTime&&n<=a.adEndTime)return a}return null},UI=function(e,n,i){if(i===void 0&&(i=0),!!e.segments)for(var r=i,a,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=FI(n,r+o.duration/2)),a){if("cueIn"in o){a.endTime=r,a.adEndTime=r,r+=o.duration,a=null;continue}if(r<a.endTime){r+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new D.VTTCue(r,r+o.duration,o.cueOut),a.adStartTime=r,a.adEndTime=r+parseFloat(o.cueOut),n.addCue(a)),"cueOutCont"in o){var u=o.cueOutCont.split("/").map(parseFloat),l=u[0],c=u[1];a=new D.VTTCue(r,r+o.duration,""),a.adStartTime=r-l,a.adEndTime=a.adStartTime+c,n.addCue(a)}r+=o.duration}},BI=86400,nS=[{name:"VOD",run:function(e,n,i,r,a){if(i!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,n,i,r,a){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,u=Fh(n);a=a||0;for(var l=0;l<u.length;l++){var c=n.endList||a===0?l:u.length-(l+1),m=u[c],f=m.segment,_=e.timelineToDatetimeMappings[f.timeline];if(!(!_||!f.dateTimeObject)){var b=f.dateTimeObject.getTime()/1e3,S=b+_;if(f.parts&&typeof m.partIndex=="number")for(var v=0;v<m.partIndex;v++)S+=f.parts[v].duration;var x=Math.abs(a-S);if(o!==null&&(x===0||o<x))break;o=x,s={time:S,segmentIndex:m.segmentIndex,partIndex:m.partIndex}}}return s}},{name:"Segment",run:function(e,n,i,r,a){var s=null,o=null;a=a||0;for(var u=Fh(n),l=0;l<u.length;l++){var c=n.endList||a===0?l:u.length-(l+1),m=u[c],f=m.segment,_=m.part&&m.part.start||f&&f.start;if(f.timeline===r&&typeof _!="undefined"){var b=Math.abs(a-_);if(o!==null&&o<b)break;(!s||o===null||o>=b)&&(o=b,s={time:_,segmentIndex:m.segmentIndex,partIndex:m.partIndex})}}return s}},{name:"Discontinuity",run:function(e,n,i,r,a){var s=null;if(a=a||0,n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=null,u=0;u<n.discontinuityStarts.length;u++){var l=n.discontinuityStarts[u],c=n.discontinuitySequence+u+1,m=e.discontinuities[c];if(m){var f=Math.abs(a-m.time);if(o!==null&&o<f)break;(!s||o===null||o>=f)&&(o=f,s={time:m.time,segmentIndex:l,partIndex:null})}}return s}},{name:"Playlist",run:function(e,n,i,r,a){if(n.syncInfo){var s={time:n.syncInfo.time,segmentIndex:n.syncInfo.mediaSequence-n.mediaSequence,partIndex:null};return s}return null}}],jI=function(t){$(e,t);function e(i){var r;return r=t.call(this)||this,r.timelines=[],r.discontinuities=[],r.timelineToDatetimeMappings={},r.logger_=er("SyncController"),r}var n=e.prototype;return n.getSyncPoint=function(r,a,s,o){var u=this.runStrategies_(r,a,s,o);return u.length?this.selectSyncPoint_(u,{key:"time",value:o}):null},n.getExpiredTime=function(r,a){if(!r||!r.segments)return null;var s=this.runStrategies_(r,a,r.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+Ws({defaultDuration:r.targetDuration,durationList:r.segments,startIndex:o.segmentIndex,endIndex:0}))},n.runStrategies_=function(r,a,s,o){for(var u=[],l=0;l<nS.length;l++){var c=nS[l],m=c.run(this,r,a,s,o);m&&(m.strategy=c.name,u.push({strategy:c.name,syncPoint:m}))}return u},n.selectSyncPoint_=function(r,a){for(var s=r[0].syncPoint,o=Math.abs(r[0].syncPoint[a.key]-a.value),u=r[0].strategy,l=1;l<r.length;l++){var c=Math.abs(r[l].syncPoint[a.key]-a.value);c<o&&(o=c,s=r[l].syncPoint,u=r[l].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy"+(" ["+u+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},n.saveExpiredSegmentInfo=function(r,a){var s=a.mediaSequence-r.mediaSequence;if(s>BI){R.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var u=r.segments[o];if(u&&typeof u.start!="undefined"){a.syncInfo={mediaSequence:r.mediaSequence+o,time:u.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+","+(" mediaSequence: "+a.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(r){if(this.timelineToDatetimeMappings={},r.segments&&r.segments.length&&r.segments[0].dateTimeObject){var a=r.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},n.saveSegmentTimingInfo=function(r){var a=r.segmentInfo,s=r.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),u=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:u.start}));var l=u.dateTimeObject;u.discontinuity&&s&&l&&(this.timelineToDatetimeMappings[u.timeline]=-(l.getTime()/1e3))},n.timestampOffsetForTimeline=function(r){return typeof this.timelines[r]=="undefined"?null:this.timelines[r].time},n.mappingForTimeline=function(r){return typeof this.timelines[r]=="undefined"?null:this.timelines[r].mapping},n.calculateSegmentTimeMapping_=function(r,a,s){var o=r.segment,u=r.part,l=this.timelines[r.timeline],c,m;if(typeof r.timestampOffset=="number")l={time:r.startOfSegment,mapping:r.startOfSegment-a.start},s&&(this.timelines[r.timeline]=l,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+r.timeline+": "+("[time: "+l.time+"] [mapping: "+l.mapping+"]"))),c=r.startOfSegment,m=a.end+l.mapping;else if(l)c=a.start+l.mapping,m=a.end+l.mapping;else return!1;return u&&(u.start=c,u.end=m),(!o.start||c<o.start)&&(o.start=c),o.end=m,!0},n.saveDiscontinuitySyncInfo_=function(r){var a=r.playlist,s=r.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var u=a.discontinuityStarts[o],l=a.discontinuitySequence+o+1,c=u-r.mediaIndex,m=Math.abs(c);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>m){var f=void 0;c<0?f=s.start-Ws({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:r.mediaIndex,endIndex:u}):f=s.end+Ws({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:r.mediaIndex+1,endIndex:u}),this.discontinuities[l]={time:f,accuracy:m}}}},n.dispose=function(){this.trigger("dispose"),this.off()},e}(R.EventTarget),HI=function(t){$(e,t);function e(){var i;return i=t.call(this)||this,i.pendingTimelineChanges_={},i.lastTimelineChanges_={},i}var n=e.prototype;return n.clearPendingTimelineChange=function(r){this.pendingTimelineChanges_[r]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(r){var a=r.type,s=r.from,o=r.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},n.lastTimelineChange=function(r){var a=r.type,s=r.from,o=r.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(R.EventTarget),VI=AT(DT(function(){function t(S,v,x){return x={path:v,exports:{},require:function(k,I){return e(k,I==null?x.path:I)}},S(x,x.exports),x.exports}function e(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=t(function(S){function v(C,k){for(var I=0;I<k.length;I++){var M=k[I];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}function x(C,k,I){return k&&v(C.prototype,k),I&&v(C,I),C}S.exports=x,S.exports.default=S.exports,S.exports.__esModule=!0}),i=t(function(S){function v(x,C){return S.exports=v=Object.setPrototypeOf||function(I,M){return I.__proto__=M,I},S.exports.default=S.exports,S.exports.__esModule=!0,v(x,C)}S.exports=v,S.exports.default=S.exports,S.exports.__esModule=!0}),r=t(function(S){function v(x,C){x.prototype=Object.create(C.prototype),x.prototype.constructor=x,i(x,C)}S.exports=v,S.exports.default=S.exports,S.exports.__esModule=!0}),a=function(){function S(){this.listeners={}}var v=S.prototype;return v.on=function(C,k){this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push(k)},v.off=function(C,k){if(!this.listeners[C])return!1;var I=this.listeners[C].indexOf(k);return this.listeners[C]=this.listeners[C].slice(0),this.listeners[C].splice(I,1),I>-1},v.trigger=function(C){var k=this.listeners[C];if(!!k)if(arguments.length===2)for(var I=k.length,M=0;M<I;++M)k[M].call(this,arguments[1]);else for(var N=Array.prototype.slice.call(arguments,1),B=k.length,U=0;U<B;++U)k[U].apply(this,N)},v.dispose=function(){this.listeners={}},v.pipe=function(C){this.on("data",function(k){C.push(k)})},S}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function s(S){return S.subarray(0,S.byteLength-S[S.byteLength-1])}/*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */var o=function(){var v=[[[],[],[],[],[]],[[],[],[],[],[]]],x=v[0],C=v[1],k=x[4],I=C[4],M,N,B,U=[],F=[],H,se,le,ie,xe,oe;for(M=0;M<256;M++)F[(U[M]=M<<1^(M>>7)*283)^M]=M;for(N=B=0;!k[N];N^=H||1,B=F[B]||1)for(ie=B^B<<1^B<<2^B<<3^B<<4,ie=ie>>8^ie&255^99,k[N]=ie,I[ie]=N,le=U[se=U[H=U[N]]],oe=le*16843009^se*65537^H*257^N*16843008,xe=U[ie]*257^ie*16843008,M=0;M<4;M++)x[M][N]=xe=xe<<24^xe>>>8,C[M][ie]=oe=oe<<24^oe>>>8;for(M=0;M<5;M++)x[M]=x[M].slice(0),C[M]=C[M].slice(0);return v},u=null,l=function(){function S(x){u||(u=o()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var C,k,I,M=this._tables[0][4],N=this._tables[1],B=x.length,U=1;if(B!==4&&B!==6&&B!==8)throw new Error("Invalid aes key size");var F=x.slice(0),H=[];for(this._key=[F,H],C=B;C<4*B+28;C++)I=F[C-1],(C%B==0||B===8&&C%B==4)&&(I=M[I>>>24]<<24^M[I>>16&255]<<16^M[I>>8&255]<<8^M[I&255],C%B==0&&(I=I<<8^I>>>24^U<<24,U=U<<1^(U>>7)*283)),F[C]=F[C-B]^I;for(k=0;C;k++,C--)I=F[k&3?C:C-4],C<=4||k<4?H[k]=I:H[k]=N[0][M[I>>>24]]^N[1][M[I>>16&255]]^N[2][M[I>>8&255]]^N[3][M[I&255]]}var v=S.prototype;return v.decrypt=function(C,k,I,M,N,B){var U=this._key[1],F=C^U[0],H=M^U[1],se=I^U[2],le=k^U[3],ie,xe,oe,de=U.length/4-2,pe,He=4,et=this._tables[1],zt=et[0],q=et[1],J=et[2],te=et[3],ve=et[4];for(pe=0;pe<de;pe++)ie=zt[F>>>24]^q[H>>16&255]^J[se>>8&255]^te[le&255]^U[He],xe=zt[H>>>24]^q[se>>16&255]^J[le>>8&255]^te[F&255]^U[He+1],oe=zt[se>>>24]^q[le>>16&255]^J[F>>8&255]^te[H&255]^U[He+2],le=zt[le>>>24]^q[F>>16&255]^J[H>>8&255]^te[se&255]^U[He+3],He+=4,F=ie,H=xe,se=oe;for(pe=0;pe<4;pe++)N[(3&-pe)+B]=ve[F>>>24]<<24^ve[H>>16&255]<<16^ve[se>>8&255]<<8^ve[le&255]^U[He++],ie=F,F=H,H=se,se=le,le=ie},S}(),c=function(S){r(v,S);function v(){var C;return C=S.call(this,a)||this,C.jobs=[],C.delay=1,C.timeout_=null,C}var x=v.prototype;return x.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},x.push=function(k){this.jobs.push(k),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},v}(a),m=function(v){return v<<24|(v&65280)<<8|(v&16711680)>>8|v>>>24},f=function(v,x,C){var k=new Int32Array(v.buffer,v.byteOffset,v.byteLength>>2),I=new l(Array.prototype.slice.call(x)),M=new Uint8Array(v.byteLength),N=new Int32Array(M.buffer),B,U,F,H,se,le,ie,xe,oe;for(B=C[0],U=C[1],F=C[2],H=C[3],oe=0;oe<k.length;oe+=4)se=m(k[oe]),le=m(k[oe+1]),ie=m(k[oe+2]),xe=m(k[oe+3]),I.decrypt(se,le,ie,xe,N,oe),N[oe]=m(N[oe]^B),N[oe+1]=m(N[oe+1]^U),N[oe+2]=m(N[oe+2]^F),N[oe+3]=m(N[oe+3]^H),B=se,U=le,F=ie,H=xe;return M},_=function(){function S(x,C,k,I){var M=S.STEP,N=new Int32Array(x.buffer),B=new Uint8Array(x.byteLength),U=0;for(this.asyncStream_=new c,this.asyncStream_.push(this.decryptChunk_(N.subarray(U,U+M),C,k,B)),U=M;U<N.length;U+=M)k=new Uint32Array([m(N[U-4]),m(N[U-3]),m(N[U-2]),m(N[U-1])]),this.asyncStream_.push(this.decryptChunk_(N.subarray(U,U+M),C,k,B));this.asyncStream_.push(function(){I(null,s(B))})}var v=S.prototype;return v.decryptChunk_=function(C,k,I,M){return function(){var N=f(C,k,I);M.set(N,C.byteOffset)}},n(S,null,[{key:"STEP",get:function(){return 32e3}}]),S}(),b=function(v){var x={};return Object.keys(v).forEach(function(C){var k=v[C];ArrayBuffer.isView(k)?x[C]={bytes:k.buffer,byteOffset:k.byteOffset,byteLength:k.byteLength}:x[C]=k}),x};self.onmessage=function(S){var v=S.data,x=new Uint8Array(v.encrypted.bytes,v.encrypted.byteOffset,v.encrypted.byteLength),C=new Uint32Array(v.key.bytes,v.key.byteOffset,v.key.byteLength/4),k=new Uint32Array(v.iv.bytes,v.iv.byteOffset,v.iv.byteLength/4);new _(x,C,k,function(I,M){self.postMessage(b({source:v.source,decrypted:M}),[M.buffer])})}})),WI=IT(VI),zI=function(e){var n=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(n="main-desc"),n},Pl=function(e,n){e.abort(),e.pause(),n&&n.activePlaylistLoader&&(n.activePlaylistLoader.pause(),n.activePlaylistLoader=null)},tp=function(e,n){n.activePlaylistLoader=e,e.load()},GI=function(e,n){return function(){var i=n.segmentLoaders,r=i[e],a=i.main,s=n.mediaTypes[e],o=s.activeTrack(),u=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastGroup_;if(!(u&&c&&u.id===c.id)&&(s.lastGroup_=u,s.lastTrack_=o,Pl(r,s),!(!u||u.isMasterPlaylist))){if(!u.playlistLoader){l&&a.resetEverything();return}r.resyncLoader(),tp(u.playlistLoader,s)}}},$I=function(e,n){return function(){var i=n.segmentLoaders[e],r=n.mediaTypes[e];r.lastGroup_=null,i.abort(),i.pause()}},qI=function(e,n){return function(){var i=n.masterPlaylistLoader,r=n.segmentLoaders,a=r[e],s=r.main,o=n.mediaTypes[e],u=o.activeTrack(),l=o.getActiveGroup(),c=o.activePlaylistLoader,m=o.lastTrack_;if(!(m&&u&&m.id===u.id)&&(o.lastGroup_=l,o.lastTrack_=u,Pl(a,o),!!l)){if(l.isMasterPlaylist){if(!u||!m||u.id===m.id)return;var f=n.vhs.masterPlaylistController_,_=f.selectPlaylist();if(f.media()===_)return;o.logger_("track change. Switching master audio from "+m.id+" to "+u.id),i.pause(),s.resetEverything(),f.fastQualityChange_(_);return}if(e==="AUDIO"){if(!l.playlistLoader){s.setAudio(!0),s.resetEverything();return}a.setAudio(!0),s.setAudio(!1)}if(c===l.playlistLoader){tp(l.playlistLoader,o);return}a.track&&a.track(u),a.resetEverything(),tp(l.playlistLoader,o)}}},Il={AUDIO:function(e,n){return function(){var i=n.segmentLoaders[e],r=n.mediaTypes[e],a=n.blacklistCurrentPlaylist;Pl(i,r);var s=r.activeTrack(),o=r.activeGroup(),u=(o.filter(function(m){return m.default})[0]||o[0]).id,l=r.tracks[u];if(s===l){a({message:"Problem encountered loading the default audio track."});return}R.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in r.tracks)r.tracks[c].enabled=r.tracks[c]===l;r.onTrackChanged()}},SUBTITLES:function(e,n){return function(){var i=n.segmentLoaders[e],r=n.mediaTypes[e];R.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Pl(i,r);var a=r.activeTrack();a&&(a.mode="disabled"),r.onTrackChanged()}}},iS={AUDIO:function(e,n,i){if(!!n){var r=i.tech,a=i.requestOptions,s=i.segmentLoaders[e];n.on("loadedmetadata",function(){var o=n.media();s.playlist(o,a),(!r.paused()||o.endList&&r.preload()!=="none")&&s.load()}),n.on("loadedplaylist",function(){s.playlist(n.media(),a),r.paused()||s.load()}),n.on("error",Il[e](e,i))}},SUBTITLES:function(e,n,i){var r=i.tech,a=i.requestOptions,s=i.segmentLoaders[e],o=i.mediaTypes[e];n.on("loadedmetadata",function(){var u=n.media();s.playlist(u,a),s.track(o.activeTrack()),(!r.paused()||u.endList&&r.preload()!=="none")&&s.load()}),n.on("loadedplaylist",function(){s.playlist(n.media(),a),r.paused()||s.load()}),n.on("error",Il[e](e,i))}},KI={AUDIO:function(e,n){var i=n.vhs,r=n.sourceType,a=n.segmentLoaders[e],s=n.requestOptions,o=n.master.mediaGroups,u=n.mediaTypes[e],l=u.groups,c=u.tracks,m=u.logger_,f=n.masterPlaylistLoader,_=zs(f.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},_&&(o[e].main.default.playlists=f.master.playlists));for(var b in o[e]){l[b]||(l[b]=[]);for(var S in o[e][b]){var v=o[e][b][S],x=void 0;if(_?(m("AUDIO group '"+b+"' label '"+S+"' is a master playlist"),v.isMasterPlaylist=!0,x=null):r==="vhs-json"&&v.playlists?x=new aa(v.playlists[0],i,s):v.resolvedUri?x=new aa(v.resolvedUri,i,s):v.playlists&&r==="dash"?x=new qh(v.playlists[0],i,s,f):x=null,v=R.mergeOptions({id:S,playlistLoader:x},v),iS[e](e,v.playlistLoader,n),l[b].push(v),typeof c[S]=="undefined"){var C=new R.AudioTrack({id:S,kind:zI(v),enabled:!1,language:v.language,default:v.default,label:S});c[S]=C}}}a.on("error",Il[e](e,n))},SUBTITLES:function(e,n){var i=n.tech,r=n.vhs,a=n.sourceType,s=n.segmentLoaders[e],o=n.requestOptions,u=n.master.mediaGroups,l=n.mediaTypes[e],c=l.groups,m=l.tracks,f=n.masterPlaylistLoader;for(var _ in u[e]){c[_]||(c[_]=[]);for(var b in u[e][_])if(!u[e][_][b].forced){var S=u[e][_][b],v=void 0;if(a==="hls")v=new aa(S.resolvedUri,r,o);else if(a==="dash"){var x=S.playlists.filter(function(k){return k.excludeUntil!==1/0});if(!x.length)return;v=new qh(S.playlists[0],r,o,f)}else a==="vhs-json"&&(v=new aa(S.playlists?S.playlists[0]:S.resolvedUri,r,o));if(S=R.mergeOptions({id:b,playlistLoader:v},S),iS[e](e,S.playlistLoader,n),c[_].push(S),typeof m[b]=="undefined"){var C=i.addRemoteTextTrack({id:b,kind:"subtitles",default:S.default&&S.autoselect,language:S.language,label:b},!1).track;m[b]=C}}}s.on("error",Il[e](e,n))},"CLOSED-CAPTIONS":function(e,n){var i=n.tech,r=n.master.mediaGroups,a=n.mediaTypes[e],s=a.groups,o=a.tracks;for(var u in r[e]){s[u]||(s[u]=[]);for(var l in r[e][u]){var c=r[e][u][l];if(!!/^(?:CC|SERVICE)/.test(c.instreamId)){var m=i.options_.vhs&&i.options_.vhs.captionServices||{},f={label:l,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(m[f.instreamId]&&(f=R.mergeOptions(f,m[f.instreamId])),f.default===void 0&&delete f.default,s[u].push(R.mergeOptions({id:l},c)),typeof o[l]=="undefined"){var _=i.addRemoteTextTrack({id:f.instreamId,kind:"captions",default:f.default,language:f.language,label:f.label},!1).track;o[l]=_}}}}}},XI=function t(e,n){for(var i=0;i<e.length;i++)if(jh(n,e[i])||e[i].playlists&&t(e[i].playlists,n))return!0;return!1},QI=function(e,n){return function(i){var r=n.masterPlaylistLoader,a=n.mediaTypes[e].groups,s=r.media();if(!s)return null;var o=null;s.attributes[e]&&(o=a[s.attributes[e]]);var u=Object.keys(a);if(!o)if(e==="AUDIO"&&u.length>1&&zs(n.master))for(var l=0;l<u.length;l++){var c=a[u[l]];if(XI(c,s)){o=c;break}}else a.main?o=a.main:u.length===1&&(o=a[u[0]]);return typeof i=="undefined"?o:i===null||!o?null:o.filter(function(m){return m.id===i.id})[0]||null}},YI={AUDIO:function(e,n){return function(){var i=n.mediaTypes[e].tracks;for(var r in i)if(i[r].enabled)return i[r];return null}},SUBTITLES:function(e,n){return function(){var i=n.mediaTypes[e].tracks;for(var r in i)if(i[r].mode==="showing"||i[r].mode==="hidden")return i[r];return null}}},JI=function(e,n){var i=n.mediaTypes;return function(){var r=i[e].activeTrack();return r?i[e].activeGroup(r):null}},ZI=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){KI[b](b,e)});var n=e.mediaTypes,i=e.masterPlaylistLoader,r=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,u=s.main;["AUDIO","SUBTITLES"].forEach(function(b){n[b].activeGroup=QI(b,e),n[b].activeTrack=YI[b](b,e),n[b].onGroupChanged=GI(b,e),n[b].onGroupChanging=$I(b,e),n[b].onTrackChanged=qI(b,e),n[b].getActiveGroup=JI(b,e)});var l=n.AUDIO.activeGroup();if(l){var c=(l.filter(function(b){return b.default})[0]||l[0]).id;n.AUDIO.tracks[c].enabled=!0,n.AUDIO.onGroupChanged(),n.AUDIO.onTrackChanged();var m=n.AUDIO.getActiveGroup();m.playlistLoader?(u.setAudio(!1),o.setAudio(!0)):u.setAudio(!0)}i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(b){return n[b].onGroupChanged()})}),i.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(b){return n[b].onGroupChanging()})});var f=function(){n.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};r.audioTracks().addEventListener("change",f),r.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),a.on("dispose",function(){r.audioTracks().removeEventListener("change",f),r.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(var _ in n.AUDIO.tracks)r.audioTracks().addTrack(n.AUDIO.tracks[_])},eA=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(n){e[n]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Fr,activeTrack:Fr,getActiveGroup:Fr,onGroupChanged:Fr,onTrackChanged:Fr,lastTrack_:null,logger_:er("MediaGroups["+n+"]")}}),e},tA=60*2,Ur,rA=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],nA=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},iA=function(e){var n=e.currentPlaylist,i=e.buffered,r=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,u=e.duration,l=e.experimentalBufferBasedABR,c=e.log;if(!a)return R.log.warn("We received no playlist to switch to. Please check your stream."),!1;var m="allowing switch "+(n&&n.id||"null")+" -> "+a.id;if(!n)return c(m+" as current playlist is not set"),!0;if(a.id===n.id)return!1;var f=Boolean(ia(i,r).length);if(!n.endList)return!f&&typeof n.partTargetDuration=="number"?(c("not "+m+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(m+" as current playlist is live"),!0);var _=Mh(i,r),b=l?qe.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:qe.MAX_BUFFER_LOW_WATER_LINE;if(u<b)return c(m+" as duration < max low water line ("+u+" < "+b+")"),!0;var S=a.attributes.BANDWIDTH,v=n.attributes.BANDWIDTH;if(S<v&&(!l||_<o)){var x=m+" as next bandwidth < current bandwidth ("+S+" < "+v+")";return l&&(x+=" and forwardBuffer < bufferHighWaterLine ("+_+" < "+o+")"),c(x),!0}if((!l||S>v)&&_>=s){var C=m+" as forwardBuffer >= bufferLowWaterLine ("+_+" >= "+s+")";return l&&(C+=" and next bandwidth > current bandwidth ("+S+" > "+v+")"),c(C),!0}return c("not "+m+" as no switching criteria met"),!1},aA=function(t){$(e,t);function e(i){var r;r=t.call(this)||this;var a=i.src,s=i.handleManifestRedirects,o=i.withCredentials,u=i.tech,l=i.bandwidth,c=i.externVhs,m=i.useCueTags,f=i.blacklistDuration,_=i.enableLowInitialPlaylist,b=i.sourceType,S=i.cacheEncryptionKeys,v=i.experimentalBufferBasedABR,x=i.experimentalLeastPixelDiffSelector,C=i.captionServices;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var k=i.maxPlaylistRetries;(k===null||typeof k=="undefined")&&(k=1/0),Ur=c,r.experimentalBufferBasedABR=Boolean(v),r.experimentalLeastPixelDiffSelector=Boolean(x),r.withCredentials=o,r.tech_=u,r.vhs_=u.vhs,r.sourceType_=b,r.useCueTags_=m,r.blacklistDuration=f,r.maxPlaylistRetries=k,r.enableLowInitialPlaylist=_,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:k,timeout:null},r.on("error",r.pauseLoading),r.mediaTypes_=eA(),r.mediaSource=new D.MediaSource,r.handleDurationChange_=r.handleDurationChange_.bind(re(r)),r.handleSourceOpen_=r.handleSourceOpen_.bind(re(r)),r.handleSourceEnded_=r.handleSourceEnded_.bind(re(r)),r.mediaSource.addEventListener("durationchange",r.handleDurationChange_),r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_),r.mediaSource.addEventListener("sourceended",r.handleSourceEnded_),r.seekable_=R.createTimeRanges(),r.hasPlayed_=!1,r.syncController_=new jI(i),r.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new WI,r.sourceUpdater_=new eS(r.mediaSource),r.inbandTextTracks_={},r.timelineChangeController_=new HI;var I={vhs:r.vhs_,parse708captions:i.parse708captions,captionServices:C,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.duration()},hasPlayed:function(){return r.hasPlayed_},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:l,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_,cacheEncryptionKeys:S,sourceUpdater:r.sourceUpdater_,timelineChangeController:r.timelineChangeController_,experimentalExactManifestTimings:i.experimentalExactManifestTimings};r.masterPlaylistLoader_=r.sourceType_==="dash"?new qh(a,r.vhs_,r.requestOptions_):new aa(a,r.vhs_,r.requestOptions_),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new Jh(R.mergeOptions(I,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),i),r.audioSegmentLoader_=new Jh(R.mergeOptions(I,{loaderType:"audio"}),i),r.subtitleSegmentLoader_=new NI(R.mergeOptions(I,{loaderType:"vtt",featuresNativeTextTracks:r.tech_.featuresNativeTextTracks}),i),r.setupSegmentLoaderListeners_(),r.experimentalBufferBasedABR&&(r.masterPlaylistLoader_.one("loadedplaylist",function(){return r.startABRTimer_()}),r.tech_.on("pause",function(){return r.stopABRTimer_()}),r.tech_.on("play",function(){return r.startABRTimer_()})),rA.forEach(function(N){r[N+"_"]=nA.bind(re(r),N)}),r.logger_=er("MPC"),r.triggeredFmp4Usage=!1,r.tech_.preload()==="none"?(r.loadOnPlay_=function(){r.loadOnPlay_=null,r.masterPlaylistLoader_.load()},r.tech_.one("play",r.loadOnPlay_)):r.masterPlaylistLoader_.load(),r.timeToLoadedData__=-1,r.mainAppendsToLoadedData__=-1,r.audioAppendsToLoadedData__=-1;var M=r.tech_.preload()==="none"?"play":"loadstart";return r.tech_.one(M,function(){var N=Date.now();r.tech_.one("loadeddata",function(){r.timeToLoadedData__=Date.now()-N,r.mainAppendsToLoadedData__=r.mainSegmentLoader_.mediaAppends,r.audioAppendsToLoadedData__=r.audioSegmentLoader_.mediaAppends})}),r}var n=e.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var r=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return r===-1||a===-1?-1:r+a},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var r=this.selectPlaylist();r&&this.shouldSwitchToMedia_(r)&&this.switchMedia_(r,"abr")},n.switchMedia_=function(r,a,s){var o=this.media(),u=o&&(o.id||o.uri),l=r.id||r.uri;u&&u!==l&&(this.logger_("switch media "+u+" -> "+l+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(r,s)},n.startABRTimer_=function(){var r=this;this.stopABRTimer_(),this.abrTimer_=D.setInterval(function(){return r.checkABR_()},250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(D.clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var r=this.master(),a=r&&r.playlists||[];if(!r||!r.mediaGroups||!r.mediaGroups.AUDIO)return a;var s=r.mediaGroups.AUDIO,o=Object.keys(s),u;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)u=this.mediaTypes_.AUDIO.activeTrack();else{var l=s.main||o.length&&s[o[0]];for(var c in l)if(l[c].default){u={label:c};break}}if(!u)return a;var m=[];for(var f in s)if(s[f][u.label]){var _=s[f][u.label];if(_.playlists&&_.playlists.length)m.push.apply(m,_.playlists);else if(_.uri)m.push(_);else if(r.playlists.length)for(var b=0;b<r.playlists.length;b++){var S=r.playlists[b];S.attributes&&S.attributes.AUDIO&&S.attributes.AUDIO===f&&m.push(S)}}return m.length?m:a},n.setupMasterPlaylistLoaderListeners_=function(){var r=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=r.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Bh(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=s,a.endList&&r.tech_.preload()!=="none"&&(r.mainSegmentLoader_.playlist(a,r.requestOptions_),r.mainSegmentLoader_.load()),ZI({sourceType:r.sourceType_,segmentLoaders:{AUDIO:r.audioSegmentLoader_,SUBTITLES:r.subtitleSegmentLoader_,main:r.mainSegmentLoader_},tech:r.tech_,requestOptions:r.requestOptions_,masterPlaylistLoader:r.masterPlaylistLoader_,vhs:r.vhs_,master:r.master(),mediaTypes:r.mediaTypes_,blacklistCurrentPlaylist:r.blacklistCurrentPlaylist.bind(r)}),r.triggerPresenceUsage_(r.master(),a),r.setupFirstPlay(),!r.mediaTypes_.AUDIO.activePlaylistLoader||r.mediaTypes_.AUDIO.activePlaylistLoader.media()?r.trigger("selectedinitialmedia"):r.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){r.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){r.loadOnPlay_&&r.tech_.off("play",r.loadOnPlay_);var a=r.masterPlaylistLoader_.media();if(!a){r.excludeUnsupportedVariants_();var s;if(r.enableLowInitialPlaylist&&(s=r.selectInitialPlaylist()),s||(s=r.selectPlaylist()),!s||!r.shouldSwitchToMedia_(s))return;r.initialMedia_=s,r.switchMedia_(r.initialMedia_,"initial");var o=r.sourceType_==="vhs-json"&&r.initialMedia_.segments;if(!o)return;a=r.initialMedia_}r.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){r.mainSegmentLoader_.abort(),r.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=r.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;Bh(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=s,r.mainSegmentLoader_.playlist(a,r.requestOptions_),r.mainSegmentLoader_.load(),r.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=r.masterPlaylistLoader_.media();if(a.lastExcludeReason_!=="playlist-unchanged"){var s=r.stuckAtPlaylistEnd_(a);s&&(r.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),r.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){r.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),r.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){r.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),r.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},n.handleUpdatedMediaPlaylist=function(r){this.useCueTags_&&this.updateAdCues_(r),this.mainSegmentLoader_.playlist(r,this.requestOptions_),this.updateDuration(!r.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(r,a){var s=r.mediaGroups||{},o=!0,u=Object.keys(s.AUDIO);for(var l in s.AUDIO)for(var c in s.AUDIO[l]){var m=s.AUDIO[l][c];m.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Ur.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),u.length&&Object.keys(s.AUDIO[u[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(r){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),u=this.bufferHighWaterLine(),l=this.tech_.buffered();return iA({buffered:l,currentTime:s,currentPlaylist:a,nextPlaylist:r,bufferLowWaterLine:o,bufferHighWaterLine:u,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var r=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var s=r.selectPlaylist();r.shouldSwitchToMedia_(s)&&r.switchMedia_(s,"bandwidthupdate"),r.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){r.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){r.error=r.mainSegmentLoader_.error_,r.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){r.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),r.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){r.error=r.audioSegmentLoader_.error_,r.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){r.logger_("main segment loader ended"),r.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){r.experimentalBufferBasedABR||(r.delegateLoaders_("all",["abort"]),r.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},tA))});var a=function(){if(!r.sourceUpdater_.hasCreatedSourceBuffers())return r.tryToCreateSourceBuffers_();var o=r.getCodecsOrExclude_();!o||r.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){r.triggeredFmp4Usage||(r.tech_.trigger({type:"usage",name:"vhs-fmp4"}),r.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){r.triggeredFmp4Usage||(r.tech_.trigger({type:"usage",name:"vhs-fmp4"}),r.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){r.logger_("audioSegmentLoader ended"),r.onEndOfStream()})},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(r){r===void 0&&(r=this.selectPlaylist()),this.fastQualityChange_(r)},n.fastQualityChange_=function(r){var a=this;if(r===void 0&&(r=this.selectPlaylist()),r===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(r,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){R.browser.IE_VERSION||R.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var r=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<r.start(0))return this.tech_.setCurrentTime(r.end(r.length-1))}},n.setupFirstPlay=function(){var r=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(R.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){r.trigger("firstplay"),r.tech_.setCurrentTime(s.end(0)),r.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var r=this.tech_.play();typeof r!="undefined"&&typeof r.then=="function"&&r.then(null,function(a){})}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(!!this.inbandTextTracks_.metadataTrack_){var r=this.inbandTextTracks_.metadataTrack_.cues;if(!(!r||!r.length)){var a=this.duration();r[r.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var r=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?r=r&&this.audioSegmentLoader_.ended_:r=this.audioSegmentLoader_.ended_}!r||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(r){var a=this.seekable();if(!a.length)return!1;var s=this.syncController_.getExpiredTime(r,this.duration());if(s===null)return!1;var o=Ur.Playlist.playlistEnd(r,s),u=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return o-u<=fr;var c=l.end(l.length-1);return c-u<=fr&&o-c<=fr},n.blacklistCurrentPlaylist=function(r,a){r===void 0&&(r={});var s=r.playlist||this.masterPlaylistLoader_.media();if(a=a||r.blacklistDuration||this.blacklistDuration,!s){this.error=r,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,u=o.filter(Tl),l=u.length===1&&u[0]===s;if(o.length===1&&a!==1/0)return R.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(l);if(l){var c=!1;o.forEach(function(x){if(x!==s){var C=x.excludeUntil;typeof C!="undefined"&&C!==1/0&&(c=!0,delete x.excludeUntil)}}),c&&(R.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var m;s.playlistErrors_>this.maxPlaylistRetries?m=1/0:m=Date.now()+a*1e3,s.excludeUntil=m,r.reason&&(s.lastExcludeReason_=r.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var f=this.selectPlaylist();if(!f){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var _=r.internal?this.logger_:R.log.warn,b=r.message?" "+r.message:"";_((r.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(b+" Switching to playlist "+f.id+".")),f.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),f.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var S=f.targetDuration/2*1e3||5*1e3,v=typeof f.lastRequest=="number"&&Date.now()-f.lastRequest<=S;return this.switchMedia_(f,"exclude",l||v)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(r,a){var s=this,o=[],u=r==="all";(u||r==="main")&&o.push(this.masterPlaylistLoader_);var l=[];(u||r==="audio")&&l.push("AUDIO"),(u||r==="subtitle")&&(l.push("CLOSED-CAPTIONS"),l.push("SUBTITLES")),l.forEach(function(c){var m=s.mediaTypes_[c]&&s.mediaTypes_[c].activePlaylistLoader;m&&o.push(m)}),["main","audio","subtitle"].forEach(function(c){var m=s[c+"SegmentLoader_"];m&&(r===c||r==="all")&&o.push(m)}),o.forEach(function(c){return a.forEach(function(m){typeof c[m]=="function"&&c[m]()})})},n.setCurrentTime=function(r){var a=ia(this.tech_.buffered(),r);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(a&&a.length)return r;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var r=this.masterPlaylistLoader_.media();return r?r.endList?this.mediaSource?this.mediaSource.duration:Ur.Playlist.duration(r):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var r;if(!(!this.masterPlaylistLoader_||this.sourceUpdater_.hasCreatedSourceBuffers())){var a=this.masterPlaylistLoader_.media();if(!!a){var s=this.syncController_.getExpiredTime(a,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,u=Ur.Playlist.seekable(a,s,Ur.Playlist.liveEdgeDelay(o,a));if(u.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.duration()),s===null||(r=Ur.Playlist.seekable(a,s,Ur.Playlist.liveEdgeDelay(o,a)),r.length===0)))){var l,c;this.seekable_&&this.seekable_.length&&(l=this.seekable_.end(0),c=this.seekable_.start(0)),r?r.start(0)>u.end(0)||u.start(0)>r.end(0)?this.seekable_=u:this.seekable_=R.createTimeRanges([[r.start(0)>u.start(0)?r.start(0):u.start(0),r.end(0)<u.end(0)?r.end(0):u.end(0)]]):this.seekable_=u,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===l&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+rT(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(r){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,r),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(r){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}var s=this.tech_.buffered(),o=Ur.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},n.dispose=function(){var r=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=r.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(u){u.playlistLoader&&u.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var r=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=r?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!s)},n.getCodecsOrExclude_=function(){var r=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};a.video=a.main;var s=$s(this.master(),this.media()),o={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(o.video=s.video||a.main.videoCodec||qC),a.main.isMuxed&&(o.video+=","+(s.audio||a.main.audioCodec||m0)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||u)&&(o.audio=s.audio||a.main.audioCodec||a.audio.audioCodec||m0,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),!o.audio&&!o.video){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var l=function(v,x){return v?Iu(x):lf(x)},c={},m;if(["video","audio"].forEach(function(S){if(o.hasOwnProperty(S)&&!l(a[S].isFmp4,o[S])){var v=a[S].isFmp4?"browser":"muxer";c[v]=c[v]||[],c[v].push(o[S]),S==="audio"&&(m=v)}}),u&&m&&this.media().attributes.AUDIO){var f=this.media().attributes.AUDIO;this.master().playlists.forEach(function(S){var v=S.attributes&&S.attributes.AUDIO;v===f&&S!==r.media()&&(S.excludeUntil=1/0)}),this.logger_("excluding audio group "+f+" as "+m+' does not support codec(s): "'+o.audio+'"')}if(Object.keys(c).length){var _=Object.keys(c).reduce(function(S,v){return S&&(S+=", "),S+=v+' does not support codec(s): "'+c[v].join(",")+'"',S},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:_,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var b=[];if(["video","audio"].forEach(function(S){var v=(lr(r.sourceUpdater_.codecs[S]||"")[0]||{}).type,x=(lr(o[S]||"")[0]||{}).type;v&&x&&v.toLowerCase()!==x.toLowerCase()&&b.push('"'+r.sourceUpdater_.codecs[S]+'" -> "'+o[S]+'"')}),b.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+b.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return o},n.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&!!this.areMediaTypesKnown_()){var r=this.getCodecsOrExclude_();if(!!r){this.sourceUpdater_.createSourceBuffers(r);var a=[r.video,r.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},n.excludeUnsupportedVariants_=function(){var r=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var u=a[o];if(s.indexOf(u.id)===-1){s.push(u.id);var l=$s(r.master,u),c=[];l.audio&&!lf(l.audio)&&!Iu(l.audio)&&c.push("audio codec "+l.audio),l.video&&!lf(l.video)&&!Iu(l.video)&&c.push("video codec "+l.video),l.text&&l.text==="stpp.ttml.im1t"&&c.push("text codec "+l.text),c.length&&(u.excludeUntil=1/0,r.logger_("excluding "+u.id+" for unsupported: "+c.join(", ")))}})},n.excludeIncompatibleVariants_=function(r){var a=this,s=[],o=this.master().playlists,u=El(lr(r)),l=VT(u),c=u.video&&lr(u.video)[0]||null,m=u.audio&&lr(u.audio)[0]||null;Object.keys(o).forEach(function(f){var _=o[f];if(!(s.indexOf(_.id)!==-1||_.excludeUntil===1/0)){s.push(_.id);var b=[],S=$s(a.masterPlaylistLoader_.master,_),v=VT(S);if(!(!S.audio&&!S.video)){if(v!==l&&b.push('codec count "'+v+'" !== "'+l+'"'),!a.sourceUpdater_.canChangeType()){var x=S.video&&lr(S.video)[0]||null,C=S.audio&&lr(S.audio)[0]||null;x&&c&&x.type.toLowerCase()!==c.type.toLowerCase()&&b.push('video codec "'+x.type+'" !== "'+c.type+'"'),C&&m&&C.type.toLowerCase()!==m.type.toLowerCase()&&b.push('audio codec "'+C.type+'" !== "'+m.type+'"')}b.length&&(_.excludeUntil=1/0,a.logger_("blacklisting "+_.id+": "+b.join(" && ")))}}})},n.updateAdCues_=function(r){var a=0,s=this.seekable();s.length&&(a=s.start(0)),UI(r,this.cueTagsTrack_,a)},n.goalBufferLength=function(){var r=this.tech_.currentTime(),a=qe.GOAL_BUFFER_LENGTH,s=qe.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,qe.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+r*s,o)},n.bufferLowWaterLine=function(){var r=this.tech_.currentTime(),a=qe.BUFFER_LOW_WATER_LINE,s=qe.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,qe.MAX_BUFFER_LOW_WATER_LINE),u=Math.max(a,qe.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+r*s,this.experimentalBufferBasedABR?u:o)},n.bufferHighWaterLine=function(){return qe.BUFFER_HIGH_WATER_LINE},e}(R.EventTarget),sA=function(e,n,i){return function(r){var a=e.master.playlists[n],s=Uh(a),o=Tl(a);return typeof r=="undefined"?o:(r?delete a.disabled:a.disabled=!0,r!==o&&!s&&(i(),r?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),r)}},oA=function(e,n,i){var r=e.masterPlaylistController_,a=e.options_.smoothQualityChange,s=a?"smooth":"fast",o=r[s+"QualityChange_"].bind(r);if(n.attributes){var u=n.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=n.attributes.BANDWIDTH}this.codecs=$s(r.master(),n),this.playlist=n,this.id=i,this.enabled=sA(e.playlists,n.id,o)},uA=function(e){e.representations=function(){var n=e.masterPlaylistController_.master(),i=zs(n)?e.masterPlaylistController_.getAudioTrackPlaylists_():n.playlists;return i?i.filter(function(r){return!Uh(r)}).map(function(r,a){return new oA(e,r,r.id)}):[]}},aS=["seeking","seeked","pause","playing","error"],lA=function(){function t(n){var i=this;this.masterPlaylistController_=n.masterPlaylistController,this.tech_=n.tech,this.seekable=n.seekable,this.allowSeeksWithinUnsafeLiveWindow=n.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=n.liveRangeSafeTimeDelta,this.media=n.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=er("PlaybackWatcher"),this.logger_("initialize");var r=function(){return i.monitorCurrentTime_()},a=function(){return i.monitorCurrentTime_()},s=function(){return i.techWaiting_()},o=function(){return i.cancelTimer_()},u=this.masterPlaylistController_,l=["main","subtitle","audio"],c={};l.forEach(function(f){c[f]={reset:function(){return i.resetSegmentDownloads_(f)},updateend:function(){return i.checkSegmentDownloads_(f)}},u[f+"SegmentLoader_"].on("appendsdone",c[f].updateend),u[f+"SegmentLoader_"].on("playlistupdate",c[f].reset),i.tech_.on(["seeked","seeking"],c[f].reset)});var m=function(_){["main","audio"].forEach(function(b){u[b+"SegmentLoader_"][_]("appended",i.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){i.fixesBadSeeks_()&&(i.consecutiveUpdates=0,i.lastRecordedTime=i.tech_.currentTime(),m("off"))},this.clearSeekingAppendCheck_=function(){return m("off")},this.watchForBadSeeking_=function(){i.clearSeekingAppendCheck_(),m("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(aS,o),this.tech_.on("canplay",a),this.tech_.one("play",r),this.dispose=function(){i.clearSeekingAppendCheck_(),i.logger_("dispose"),i.tech_.off("waiting",s),i.tech_.off(aS,o),i.tech_.off("canplay",a),i.tech_.off("play",r),i.tech_.off("seeking",i.watchForBadSeeking_),i.tech_.off("seeked",i.clearSeekingAppendCheck_),l.forEach(function(f){u[f+"SegmentLoader_"].off("appendsdone",c[f].updateend),u[f+"SegmentLoader_"].off("playlistupdate",c[f].reset),i.tech_.off(["seeked","seeking"],c[f].reset)}),i.checkCurrentTimeTimeout_&&D.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}var e=t.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&D.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=D.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(i){var r=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=r.buffered_()},e.checkSegmentDownloads_=function(i){var r=this.masterPlaylistController_,a=r[i+"SegmentLoader_"],s=a.buffered_(),o=iP(this[i+"Buffered_"],s);if(this[i+"Buffered_"]=s,o){this.resetSegmentDownloads_(i);return}this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:qn(s)}),!(this[i+"StalledDownloads_"]<10)&&(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),i!=="subtitle"&&r.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var i=this.tech_.currentTime(),r=this.tech_.buffered();if(this.lastRecordedTime===i&&(!r.length||i+fr>=r.end(r.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var i=this.tech_.seeking();if(!i)return!1;var r=this.seekable(),a=this.tech_.currentTime(),s=this.afterSeekableWindow_(r,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var u=r.end(r.length-1);o=u}if(this.beforeSeekableWindow_(r,a)){var l=r.start(0);o=l+(l===r.end(0)?0:fr)}if(typeof o!="undefined")return this.logger_("Trying to seek outside of seekable at time "+a+" with "+("seekable range "+rT(r)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,m=this.tech_.buffered(),f=c.audioBuffer?c.audioBuffered():null,_=c.videoBuffer?c.videoBuffered():null,b=this.media(),S=b.partTargetDuration?b.partTargetDuration:(b.targetDuration-pn)*2,v=[f,_],x=0;x<v.length;x++)if(!!v[x]){var C=Mh(v[x],a);if(C<S)return!1}var k=_l(m,a);return k.length===0?!1:(o=k.start(0)+fr,this.logger_("Buffered region starts ("+k.start(0)+") "+(" just beyond seek point ("+a+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),r=this.tech_.buffered(),a=ia(r,i);if(a.length&&i+3<=a.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region "+("["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var i=this.seekable(),r=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(i,r)){var a=i.end(i.length-1);return this.logger_("Fell out of live window at time "+r+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),u=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:r});if(u)return this.cancelTimer_(),this.tech_.setCurrentTime(r),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var l=_l(o,r);if(l.length>0){var c=l.start(0)-r;return this.logger_("Stopped at "+r+", setting timer for "+c+", seeking "+("to "+l.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,r),!0}return!1},e.afterSeekableWindow_=function(i,r,a,s){if(s===void 0&&(s=!1),!i.length)return!1;var o=i.end(i.length-1)+fr,u=!a.endList;return u&&s&&(o=i.end(i.length-1)+a.targetDuration*3),r>o},e.beforeSeekableWindow_=function(i,r){return!!(i.length&&i.start(0)>0&&r<i.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(i){var r=i.videoBuffered,a=i.audioBuffered,s=i.currentTime;if(!!r){var o;if(r.length&&a.length){var u=ia(r,s-3),l=ia(r,s),c=ia(a,s);c.length&&!l.length&&u.length&&(o={start:u.end(0),end:c.end(0)})}else{var m=_l(r,s);m.length||(o=this.gapFromVideoUnderflow_(r,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(i){var r=this.tech_.buffered(),a=this.tech_.currentTime(),s=_l(r,a);this.cancelTimer_(),!(s.length===0||a!==i)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",i,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+pn),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(i,r){for(var a=tP(i),s=0;s<a.length;s++){var o=a.start(s),u=a.end(s);if(r-o<4&&r-o>2)return{start:o,end:u}}return null},t}(),dA={errorInterval:30,getSource:function(e){var n=this.tech({IWillNotUseThisInPlugins:!0}),i=n.currentSource_||this.currentSource();return e(i)}},cA=function t(e,n){var i=0,r=0,a=R.mergeOptions(dA,n);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){r&&e.currentTime(r)},o=function(f){f!=null&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(f),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},u=function(){if(Date.now()-i<a.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){R.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),a.getSource.call(e,o)},l=function m(){e.off("loadedmetadata",s),e.off("error",u),e.off("dispose",m)},c=function(f){l(),t(e,f)};e.on("error",u),e.on("dispose",l),e.reloadSourceOnError=c},fA=function(e){cA(this,e)},sS="2.12.0",hA="5.14.1",pA="0.19.2",mA="4.7.0",gA="3.1.2",Ze={PlaylistLoader:aa,Playlist:kt,utils:PP,STANDARD_PLAYLIST_SELECTOR:GT,INITIAL_PLAYLIST_SELECTOR:mI,lastBandwidthSelector:GT,movingAverageBandwidthSelector:hI,comparePlaylistBandwidth:Yh,comparePlaylistResolution:fI,xhr:TT()};Object.keys(qe).forEach(function(t){Object.defineProperty(Ze,t,{get:function(){return R.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),qe[t]},set:function(n){if(R.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),typeof n!="number"||n<0){R.log.warn("value of Vhs."+t+" must be greater than or equal to 0");return}qe[t]=n}})});var oS="videojs-vhs",uS=function(e,n){for(var i=n.media(),r=-1,a=0;a<e.length;a++)if(e[a].id===i.id){r=a;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},vA=function(e,n){n.representations().forEach(function(i){e.addQualityLevel(i)}),uS(e,n.playlists)};Ze.canPlaySource=function(){return R.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var yA=function(e,n,i){if(!e)return e;var r={};n&&n.attributes&&n.attributes.CODECS&&(r=El(lr(n.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(r.audio=i.attributes.CODECS);var a=ms(r.video),s=ms(r.audio),o={};for(var u in e)o[u]={},s&&(o[u].audioContentType=s),a&&(o[u].videoContentType=a),n.contentProtection&&n.contentProtection[u]&&n.contentProtection[u].pssh&&(o[u].pssh=n.contentProtection[u].pssh),typeof e[u]=="string"&&(o[u].url=e[u]);return R.mergeOptions(e,o)},_A=function(e,n){return e.reduce(function(i,r){if(!r.contentProtection)return i;var a=n.reduce(function(s,o){var u=r.contentProtection[o];return u&&u.pssh&&(s[o]={pssh:u.pssh}),s},{});return Object.keys(a).length&&i.push(a),i},[])},TA=function(e){var n=e.player,i=e.sourceKeySystems,r=e.audioMedia,a=e.mainPlaylists;if(!n.eme.initializeMediaKeys)return Promise.resolve();var s=r?a.concat([r]):a,o=_A(s,Object.keys(i)),u=[],l=[];return o.forEach(function(c){l.push(new Promise(function(m,f){n.tech_.one("keysessioncreated",m)})),u.push(new Promise(function(m,f){n.eme.initializeMediaKeys({keySystems:c},function(_){if(_){f(_);return}m()})}))}),Promise.race([Promise.all(u),Promise.race(l)])},SA=function(e){var n=e.player,i=e.sourceKeySystems,r=e.media,a=e.audioMedia,s=yA(i,r,a);return s?(n.currentSource().keySystems=s,s&&!n.eme?(R.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},lS=function(){if(!D.localStorage)return null;var e=D.localStorage.getItem(oS);if(!e)return null;try{return JSON.parse(e)}catch{return null}},xA=function(e){if(!D.localStorage)return!1;var n=lS();n=n?R.mergeOptions(n,e):e;try{D.localStorage.setItem(oS,JSON.stringify(n))}catch{return!1}return n},bA=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};Ze.supportsNativeHls=function(){if(!z||!z.createElement)return!1;var t=z.createElement("video");if(!R.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(n){return/maybe|probably/i.test(t.canPlayType(n))})}();Ze.supportsNativeDash=function(){return!z||!z.createElement||!R.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(z.createElement("video").canPlayType("application/dash+xml"))}();Ze.supportsTypeNatively=function(t){return t==="hls"?Ze.supportsNativeHls:t==="dash"?Ze.supportsNativeDash:!1};Ze.isSupported=function(){return R.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var EA=R.getComponent("Component"),rp=function(t){$(e,t);function e(i,r,a){var s;if(s=t.call(this,r,R.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&R.log.warn("Using hls options is deprecated. Use vhs instead."),typeof a.initialBandwidth=="number"&&(s.options_.bandwidth=a.initialBandwidth),s.logger_=er("VhsHandler"),r.options_&&r.options_.playerId){var o=R(r.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return R.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"hls-player-access"}),re(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return R.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"vhs-player-access"}),re(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return R.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),re(s)},configurable:!0}),s.player_=o}if(s.tech_=r,s.source_=i,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(z,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(u){var l=z.fullscreenElement||z.webkitFullscreenElement||z.mozFullScreenElement||z.msFullscreenElement;l&&l.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var n=e.prototype;return n.setOptions_=function(){var r=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var a=lS();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=qe.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===qe.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof r.source_[s]!="undefined"&&(r.options_[s]=r.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(r,a){var s=this;if(!!r){this.setOptions_(),this.options_.src=bA(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ze,this.options_.sourceType=g0(a),this.options_.seekTo=function(l){s.tech_.setCurrentTime(l)},this.options_.smoothQualityChange&&R.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new aA(this.options_);var o=R.mergeOptions({liveRangeSafeTimeDelta:fr},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new lA(o),this.masterPlaylistController_.on("error",function(){var l=R.players[s.tech_.options_.playerId],c=s.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),l.error(c)});var u=this.options_.experimentalBufferBasedABR?Ze.movingAverageBandwidthSelector(.55):Ze.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):u.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ze.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,m=D.navigator.connection||D.navigator.mozConnection||D.navigator.webkitConnection,f=1e7;if(this.options_.useNetworkInformationApi&&m){var _=m.downlink*1e3*1e3;_>=f&&c>=f?c=Math.max(c,_):c=_}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),m;this.throughput>0?m=1/this.throughput:m=0;var f=Math.floor(1/(c+m));return f},set:function(){R.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return qn(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return qn(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&xA({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){uA(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),!!this.tech_.el()&&(this.mediaSourceUrl_=D.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.setupEme_=function(){var r=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=SA({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});if(this.player_.tech_.on("keystatuschange",function(o){o.status==="output-restricted"&&r.masterPlaylistController_.blacklistCurrentPlaylist({playlist:r.masterPlaylistController_.media(),message:"DRM keystatus changed to "+o.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),R.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.logger_("waiting for EME key session creation"),TA({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){r.logger_("created EME key session"),r.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(o){r.logger_("error while creating EME key session",o),r.player_.error({message:"Failed to initialize media keys for EME",code:3})})},n.setupQualityLevels_=function(){var r=this,a=R.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){vA(r.qualityLevels_,r)}),this.playlists.on("mediachange",function(){uS(r.qualityLevels_,r.playlists)}))},e.version=function(){return{"@videojs/http-streaming":sS,"mux.js":hA,"mpd-parser":pA,"m3u8-parser":mA,"aes-decrypter":gA}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return eS.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(r){this.masterPlaylistController_.setCurrentTime(r)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&D.URL.revokeObjectURL&&(D.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),t.prototype.dispose.call(this)},n.convertToProgramTime=function(r,a){return MP({playlist:this.masterPlaylistController_.media(),time:r,callback:a})},n.seekToProgramTime=function(r,a,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),NP({programTime:r,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},e}(EA),Al={name:"videojs-http-streaming",VERSION:sS,canHandleSource:function(e,n){n===void 0&&(n={});var i=R.mergeOptions(R.options,n);return Al.canPlayType(e.type,i)},handleSource:function(e,n,i){i===void 0&&(i={});var r=R.mergeOptions(R.options,i);return n.vhs=new rp(e,n,r),R.hasOwnProperty("hls")||Object.defineProperty(n,"hls",{get:function(){return R.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),n.vhs},configurable:!0}),n.vhs.xhr=TT(),n.vhs.src(e.src,e.type),n.vhs},canPlayType:function(e,n){n===void 0&&(n={});var i=R.mergeOptions(R.options,n),r=i.vhs.overrideNative,a=r===void 0?!R.browser.IS_ANY_SAFARI:r,s=g0(e),o=s&&(!Ze.supportsTypeNatively(s)||a);return o?"maybe":""}},CA=function(){return Iu("avc1.4d400d,mp4a.40.2")};CA()&&R.getTech("Html5").registerSourceHandler(Al,0);R.VhsHandler=rp;Object.defineProperty(R,"HlsHandler",{get:function(){return R.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),rp},configurable:!0});R.VhsSourceHandler=Al;Object.defineProperty(R,"HlsSourceHandler",{get:function(){return R.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Al},configurable:!0});R.Vhs=Ze;Object.defineProperty(R,"Hls",{get:function(){return R.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ze},configurable:!0});R.use||(R.registerComponent("Hls",Ze),R.registerComponent("Vhs",Ze));R.options.vhs=R.options.vhs||{};R.options.hls=R.options.hls||{};if(!R.getPlugin||!R.getPlugin("reloadSourceOnError")){var wA=R.registerPlugin||R.plugin;wA("reloadSourceOnError",fA)}var kA={exports:{}},Xs={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA=yo.exports,dS=60103;Xs.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var cS=Symbol.for;dS=cS("react.element"),Xs.Fragment=cS("react.fragment")}var IA=PA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AA=Object.prototype.hasOwnProperty,DA={key:!0,ref:!0,__self:!0,__source:!0};function fS(t,e,n){var i,r={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)AA.call(e,i)&&!DA.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:dS,type:t,key:a,ref:s,props:r,_owner:IA.current}}Xs.jsx=fS;Xs.jsxs=fS;kA.exports=Xs;export{OA as R,LA as a,kA as j,yo as r,R as v};
